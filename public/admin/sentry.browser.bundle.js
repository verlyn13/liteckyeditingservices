var Sentry=(()=>{var Uc=Object.defineProperty;var AE=Object.getOwnPropertyDescriptor;var RE=Object.getOwnPropertyNames;var vE=Object.prototype.hasOwnProperty;var Dc=(e,t)=>{for(var n in t)Uc(e,n,{get:t[n],enumerable:!0})},NE=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of RE(t))!vE.call(e,o)&&o!==n&&Uc(e,o,{get:()=>t[o],enumerable:!(r=AE(t,o))||r.enumerable});return e};var CE=e=>NE(Uc({},"__esModule",{value:!0}),e);var Lk={};Dc(Lk,{BrowserClient:()=>go,MULTIPLEXED_TRANSPORT_EXTRA_KEY:()=>to,OpenFeatureIntegrationHook:()=>Pc,SDK_VERSION:()=>_t,SEMANTIC_ATTRIBUTE_SENTRY_OP:()=>ie,SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN:()=>H,SEMANTIC_ATTRIBUTE_SENTRY_SAMPLE_RATE:()=>yn,SEMANTIC_ATTRIBUTE_SENTRY_SOURCE:()=>ve,Scope:()=>Ze,WINDOW:()=>w,addBreadcrumb:()=>lt,addEventProcessor:()=>hi,addIntegration:()=>Xr,breadcrumbsIntegration:()=>Ja,browserApiErrorsIntegration:()=>Xa,browserProfilingIntegration:()=>pE,browserSessionIntegration:()=>Qa,browserTracingIntegration:()=>jS,buildLaunchDarklyFlagUsedHandler:()=>hE,captureConsoleIntegration:()=>Zu,captureEvent:()=>Qt,captureException:()=>X,captureFeedback:()=>Ni,captureMessage:()=>di,captureSession:()=>Jr,chromeStackLineParser:()=>Td,close:()=>Nu,consoleLoggingIntegration:()=>cl,contextLinesIntegration:()=>rg,continueTrace:()=>mu,createConsolaReporter:()=>ll,createLangChainCallbackHandler:()=>Al,createTransport:()=>Ti,createUserFeedbackEnvelope:()=>F_,dedupeIntegration:()=>vi,defaultRequestInstrumentationOptions:()=>as,defaultStackLineParsers:()=>bd,defaultStackParser:()=>Va,diagnoseSdkConnectivity:()=>TE,endSession:()=>_i,eventFiltersIntegration:()=>Qs,eventFromException:()=>Ca,eventFromMessage:()=>wa,exceptionFromError:()=>ho,extraErrorDataIntegration:()=>el,featureFlagsIntegration:()=>il,feedbackAsyncIntegration:()=>u_,feedbackIntegration:()=>Jl,feedbackSyncIntegration:()=>Jl,flush:()=>vu,forceLoad:()=>q_,functionToStringIntegration:()=>Ai,geckoStackLineParser:()=>yd,getActiveSpan:()=>J,getClient:()=>T,getCurrentScope:()=>O,getDefaultIntegrations:()=>Rd,getFeedback:()=>Kh,getGlobalScope:()=>ct,getIsolationScope:()=>ce,getReplay:()=>SS,getRootSpan:()=>Z,getSpanDescendants:()=>bn,getSpanStatusFromHttpCode:()=>bs,getTraceData:()=>Tr,globalHandlersIntegration:()=>Za,graphqlClientIntegration:()=>ag,growthbookIntegration:()=>SE,httpClientIntegration:()=>Q_,httpContextIntegration:()=>ec,inboundFiltersIntegration:()=>Ri,init:()=>z_,instrumentAnthropicAiClient:()=>Sl,instrumentGoogleGenAIClient:()=>bl,instrumentLangGraph:()=>vl,instrumentOpenAiClient:()=>_l,instrumentOutgoingRequests:()=>wc,instrumentSupabaseClient:()=>ra,isEnabled:()=>mi,isInitialized:()=>Cu,lastEventId:()=>pi,launchDarklyIntegration:()=>mE,lazyLoadIntegration:()=>Na,linkedErrorsIntegration:()=>tc,logger:()=>sa,makeBrowserOfflineTransport:()=>VS,makeFetchTransport:()=>vo,makeMultiplexedTransport:()=>ju,metrics:()=>aa,moduleMetadataIntegration:()=>Qu,onLoad:()=>Y_,openFeatureIntegration:()=>_E,opera10StackLineParser:()=>U_,opera11StackLineParser:()=>D_,parameterize:()=>Js,registerSpanErrorInstrumentation:()=>oi,registerWebWorker:()=>IE,replayCanvasIntegration:()=>MS,replayIntegration:()=>gS,reportPageLoaded:()=>qS,reportingObserverIntegration:()=>J_,rewriteFramesIntegration:()=>tl,sendFeedback:()=>$l,setActiveSpanInBrowser:()=>YS,setContext:()=>fi,setCurrentClient:()=>Ks,setExtra:()=>bu,setExtras:()=>yu,setHttpStatus:()=>pn,setMeasurement:()=>si,setTag:()=>Au,setTags:()=>Iu,setUser:()=>Ru,showReportDialog:()=>V_,spanToBaggageHeader:()=>cu,spanToJSON:()=>L,spanToTraceHeader:()=>ni,spotlightBrowserIntegration:()=>W_,startBrowserTracingNavigationSpan:()=>Nf,startBrowserTracingPageLoadSpan:()=>vf,startInactiveSpan:()=>Et,startNewTrace:()=>Gs,startSession:()=>Kr,startSpan:()=>qe,startSpanManual:()=>ut,statsigIntegration:()=>EE,supabaseIntegration:()=>nl,suppressTracing:()=>ai,thirdPartyErrorFilterIntegration:()=>ol,uiProfiler:()=>L_,unleashIntegration:()=>gE,updateSpanName:()=>su,webWorkerIntegration:()=>bE,winjsStackLineParser:()=>P_,withActiveSpan:()=>Wn,withIsolationScope:()=>ys,withScope:()=>Pe,zodErrorsIntegration:()=>rl});var y=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var v=globalThis;var _t="10.29.0";function ot(){return Un(v),v}function Un(e){let t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||_t,t[_t]=t[_t]||{}}function Kt(e,t,n=v){let r=n.__SENTRY__=n.__SENTRY__||{},o=r[_t]=r[_t]||{};return o[e]||(o[e]=t())}var ar=["debug","info","warn","error","log","assert","trace"],wE="Sentry Logger ",Br={};function Ve(e){if(!("console"in v))return e();let t=v.console,n={},r=Object.keys(Br);r.forEach(o=>{let i=Br[o];n[o]=t[o],t[o]=i});try{return e()}finally{r.forEach(o=>{t[o]=n[o]})}}function kE(){Fc().enabled=!0}function xE(){Fc().enabled=!1}function Lf(){return Fc().enabled}function OE(...e){Bc("log",...e)}function ME(...e){Bc("warn",...e)}function LE(...e){Bc("error",...e)}function Bc(e,...t){y&&Lf()&&Ve(()=>{v.console[e](`${wE}[${e}]:`,...t)})}function Fc(){return y?Kt("loggerSettings",()=>({enabled:!1})):{enabled:!1}}var h={enable:kE,disable:xE,isEnabled:Lf,log:OE,warn:ME,error:LE};var Pf=/\(error: (.*)\)/,Uf=/captureMessage|captureException/;function fs(...e){let t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,o=0)=>{let i=[],s=n.split(`
`);for(let a=r;a<s.length;a++){let c=s[a];c.length>1024&&(c=c.slice(0,1024));let u=Pf.test(c)?c.replace(Pf,"$1"):c;if(!u.match(/\S*Error: /)){for(let d of t){let l=d(u);if(l){i.push(l);break}}if(i.length>=50+o)break}}return Df(i.slice(o))}}function Gc(e){return Array.isArray(e)?fs(...e):e}function Df(e){if(!e.length)return[];let t=Array.from(e);return/sentryWrapped/.test(ds(t).function||"")&&t.pop(),t.reverse(),Uf.test(ds(t).function||"")&&(t.pop(),Uf.test(ds(t).function||"")&&t.pop()),t.slice(0,50).map(n=>({...n,filename:n.filename||ds(t).filename,function:n.function||"?"}))}function ds(e){return e[e.length-1]||{}}var Hc="<anonymous>";function gt(e){try{return!e||typeof e!="function"?Hc:e.name||Hc}catch{return Hc}}function Fr(e){let t=e.exception;if(t){let n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}function ps(e){return"__v_isVNode"in e&&e.__v_isVNode?"[VueVNode]":"[VueViewModel]"}var ms={},Bf={};function Ke(e,t){ms[e]=ms[e]||[],ms[e].push(t)}function Je(e,t){if(!Bf[e]){Bf[e]=!0;try{t()}catch(n){y&&h.error(`Error while instrumenting ${e}`,n)}}}function Oe(e,t){let n=e&&ms[e];if(n)for(let r of n)try{r(t)}catch(o){y&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${gt(r)}
Error:`,o)}}var $c=null;function zo(e){let t="error";Ke(t,e),Je(t,PE)}function PE(){$c=v.onerror,v.onerror=function(e,t,n,r,o){return Oe("error",{column:r,error:o,line:n,msg:e,url:t}),$c?$c.apply(this,arguments):!1},v.onerror.__SENTRY_INSTRUMENTED__=!0}var Wc=null;function qo(e){let t="unhandledrejection";Ke(t,e),Je(t,UE)}function UE(){Wc=v.onunhandledrejection,v.onunhandledrejection=function(e){return Oe("unhandledrejection",e),Wc?Wc.apply(this,arguments):!0},v.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}var Ff=Object.prototype.toString;function St(e){switch(Ff.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return Ct(e,Error)}}function Hr(e,t){return Ff.call(e)===`[object ${t}]`}function hs(e){return Hr(e,"ErrorEvent")}function _s(e){return Hr(e,"DOMError")}function jc(e){return Hr(e,"DOMException")}function Be(e){return Hr(e,"String")}function Dn(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function it(e){return e===null||Dn(e)||typeof e!="object"&&typeof e!="function"}function We(e){return Hr(e,"Object")}function cr(e){return typeof Event<"u"&&Ct(e,Event)}function zc(e){return typeof Element<"u"&&Ct(e,Element)}function qc(e){return Hr(e,"RegExp")}function $t(e){return!!(e?.then&&typeof e.then=="function")}function Yc(e){return We(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function Ct(e,t){try{return e instanceof t}catch{return!1}}function Yo(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue||e.__v_isVNode))}function gs(e){return typeof Request<"u"&&Ct(e,Request)}var Vc=v,DE=80;function Re(e,t={}){if(!e)return"<unknown>";try{let n=e,r=5,o=[],i=0,s=0,a=" > ",c=a.length,u,d=Array.isArray(t)?t:t.keyAttrs,l=!Array.isArray(t)&&t.maxStringLength||DE;for(;n&&i++<r&&(u=BE(n,d),!(u==="html"||i>1&&s+o.length*c+u.length>=l));)o.push(u),s+=u.length,n=n.parentNode;return o.reverse().join(a)}catch{return"<unknown>"}}function BE(e,t){let n=e,r=[];if(!n?.tagName)return"";if(Vc.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());let o=t?.length?t.filter(s=>n.getAttribute(s)).map(s=>[s,n.getAttribute(s)]):null;if(o?.length)o.forEach(s=>{r.push(`[${s[0]}="${s[1]}"]`)});else{n.id&&r.push(`#${n.id}`);let s=n.className;if(s&&Be(s)){let a=s.split(/\s+/);for(let c of a)r.push(`.${c}`)}}let i=["aria-label","type","name","title","alt"];for(let s of i){let a=n.getAttribute(s);a&&r.push(`[${s}="${a}"]`)}return r.join("")}function st(){try{return Vc.document.location.href}catch{return""}}function Vo(e){if(!Vc.HTMLElement)return null;let t=e,n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function ge(e,t,n){if(!(t in e))return;let r=e[t];if(typeof r!="function")return;let o=n(r);typeof o=="function"&&Ss(o,r);try{e[t]=o}catch{y&&h.log(`Failed to replace method "${t}" in object`,e)}}function ye(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{y&&h.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function Ss(e,t){try{let n=t.prototype||{};e.prototype=t.prototype=n,ye(e,"__sentry_original__",t)}catch{}}function ur(e){return e.__sentry_original__}function Es(e){if(St(e))return{message:e.message,name:e.name,stack:e.stack,...Gf(e)};if(cr(e)){let t={type:e.type,target:Hf(e.target),currentTarget:Hf(e.currentTarget),...Gf(e)};return typeof CustomEvent<"u"&&Ct(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Hf(e){try{return zc(e)?Re(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Gf(e){if(typeof e=="object"&&e!==null){let t={};for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function Kc(e){let t=Object.keys(Es(e));return t.sort(),t[0]?t.join(", "):"[object has no keys]"}function un(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function Ko(e,t){let n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);let o=Math.max(t-60,0);o<5&&(o=0);let i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n=`'{snip} ${n}`),i<r&&(n+=" {snip}"),n}function lr(e,t){if(!Array.isArray(e))return"";let n=[];for(let r=0;r<e.length;r++){let o=e[r];try{Yo(o)?n.push(ps(o)):n.push(String(o))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Gr(e,t,n=!1){return Be(e)?qc(t)?t.test(e):Be(t)?n?e===t:e.includes(t):!1:!1}function je(e,t=[],n=!1){return t.some(r=>Gr(e,r,n))}function FE(){let e=v;return e.crypto||e.msCrypto}var Jc;function HE(){return Math.random()*16}function le(e=FE()){try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return Jc||(Jc="10000000100040008000"+1e11),Jc.replace(/[018]/g,t=>(t^(HE()&15)>>t/4).toString(16))}function $f(e){return e.exception?.values?.[0]}function ln(e){let{message:t,event_id:n}=e;if(t)return t;let r=$f(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function $r(e,t,n){let r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function Xe(e,t){let n=$f(e);if(!n)return;let r={type:"generic",handled:!0},o=n.mechanism;if(n.mechanism={...r,...o,...t},t&&"data"in t){let i={...o?.data,...t.data};n.mechanism.data=i}}function Xc(e,t,n=5){if(t.lineno===void 0)return;let r=e.length,o=Math.max(Math.min(r-1,t.lineno-1),0);t.pre_context=e.slice(Math.max(0,o-n),o).map(s=>Ko(s,0));let i=Math.min(r-1,o);t.context_line=Ko(e[i],t.colno||0),t.post_context=e.slice(Math.min(o+1,r),o+1+n).map(s=>Ko(s,0))}function Ts(e){if(GE(e))return!0;try{ye(e,"__sentry_captured__",!0)}catch{}return!1}function GE(e){try{return e.__sentry_captured__}catch{}}var jf=1e3;function wt(){return Date.now()/jf}function $E(){let{performance:e}=v;if(!e?.now||!e.timeOrigin)return wt;let t=e.timeOrigin;return()=>(t+e.now())/jf}var Wf;function Q(){return(Wf??(Wf=$E()))()}var Qc;function WE(){let{performance:e}=v;if(!e?.now)return[void 0,"none"];let t=3600*1e3,n=e.now(),r=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=o<t,s=e.timing?.navigationStart,c=typeof s=="number"?Math.abs(s+n-r):t,u=c<t;return i||u?o<=c?[e.timeOrigin,"timeOrigin"]:[s,"navigationStart"]:[r,"dateNow"]}function Se(){return Qc||(Qc=WE()),Qc[0]}function zf(e){let t=Q(),n={sid:le(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>jE(n)};return e&&Tn(n,e),n}function Tn(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Q(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:le()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{let n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function qf(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),Tn(e,n)}function jE(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Bn(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;let r={...e};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=Bn(r[o],t[o],n-1));return r}function ze(){return le()}function Qe(){return le().substring(16)}var Zc="_sentrySpan";function at(e,t){t?ye(e,Zc,t):delete e[Zc]}function Jt(e){return e[Zc]}var zE=100,Ze=class e{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._attributes={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ze(),sampleRand:Math.random()}}clone(){let t=new e;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._attributes={...this._attributes},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,at(t,Jt(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Tn(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this.setTags({[t]:n})}setAttributes(t){return this._attributes={...this._attributes,...t},this._notifyScopeListeners(),this}setAttribute(t,n){return this.setAttributes({[t]:n})}removeAttribute(t){return t in this._attributes&&(delete this._attributes[t],this._notifyScopeListeners()),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;let n=typeof t=="function"?t(this):t,r=n instanceof e?n.getScopeData():We(n)?t:void 0,{tags:o,attributes:i,extra:s,user:a,contexts:c,level:u,fingerprint:d=[],propagationContext:l}=r||{};return this._tags={...this._tags,...o},this._attributes={...this._attributes,...i},this._extra={...this._extra,...s},this._contexts={...this._contexts,...c},a&&Object.keys(a).length&&(this._user=a),u&&(this._level=u),d.length&&(this._fingerprint=d),l&&(this._propagationContext=l),this}clear(){return this._breadcrumbs=[],this._tags={},this._attributes={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,at(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ze(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){let r=typeof n=="number"?n:zE;if(r<=0)return this;let o={timestamp:wt(),...t,message:t.message?un(t.message,2048):t.message};return this._breadcrumbs.push(o),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,attributes:this._attributes,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Jt(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Bn(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){let r=n?.event_id||le();if(!this._client)return y&&h.warn("No client configured on scope - will not capture exception!"),r;let o=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:o,...n,event_id:r},this),r}captureMessage(t,n,r){let o=r?.event_id||le();if(!this._client)return y&&h.warn("No client configured on scope - will not capture message!"),o;let i=r?.syntheticException??new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:o},this),o}captureEvent(t,n){let r=n?.event_id||le();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(y&&h.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}};function Yf(){return Kt("defaultCurrentScope",()=>new Ze)}function Vf(){return Kt("defaultIsolationScope",()=>new Ze)}var eu=class{constructor(t,n){let r;t?r=t:r=new Ze;let o;n?o=n:o=new Ze,this._stack=[{scope:r}],this._isolationScope=o}withScope(t){let n=this._pushScope(),r;try{r=t(n)}catch(o){throw this._popScope(),o}return $t(r)?r.then(o=>(this._popScope(),o),o=>{throw this._popScope(),o}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){let t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}};function Wr(){let e=ot(),t=Un(e);return t.stack=t.stack||new eu(Yf(),Vf())}function qE(e){return Wr().withScope(e)}function YE(e,t){let n=Wr();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Kf(e){return Wr().withScope(()=>e(Wr().getIsolationScope()))}function Jf(){return{withIsolationScope:Kf,withScope:qE,withSetScope:YE,withSetIsolationScope:(e,t)=>Kf(t),getCurrentScope:()=>Wr().getScope(),getIsolationScope:()=>Wr().getIsolationScope()}}function Wt(e){let t=Un(e);return t.acs?t.acs:Jf()}function O(){let e=ot();return Wt(e).getCurrentScope()}function ce(){let e=ot();return Wt(e).getIsolationScope()}function ct(){return Kt("globalScope",()=>new Ze)}function Pe(...e){let t=ot(),n=Wt(t);if(e.length===2){let[r,o]=e;return r?n.withSetScope(r,o):n.withScope(o)}return n.withScope(e[0])}function ys(...e){let t=ot(),n=Wt(t);if(e.length===2){let[r,o]=e;return r?n.withSetIsolationScope(r,o):n.withIsolationScope(o)}return n.withIsolationScope(e[0])}function T(){return O().getClient()}function Jo(e){let t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||Qe()};return r&&(i.parent_span_id=r),i}var ve="sentry.source",yn="sentry.sample_rate",Xo="sentry.previous_trace_sample_rate",ie="sentry.op",H="sentry.origin",Fn="sentry.idle_span_finish_reason",dn="sentry.measurement_unit",fn="sentry.measurement_value",jr="sentry.custom_span_name",zr="sentry.profile_id",jt="sentry.exclusive_time";var tu="http.request.method",nu="url.full",ru="sentry.link.type";function bs(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"internal_error"}}function pn(e,t){e.setAttribute("http.response.status_code",t);let n=bs(t);n.message!=="unknown_error"&&e.setStatus(n)}var Xf="_sentryScope",Qf="_sentryIsolationScope";function VE(e){try{let t=v.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function KE(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function Zf(e,t,n){e&&(ye(e,Qf,VE(n)),ye(e,Xf,t))}function dr(e){let t=e;return{scope:t[Xf],isolationScope:KE(t[Qf])}}var Is="sentry-",JE=/^sentry-/,XE=8192;function qr(e){let t=QE(e);if(!t)return;let n=Object.entries(t).reduce((r,[o,i])=>{if(o.match(JE)){let s=o.slice(Is.length);r[s]=i}return r},{});if(Object.keys(n).length>0)return n}function As(e){if(!e)return;let t=Object.entries(e).reduce((n,[r,o])=>(o&&(n[`${Is}${r}`]=o),n),{});return ZE(t)}function QE(e){if(!(!e||!Be(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{let r=ep(n);return Object.entries(r).forEach(([o,i])=>{t[o]=i}),t},{}):ep(e)}function ep(e){return e.split(",").map(t=>{let n=t.indexOf("=");if(n===-1)return[];let r=t.slice(0,n),o=t.slice(n+1);return[r,o].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function ZE(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],o)=>{let i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,s=o===0?i:`${t},${i}`;return s.length>XE?(y&&h.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):s},"")}var eT=/^o(\d+)\./,tT=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function nT(e){return e==="http"||e==="https"}function Fe(e,t=!1){let{host:n,path:r,pass:o,port:i,projectId:s,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&o?`:${o}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${s}`}function Rs(e){let t=tT.exec(e);if(!t){Ve(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}let[n,r,o="",i="",s="",a=""]=t.slice(1),c="",u=a,d=u.split("/");if(d.length>1&&(c=d.slice(0,-1).join("/"),u=d.pop()),u){let l=u.match(/^\d+/);l&&(u=l[0])}return tp({host:i,pass:o,path:c,projectId:u,port:s,protocol:n,publicKey:r})}function tp(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function rT(e){if(!y)return!0;let{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(s=>e[s]?!1:(h.error(`Invalid Sentry Dsn: ${s} missing`),!0))?!1:n.match(/^\d+$/)?nT(r)?t&&isNaN(parseInt(t,10))?(h.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(h.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(h.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function oT(e){return e.match(eT)?.[1]}function vs(e){let t=e.getOptions(),{host:n}=e.getDsn()||{},r;return t.orgId?r=String(t.orgId):n&&(r=oT(n)),r}function Qo(e){let t=typeof e=="string"?Rs(e):tp(e);if(!(!t||!rT(t)))return t}function kt(e){if(typeof e=="boolean")return Number(e);let t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}var Ns=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function np(e){if(!e)return;let t=e.match(Ns);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function Zo(e,t){let n=np(e),r=qr(t);if(!n?.traceId)return{traceId:ze(),sampleRand:Math.random()};let o=iT(n,r);r&&(r.sample_rand=o.toString());let{traceId:i,parentSpanId:s,parentSampled:a}=n;return{traceId:i,parentSpanId:s,sampled:a,dsc:r||{},sampleRand:o}}function ei(e=ze(),t=Qe(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Cs(e=ze(),t=Qe(),n){return`00-${e}-${t}-${n?"01":"00"}`}function iT(e,t){let n=kt(t?.sample_rand);if(n!==void 0)return n;let r=kt(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}function ou(e,t){let n=vs(e);return t&&n&&t!==n?(h.log(`Won't continue trace because org IDs don't match (incoming baggage: ${t}, SDK options: ${n})`),!1):(e.getOptions().strictTraceContinuation||!1)&&(t&&!n||!t&&n)?(h.log(`Starting a new trace because strict trace continuation is enabled but one org ID is missing (incoming baggage: ${t}, Sentry client: ${n})`),!1):!0}var ks=0,xs=1,rp=!1;function ip(e){let{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:s,origin:a,links:c}=L(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:s,origin:a,links:c}}function ti(e){let{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:L(e).parent_span_id,i=dr(e).scope,s=r?i?.getPropagationContext().propagationSpanId||Qe():t;return{parent_span_id:o,span_id:s,trace_id:n}}function ni(e){let{traceId:t,spanId:n}=e.spanContext(),r=xt(e);return ei(t,n,r)}function sp(e){let{traceId:t,spanId:n}=e.spanContext(),r=xt(e);return Cs(t,n,r)}function Os(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...o},attributes:i})=>({span_id:t,trace_id:n,sampled:r===xs,attributes:i,...o}))}function Xt(e){return typeof e=="number"?op(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?op(e.getTime()):Q()}function op(e){return e>9999999999?e/1e3:e}function L(e){if(cT(e))return e.getSpanJSON();let{spanId:t,traceId:n}=e.spanContext();if(aT(e)){let{attributes:r,startTime:o,name:i,endTime:s,status:a,links:c}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:u,start_timestamp:Xt(o),timestamp:Xt(s)||void 0,status:Ms(a),op:r[ie],origin:r[H],links:Os(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function aT(e){let t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function cT(e){return typeof e.getSpanJSON=="function"}function xt(e){let{traceFlags:t}=e.spanContext();return t===xs}function Ms(e){if(!(!e||e.code===0))return e.code===1?"ok":e.message||"internal_error"}var fr="_sentryChildSpans",iu="_sentryRootSpan";function Ls(e,t){let n=e[iu]||e;ye(t,iu,n),e[fr]?e[fr].add(t):ye(e,fr,new Set([t]))}function ap(e,t){e[fr]&&e[fr].delete(t)}function bn(e){let t=new Set;function n(r){if(!t.has(r)&&xt(r)){t.add(r);let o=r[fr]?Array.from(r[fr]):[];for(let i of o)n(i)}}return n(e),Array.from(t)}function Z(e){return e[iu]||e}function J(){let e=ot(),t=Wt(e);return t.getActiveSpan?t.getActiveSpan():Jt(O())}function ri(){rp||(Ve(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),rp=!0)}function su(e,t){e.updateName(t),e.setAttributes({[ve]:"custom",[jr]:t})}var cp=!1;function oi(){if(cp)return;function e(){let t=J(),n=t&&Z(t);if(n){let r="internal_error";y&&h.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:2,message:r})}}e.tag="sentry_tracingErrorCallback",cp=!0,zo(e),qo(e)}function we(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;let t=e||T()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function up(e){h.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function pr(e,t){if(!t?.length||!e.description)return!1;for(let n of t){if(uT(n)){if(Gr(e.description,n))return y&&up(e),!0;continue}if(!n.name&&!n.op)continue;let r=n.name?Gr(e.description,n.name):!0,o=n.op?e.op&&Gr(e.op,n.op):!0;if(r&&o)return y&&up(e),!0}return!1}function lp(e,t){let n=t.parent_span_id,r=t.span_id;if(n)for(let o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function uT(e){return typeof e=="string"||e instanceof RegExp}var In="production";var dp="_frozenDsc";function Yr(e,t){ye(e,dp,t)}function au(e,t){let n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||In,release:n.release,public_key:r,trace_id:e,org_id:vs(t)};return t.emit("createDsc",o),o}function mr(e,t){let n=t.getPropagationContext();return n.dsc||au(n.traceId,e)}function ke(e){let t=T();if(!t)return{};let n=Z(e),r=L(n),o=r.data,i=n.spanContext().traceState,s=i?.get("sentry.sample_rate")??o[yn]??o[Xo];function a(m){return(typeof s=="number"||typeof s=="string")&&(m.sample_rate=`${s}`),m}let c=n[dp];if(c)return a(c);let u=i?.get("sentry.dsc"),d=u&&qr(u);if(d)return a(d);let l=au(e.spanContext().traceId,t),f=o[ve],p=r.description;return f!=="url"&&p&&(l.transaction=p),we()&&(l.sampled=String(xt(n)),l.sample_rand=i?.get("sentry.sample_rand")??dr(n).scope?.getPropagationContext().sampleRand.toString()),a(l),t.emit("createDsc",l,n),l}function cu(e){let t=ke(e);return As(t)}var et=class{constructor(t={}){this._traceId=t.traceId||ze(),this._spanId=t.spanId||Qe()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:ks}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}};function Ue(e,t=100,n=1/0){try{return uu("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ps(e,t=3,n=100*1024){let r=Ue(e,t);return pT(r)>n?Ps(e,t-1,n):r}function uu(e,t,n=1/0,r=1/0,o=mT()){let[i,s]=o;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;let a=lT(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;let c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(i(t))return"[Circular ~]";let u=t;if(u&&typeof u.toJSON=="function")try{let p=u.toJSON();return uu("",p,c-1,r,o)}catch{}let d=Array.isArray(t)?[]:{},l=0,f=Es(t);for(let p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(l>=r){d[p]="[MaxProperties ~]";break}let m=f[p];d[p]=uu(p,m,c-1,r,o),l++}return s(t),d}function lT(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(Yo(t))return ps(t);if(Yc(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${gt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;let n=dT(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function dT(e){let t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function fT(e){return~-encodeURI(e).split(/%..|./).length}function pT(e){return fT(JSON.stringify(e))}function mT(){let e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function xe(e,t=[]){return[e,t]}function lu(e,t){let[n,r]=e;return[n,[...r,t]]}function Ot(e,t){let n=e[1];for(let r of n){let o=r[0].type;if(t(r,o))return!0}return!1}function Ds(e,t){return Ot(e,(n,r)=>t.includes(r))}function Us(e){let t=Un(v);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function hT(e){let t=Un(v);return t.decodePolyfill?t.decodePolyfill(e):new TextDecoder().decode(e)}function Hn(e){let[t,n]=e,r=JSON.stringify(t);function o(i){typeof r=="string"?r=typeof i=="string"?r+i:[Us(r),i]:r.push(typeof i=="string"?Us(i):i)}for(let i of n){let[s,a]=i;if(o(`
${JSON.stringify(s)}
`),typeof a=="string"||a instanceof Uint8Array)o(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(Ue(a))}o(c)}}return typeof r=="string"?r:_T(r)}function _T(e){let t=e.reduce((o,i)=>o+i.length,0),n=new Uint8Array(t),r=0;for(let o of e)n.set(o,r),r+=o.length;return n}function du(e){let t=typeof e=="string"?Us(e):e;function n(s){let a=t.subarray(0,s);return t=t.subarray(s+1),a}function r(){let s=t.indexOf(10);return s<0&&(s=t.length),JSON.parse(hT(n(s)))}let o=r(),i=[];for(;t.length;){let s=r(),a=typeof s.length=="number"?s.length:void 0;i.push([s,a?n(a):r()])}return[o,i]}function fu(e){return[{type:"span"},e]}function pu(e){let t=typeof e.data=="string"?Us(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}var gT={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function Bs(e){return gT[e]}function Gn(e){if(!e?.sdk)return;let{name:t,version:n}=e.sdk;return{name:t,version:n}}function ii(e,t,n,r){let o=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Fe(r)},...o&&{trace:o}}}function ST(e,t){if(!t)return e;let n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function fp(e,t,n,r){let o=Gn(n),i={sent_at:new Date().toISOString(),...o&&{sdk:o},...!!r&&t&&{dsn:Fe(t)}},s="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return xe(i,[s])}function pp(e,t,n,r){let o=Gn(n),i=e.type&&e.type!=="replay_event"?e.type:"event";ST(e,n?.sdk);let s=ii(e,o,r,t);return delete e.sdkProcessingMetadata,xe(s,[[{type:i},e]])}function mp(e,t){function n(p){return!!p.trace_id&&!!p.public_key}let r=ke(e[0]),o=t?.getDsn(),i=t?.getOptions().tunnel,s={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&o&&{dsn:Fe(o)}},{beforeSendSpan:a,ignoreSpans:c}=t?.getOptions()||{},u=c?.length?e.filter(p=>!pr(L(p),c)):e,d=e.length-u.length;d&&t?.recordDroppedEvent("before_send","span",d);let l=a?p=>{let m=L(p),_=a(m);return _||(ri(),m)}:L,f=[];for(let p of u){let m=l(p);m&&f.push(fu(m))}return xe(s,f)}function hp(e){if(!y)return;let{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=L(e),{spanId:o}=e.spanContext(),i=xt(e),s=Z(e),a=s===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,u=[`op: ${n}`,`name: ${t}`,`ID: ${o}`];if(r&&u.push(`parent ID: ${r}`),!a){let{op:d,description:l}=L(s);u.push(`root ID: ${s.spanContext().spanId}`),d&&u.push(`root op: ${d}`),l&&u.push(`root description: ${l}`)}h.log(`${c}
  ${u.join(`
  `)}`)}function _p(e){if(!y)return;let{description:t="< unknown name >",op:n="< unknown op >"}=L(e),{spanId:r}=e.spanContext(),i=Z(e)===e,s=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;h.log(s)}function si(e,t,n,r=J()){let o=r&&Z(r);o&&(y&&h.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),o.addEvent(e,{[fn]:t,[dn]:n}))}function Fs(e){if(!e||e.length===0)return;let t={};return e.forEach(n=>{let r=n.attributes||{},o=r[dn],i=r[fn];typeof o=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:o})}),t}var gp=1e3,$n=class{constructor(t={}){this._traceId=t.traceId||ze(),this._spanId=t.spanId||Qe(),this._startTime=t.startTimestamp||Q(),this._links=t.links,this._attributes={},this.setAttributes({[H]:"manual",[ie]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){let{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?xs:ks}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Xt(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(ve,"custom"),this}end(t){this._endTime||(this._endTime=Xt(t),_p(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[ie],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Ms(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[H],profile_id:this._attributes[zr],exclusive_time:this._attributes[jt],measurements:Fs(this._events),is_segment:this._isStandaloneSpan&&Z(this)===this||void 0,segment_id:this._isStandaloneSpan?Z(this).spanContext().spanId:void 0,links:Os(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){y&&h.log("[Tracing] Adding an event to span:",t);let o=Sp(n)?n:r||Q(),i=Sp(n)?{}:n||{},s={name:t,time:Xt(o),attributes:i};return this._events.push(s),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){let t=T();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Z(this)))return;if(this._isStandaloneSpan){this._sampled?TT(mp([this],t)):(y&&h.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}let r=this._convertSpanToTransaction();r&&(dr(this).scope||O()).captureEvent(r)}_convertSpanToTransaction(){if(!Ep(L(this)))return;this._name||(y&&h.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");let{scope:t,isolationScope:n}=dr(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;let i=bn(this).filter(d=>d!==this&&!ET(d)).map(d=>L(d)).filter(Ep),s=this._attributes[ve];delete this._attributes[jr],i.forEach(d=>{delete d.data[jr]});let a={contexts:{trace:ip(this)},spans:i.length>gp?i.sort((d,l)=>d.start_timestamp-l.start_timestamp).slice(0,gp):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:ke(this)},request:r,...s&&{transaction_info:{source:s}}},c=Fs(this._events);return c&&Object.keys(c).length&&(y&&h.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}};function Sp(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Ep(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function ET(e){return e instanceof $n&&e.isStandaloneSpan()}function TT(e){let t=T();if(!t)return;let n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function hr(e,t,n=()=>{},r=()=>{}){let o;try{o=e()}catch(i){throw t(i),n(),i}return yT(o,t,n,r)}function yT(e,t,n,r){return $t(e)?e.then(o=>(n(),r(o),o),o=>{throw t(o),n(),o}):(n(),r(e),e)}function Tp(e,t,n){if(!we(e))return[!1];let r,o;typeof e.tracesSampler=="function"?(o=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?o=t.parentSampled:typeof e.tracesSampleRate<"u"&&(o=e.tracesSampleRate,r=!0);let i=kt(o);if(i===void 0)return y&&h.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(o)} of type ${JSON.stringify(typeof o)}.`),[!1];if(!i)return y&&h.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];let s=n<i;return s||y&&h.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(o)})`),[s,i,r]}var Hs="__SENTRY_SUPPRESS_TRACING__";function qe(e,t){let n=ci();if(n.startSpan)return n.startSpan(e,t);let r=_u(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Pe(a,()=>bp(i)(()=>{let u=O(),d=gu(u,i),f=e.onlyIfParent&&!d?new et:hu({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return at(u,f),hr(()=>t(f),()=>{let{status:p}=L(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:2,message:"internal_error"})},()=>{f.end()})}))}function ut(e,t){let n=ci();if(n.startSpanManual)return n.startSpanManual(e,t);let r=_u(e),{forceTransaction:o,parentSpan:i,scope:s}=e,a=s?.clone();return Pe(a,()=>bp(i)(()=>{let u=O(),d=gu(u,i),f=e.onlyIfParent&&!d?new et:hu({parentSpan:d,spanArguments:r,forceTransaction:o,scope:u});return at(u,f),hr(()=>t(f,()=>f.end()),()=>{let{status:p}=L(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:2,message:"internal_error"})})}))}function Et(e){let t=ci();if(t.startInactiveSpan)return t.startInactiveSpan(e);let n=_u(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?s=>Pe(e.scope,s):o!==void 0?s=>Wn(o,s):s=>s())(()=>{let s=O(),a=gu(s,o);return e.onlyIfParent&&!a?new et:hu({parentSpan:a,spanArguments:n,forceTransaction:r,scope:s})})}var mu=(e,t)=>{let n=ot(),r=Wt(n);if(r.continueTrace)return r.continueTrace(e,t);let{sentryTrace:o,baggage:i}=e,s=T(),a=qr(i);return s&&!ou(s,a?.org_id)?Gs(t):Pe(c=>{let u=Zo(o,i);return c.setPropagationContext(u),at(c,void 0),t()})};function Wn(e,t){let n=ci();return n.withActiveSpan?n.withActiveSpan(e,t):Pe(r=>(at(r,e||void 0),t(r)))}function ai(e){let t=ci();return t.suppressTracing?t.suppressTracing(e):Pe(n=>{n.setSDKProcessingMetadata({[Hs]:!0});let r=e();return n.setSDKProcessingMetadata({[Hs]:void 0}),r})}function Gs(e){return Pe(t=>(t.setPropagationContext({traceId:ze(),sampleRand:Math.random()}),y&&h.log(`Starting a new trace with id ${t.getPropagationContext().traceId}`),Wn(null,e)))}function hu({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!we()){let s=new et;if(n||!e){let a={sampled:"false",sample_rate:"0",transaction:t.name,...ke(s)};Yr(s,a)}return s}let o=ce(),i;if(e&&!n)i=bT(e,r,t),Ls(e,i);else if(e){let s=ke(e),{traceId:a,spanId:c}=e.spanContext(),u=xt(e);i=yp({traceId:a,parentSpanId:c,...t},r,u),Yr(i,s)}else{let{traceId:s,dsc:a,parentSpanId:c,sampled:u}={...o.getPropagationContext(),...r.getPropagationContext()};i=yp({traceId:s,parentSpanId:c,...t},r,u),a&&Yr(i,a)}return hp(i),Zf(i,r,o),i}function _u(e){let n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){let r={...n};return r.startTimestamp=Xt(e.startTime),delete r.startTime,r}return n}function ci(){let e=ot();return Wt(e)}function yp(e,t,n){let r=T(),o=r?.getOptions()||{},{name:i=""}=e,s={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",s,{decision:!1});let a=s.parentSampled??n,c=s.spanAttributes,u=t.getPropagationContext(),[d,l,f]=t.getScopeData().sdkProcessingMetadata[Hs]?[!1]:Tp(o,{name:i,parentSampled:a,attributes:c,parentSampleRate:kt(u.dsc?.sample_rate)},u.sampleRand),p=new $n({...e,attributes:{[ve]:"custom",[yn]:l!==void 0&&f?l:void 0,...c},sampled:d});return!d&&r&&(y&&h.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function bT(e,t,n){let{spanId:r,traceId:o}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Hs]?!1:xt(e),s=i?new $n({...n,parentSpanId:r,traceId:o,sampled:i}):new et({traceId:o});Ls(e,s);let a=T();return a&&(a.emit("spanStart",s),n.endTimestamp&&a.emit("spanEnd",s)),s}function gu(e,t){if(t)return t;if(t===null)return;let n=Jt(e);if(!n)return;let r=T();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Z(n):n}function bp(e){return e!==void 0?t=>Wn(e,t):t=>t()}var Vr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},IT="heartbeatFailed",AT="idleTimeout",RT="finalTimeout",vT="externalFinish";function $s(e,t={}){let n=new Map,r=!1,o,i=vT,s=!t.disableAutoFinish,a=[],{idleTimeout:c=Vr.idleTimeout,finalTimeout:u=Vr.finalTimeout,childSpanTimeout:d=Vr.childSpanTimeout,beforeSpanEnd:l,trimIdleSpanEndTimestamp:f=!0}=t,p=T();if(!p||!we()){let E=new et,k={sample_rate:"0",sampled:"false",...ke(E)};return Yr(E,k),E}let m=O(),_=J(),g=NT(e);g.end=new Proxy(g.end,{apply(E,k,G){if(l&&l(g),k instanceof et)return;let[A,...x]=G,C=A||Q(),P=Xt(C),F=bn(g).filter(N=>N!==g),te=L(g);if(!F.length||!f)return B(P),Reflect.apply(E,k,[P,...x]);let ee=p.getOptions().ignoreSpans,ue=F?.reduce((N,Y)=>{let de=L(Y);return!de.timestamp||ee&&pr(de,ee)?N:N?Math.max(N,de.timestamp):de.timestamp},void 0),R=te.start_timestamp,q=Math.min(R?R+u/1e3:1/0,Math.max(R||-1/0,Math.min(P,ue||1/0)));return B(q),Reflect.apply(E,k,[q,...x])}});function S(){o&&(clearTimeout(o),o=void 0)}function b(E){S(),o=setTimeout(()=>{!r&&n.size===0&&s&&(i=AT,g.end(E))},c)}function D(E){o=setTimeout(()=>{!r&&s&&(i=IT,g.end(E))},d)}function M(E){S(),n.set(E,!0);let k=Q();D(k+d/1e3)}function z(E){if(n.has(E)&&n.delete(E),n.size===0){let k=Q();b(k+c/1e3)}}function B(E){r=!0,n.clear(),a.forEach(F=>F()),at(m,_);let k=L(g),{start_timestamp:G}=k;if(!G)return;k.data[Fn]||g.setAttribute(Fn,i);let x=k.status;(!x||x==="unknown")&&g.setStatus({code:1}),h.log(`[Tracing] Idle span "${k.op}" finished`);let C=bn(g).filter(F=>F!==g),P=0;C.forEach(F=>{F.isRecording()&&(F.setStatus({code:2,message:"cancelled"}),F.end(E),y&&h.log("[Tracing] Cancelling span since span ended early",JSON.stringify(F,void 0,2)));let te=L(F),{timestamp:ee=0,start_timestamp:ue=0}=te,R=ue<=E,q=(u+c)/1e3,N=ee-ue<=q;if(y){let Y=JSON.stringify(F,void 0,2);R?N||h.log("[Tracing] Discarding span since it finished after idle span final timeout",Y):h.log("[Tracing] Discarding span since it happened after idle span was finished",Y)}(!N||!R)&&(ap(g,F),P++)}),P>0&&g.setAttribute("sentry.idle_span_discarded_spans",P)}return a.push(p.on("spanStart",E=>{if(r||E===g||L(E).timestamp||E instanceof $n&&E.isStandaloneSpan())return;bn(g).includes(E)&&M(E.spanContext().spanId)})),a.push(p.on("spanEnd",E=>{r||z(E.spanContext().spanId)})),a.push(p.on("idleSpanEnableAutoFinish",E=>{E===g&&(s=!0,b(),n.size&&D())})),t.disableAutoFinish||b(),setTimeout(()=>{r||(g.setStatus({code:2,message:"deadline_exceeded"}),i=RT,g.end())},u),g}function NT(e){let t=Et(e);return at(O(),t),y&&h.log("[Tracing] Started span is an idle span"),t}var Su=0,Ip=1,Ap=2;function jn(e){return new ui(t=>{t(e)})}function _r(e){return new ui((t,n)=>{n(e)})}var ui=class e{constructor(t){this._state=Su,this._handlers=[],this._runExecutor(t)}then(t,n){return new e((r,o)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(s){o(s)}},i=>{if(!n)o(i);else try{r(n(i))}catch(s){o(s)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new e((n,r)=>{let o,i;return this.then(s=>{i=!1,o=s,t&&t()},s=>{i=!0,o=s,t&&t()}).then(()=>{if(i){r(o);return}n(o)})})}_executeHandlers(){if(this._state===Su)return;let t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===Ip&&n[1](this._value),this._state===Ap&&n[2](this._value),n[0]=!0)})}_runExecutor(t){let n=(i,s)=>{if(this._state===Su){if($t(s)){s.then(r,o);return}this._state=i,this._value=s,this._executeHandlers()}},r=i=>{n(Ip,i)},o=i=>{n(Ap,i)};try{t(r,o)}catch(i){o(i)}}};function Rp(e,t,n,r=0){try{let o=Eu(t,n,e,r);return $t(o)?o:jn(o)}catch(o){return _r(o)}}function Eu(e,t,n,r){let o=n[r];if(!e||!o)return e;let i=o({...e},t);return y&&i===null&&h.log(`Event processor "${o.id||"?"}" dropped event`),$t(i)?i.then(s=>Eu(s,t,n,r+1)):Eu(i,t,n,r+1)}function vp(e,t){let{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;CT(e,t),r&&xT(e,r),OT(e,n),wT(e,o),kT(e,i)}function An(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:u,eventProcessors:d,attachments:l,propagationContext:f,transactionName:p,span:m}=t;Ws(e,"extra",n),Ws(e,"tags",r),Ws(e,"user",o),Ws(e,"contexts",i),e.sdkProcessingMetadata=Bn(e.sdkProcessingMetadata,a,2),s&&(e.level=s),p&&(e.transactionName=p),m&&(e.span=m),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),l.length&&(e.attachments=[...e.attachments,...l]),e.propagationContext={...e.propagationContext,...f}}function Ws(e,t,n){e[t]=Bn(e[t],n,1)}function CT(e,t){let{extra:n,tags:r,user:o,contexts:i,level:s,transactionName:a}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(o).length&&(e.user={...o,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),s&&(e.level=s),a&&e.type!=="transaction"&&(e.transaction=a)}function wT(e,t){let n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function kT(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function xT(e,t){e.contexts={trace:ti(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:ke(t),...e.sdkProcessingMetadata};let n=Z(t),r=L(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function OT(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}var gr,Np,Cp,zn;function js(e){let t=v._sentryDebugIds,n=v._debugIds;if(!t&&!n)return{};let r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(zn&&r.length===Np&&o.length===Cp)return zn;Np=r.length,Cp=o.length,zn={},gr||(gr={});let i=(s,a)=>{for(let c of s){let u=a[c],d=gr?.[c];if(d&&zn&&u)zn[d[0]]=u,gr&&(gr[c]=[d[0],u]);else if(u){let l=e(c);for(let f=l.length-1;f>=0;f--){let m=l[f]?.filename;if(m&&zn&&gr){zn[m]=u,gr[c]=[m,u];break}}}}};return t&&i(r,t),n&&i(o,n),zn}function Tu(e,t){let n=js(e);if(!n)return[];let r=[];for(let o of t)o&&n[o]&&r.push({type:"sourcemap",code_file:o,debug_id:n[o]});return r}function li(e,t,n,r,o,i){let{normalizeDepth:s=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||le(),timestamp:t.timestamp||wt()},u=n.integrations||e.integrations.map(g=>g.name);MT(c,e),UT(c,u),o&&o.emit("applyFrameMetadata",t),t.type===void 0&&LT(c,e.stackParser);let d=BT(r,n.captureContext);n.mechanism&&Xe(c,n.mechanism);let l=o?o.getEventProcessors():[],f=ct().getScopeData();if(i){let g=i.getScopeData();An(f,g)}if(d){let g=d.getScopeData();An(f,g)}let p=[...n.attachments||[],...f.attachments];p.length&&(n.attachments=p),vp(c,f);let m=[...l,...f.eventProcessors];return Rp(m,c,n).then(g=>(g&&PT(g),typeof s=="number"&&s>0?DT(g,s,a):g))}function MT(e,t){let{environment:n,release:r,dist:o,maxValueLength:i}=t;e.environment=e.environment||n||In,!e.release&&r&&(e.release=r),!e.dist&&o&&(e.dist=o);let s=e.request;s?.url&&i&&(s.url=un(s.url,i)),i&&e.exception?.values?.forEach(a=>{a.value&&(a.value=un(a.value,i))})}function LT(e,t){let n=js(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.filename&&(o.debug_id=n[o.filename])})})}function PT(e){let t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(o=>{o.debug_id&&(o.abs_path?t[o.abs_path]=o.debug_id:o.filename&&(t[o.filename]=o.debug_id),delete o.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];let n=e.debug_meta.images;Object.entries(t).forEach(([r,o])=>{n.push({type:"sourcemap",code_file:r,debug_id:o})})}function UT(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function DT(e,t,n){if(!e)return null;let r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:Ue(o.data,t,n)}}))},...e.user&&{user:Ue(e.user,t,n)},...e.contexts&&{contexts:Ue(e.contexts,t,n)},...e.extra&&{extra:Ue(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Ue(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:Ue(o.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Ue(e.contexts.flags,3,n)),r}function BT(e,t){if(!t)return e;let n=e?e.clone():new Ze;return n.update(t),n}function wp(e){if(e)return FT(e)?{captureContext:e}:GT(e)?{captureContext:e}:e}function FT(e){return e instanceof Ze||typeof e=="function"}var HT=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function GT(e){return Object.keys(e).some(t=>HT.includes(t))}function X(e,t){return O().captureException(e,wp(t))}function di(e,t){let n=typeof t=="string"?t:void 0,r=typeof t!="string"?{captureContext:t}:void 0;return O().captureMessage(e,n,r)}function Qt(e,t){return O().captureEvent(e,t)}function fi(e,t){ce().setContext(e,t)}function yu(e){ce().setExtras(e)}function bu(e,t){ce().setExtra(e,t)}function Iu(e){ce().setTags(e)}function Au(e,t){ce().setTag(e,t)}function Ru(e){ce().setUser(e)}function pi(){return ce().lastEventId()}async function vu(e){let t=T();return t?t.flush(e):(y&&h.warn("Cannot flush events. No client defined."),Promise.resolve(!1))}async function Nu(e){let t=T();return t?t.close(e):(y&&h.warn("Cannot flush events and disable SDK. No client defined."),Promise.resolve(!1))}function Cu(){return!!T()}function mi(){let e=T();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function hi(e){ce().addEventProcessor(e)}function Kr(e){let t=ce(),n=O(),{userAgent:r}=v.navigator||{},o=zf({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&Tn(i,{status:"exited"}),_i(),t.setSession(o),o}function _i(){let e=ce(),n=O().getSession()||e.getSession();n&&qf(n),kp(),e.setSession()}function kp(){let e=ce(),t=T(),n=e.getSession();n&&t&&t.captureSession(n)}function Jr(e=!1){if(e){_i();return}kp()}var $T="7";function xp(e){let t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function WT(e){return`${xp(e)}${e.projectId}/envelope/`}function jT(e,t){let n={sentry_version:$T};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function gi(e,t,n){return t||`${WT(e)}?${jT(e,n)}`}function wu(e,t){let n=Qo(e);if(!n)return"";let r=`${xp(n)}embed/error-page/`,o=`dsn=${Fe(n)}`;for(let i in t)if(i!=="dsn"&&i!=="onClose")if(i==="user"){let s=t.user;if(!s)continue;s.name&&(o+=`&name=${encodeURIComponent(s.name)}`),s.email&&(o+=`&email=${encodeURIComponent(s.email)}`)}else o+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${r}?${o}`}var ku=[];function zT(e){let t={};return e.forEach(n=>{let{name:r}=n,o=t[r];o&&!o.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function xu(e){let t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){let o=n(t);r=Array.isArray(o)?o:[o]}else r=t;return zT(r)}function Op(e,t){let n={};return t.forEach(r=>{r&&Mu(e,r,n)}),n}function Ou(e,t){for(let n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Mu(e,t,n){if(n[t.name]){y&&h.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,!ku.includes(t.name)&&typeof t.setupOnce=="function"&&(t.setupOnce(),ku.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){let r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(o,i)=>r(o,i,e))}if(typeof t.processEvent=="function"){let r=t.processEvent.bind(t),o=Object.assign((i,s)=>r(i,s,e),{id:t.name});e.addEventProcessor(o)}y&&h.log(`Integration installed: ${t.name}`)}function Xr(e){let t=T();if(!t){y&&h.warn(`Cannot add integration "${e.name}" because no SDK Client is available.`);return}t.addIntegration(e)}function zs(e,t){return t?Pe(t,()=>{let n=J(),r=n?ti(n):Jo(t);return[n?ke(n):mr(e,t),r]}):[void 0,void 0]}var Mp={trace:1,debug:5,info:9,warn:13,error:17,fatal:21};function qT(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Lp(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Fe(r)),xe(o,[qT(e)])}var YT=100;function VT(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function mn(e,t,n,r=!0){n&&(!e[t]||r)&&(e[t]=n)}function Pp(e,t){let n=Lu(),r=Up(e);r===void 0?n.set(e,[t]):r.length>=YT?(Qr(e,r),n.set(e,[t])):n.set(e,[...r,t])}function qn(e,t=O(),n=Pp){let r=t?.getClient()??T();if(!r){y&&h.warn("No client available to capture log.");return}let{release:o,environment:i,enableLogs:s=!1,beforeSendLog:a}=r.getOptions();if(!s){y&&h.warn("logging option not enabled, log will not be captured.");return}let[,c]=zs(r,t),u={...e.attributes},{user:{id:d,email:l,username:f}}=KT(t);mn(u,"user.id",d,!1),mn(u,"user.email",l,!1),mn(u,"user.name",f,!1),mn(u,"sentry.release",o),mn(u,"sentry.environment",i);let{name:p,version:m}=r.getSdkMetadata()?.sdk??{};mn(u,"sentry.sdk.name",p),mn(u,"sentry.sdk.version",m);let _=r.getIntegrationByName("Replay"),g=_?.getReplayId(!0);mn(u,"sentry.replay_id",g),g&&_?.getRecordingMode()==="buffer"&&mn(u,"sentry._internal.replay_is_buffering",!0);let S=e.message;if(Dn(S)){let{__sentry_template_string__:A,__sentry_template_values__:x=[]}=S;x?.length&&(u["sentry.message.template"]=A),x.forEach((C,P)=>{u[`sentry.message.parameter.${P}`]=C})}let b=Jt(t);mn(u,"sentry.trace.parent_span_id",b?.spanContext().spanId);let D={...e,attributes:u};r.emit("beforeCaptureLog",D);let M=a?Ve(()=>a(D)):D;if(!M){r.recordDroppedEvent("before_send","log_item",1),y&&h.warn("beforeSendLog returned null, log will not be captured.");return}let{level:z,message:B,attributes:E={},severityNumber:k}=M,G={timestamp:Q(),level:z,body:B,trace_id:c?.trace_id,severity_number:k??Mp[z],attributes:Object.keys(E).reduce((A,x)=>(A[x]=VT(E[x]),A),{})};n(r,G),r.emit("afterCaptureLog",M)}function Qr(e,t){let n=t??Up(e)??[];if(n.length===0)return;let r=e.getOptions(),o=Lp(n,r._metadata,r.tunnel,e.getDsn());Lu().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(o)}function Up(e){return Lu().get(e)}function KT(e){let t=ct().getScopeData();return An(t,ce().getScopeData()),An(t,e.getScopeData()),t}function Lu(){return Kt("clientToLogBufferMap",()=>new WeakMap)}function JT(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function Dp(e,t,n,r){let o={};return t?.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=Fe(r)),xe(o,[JT(e)])}var XT=1e3;function QT(e){switch(typeof e){case"number":return Number.isInteger(e)?{value:e,type:"integer"}:{value:e,type:"double"};case"boolean":return{value:e,type:"boolean"};case"string":return{value:e,type:"string"};default:{let t="";try{t=JSON.stringify(e)??""}catch{}return{value:t,type:"string"}}}}function Rn(e,t,n,r=!0){n&&(r||!(t in e))&&(e[t]=n)}function Bp(e,t){let n=Uu(),r=Fp(e);r===void 0?n.set(e,[t]):r.length>=XT?(Zr(e,r),n.set(e,[t])):n.set(e,[...r,t])}function ZT(e,t,n){let{release:r,environment:o}=t.getOptions(),i={...e.attributes},{user:{id:s,email:a,username:c}}=ty(n);Rn(i,"user.id",s,!1),Rn(i,"user.email",a,!1),Rn(i,"user.name",c,!1),Rn(i,"sentry.release",r),Rn(i,"sentry.environment",o);let{name:u,version:d}=t.getSdkMetadata()?.sdk??{};Rn(i,"sentry.sdk.name",u),Rn(i,"sentry.sdk.version",d);let l=t.getIntegrationByName("Replay"),f=l?.getReplayId(!0);return Rn(i,"sentry.replay_id",f),f&&l?.getRecordingMode()==="buffer"&&Rn(i,"sentry._internal.replay_is_buffering",!0),{...e,attributes:i}}function ey(e,t,n){let r={};for(let c in e.attributes)e.attributes[c]!==void 0&&(r[c]=QT(e.attributes[c]));let[,o]=zs(t,n),i=Jt(n),s=i?i.spanContext().traceId:o?.trace_id,a=i?i.spanContext().spanId:void 0;return{timestamp:Q(),trace_id:s??"",span_id:a,name:e.name,type:e.type,unit:e.unit,value:e.value,attributes:r}}function Pu(e,t){let n=t?.scope??O(),r=t?.captureSerializedMetric??Bp,o=n?.getClient()??T();if(!o){y&&h.warn("No client available to capture metric.");return}let{_experiments:i,enableMetrics:s,beforeSendMetric:a}=o.getOptions();if(!(s??i?.enableMetrics??!0)){y&&h.warn("metrics option not enabled, metric will not be captured.");return}let u=ZT(e,o,n);o.emit("processMetric",u);let d=a||i?.beforeSendMetric,l=d?d(u):u;if(!l){y&&h.log("`beforeSendMetric` returned `null`, will not send metric.");return}let f=ey(l,o,n);y&&h.log("[Metric]",f),r(o,f),o.emit("afterCaptureMetric",l)}function Zr(e,t){let n=t??Fp(e)??[];if(n.length===0)return;let r=e.getOptions(),o=Dp(n,r._metadata,r.tunnel,e.getDsn());Uu().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(o)}function Fp(e){return Uu().get(e)}function ty(e){let t=ct().getScopeData();return An(t,ce().getScopeData()),An(t,e.getScopeData()),t}function Uu(){return Kt("clientToMetricBufferMap",()=>new WeakMap)}var eo=Symbol.for("SentryBufferFullError");function Sr(e=100){let t=new Set;function n(){return t.size<e}function r(s){t.delete(s)}function o(s){if(!n())return _r(eo);let a=s();return t.add(a),a.then(()=>r(a),()=>r(a)),a}function i(s){if(!t.size)return jn(!0);let a=Promise.allSettled(Array.from(t)).then(()=>!0);if(!s)return a;let c=[a,new Promise(u=>setTimeout(()=>u(!1),s))];return Promise.race(c)}return{get $(){return Array.from(t)},add:o,drain:i}}function qs(e,t=Date.now()){let n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;let r=Date.parse(`${e}`);return isNaN(r)?6e4:r-t}function Hp(e,t){return e[t]||e.all||0}function Si(e,t,n=Date.now()){return Hp(e,t)>n}function Ei(e,{statusCode:t,headers:n},r=Date.now()){let o={...e},i=n?.["x-sentry-rate-limits"],s=n?.["retry-after"];if(i)for(let a of i.trim().split(",")){let[c,u,,,d]=a.split(":",5),l=parseInt(c,10),f=(isNaN(l)?60:l)*1e3;if(!u)o.all=r+f;else for(let p of u.split(";"))p==="metric_bucket"?(!d||d.split(";").includes("custom"))&&(o[p]=r+f):o[p]=r+f}else s?o.all=r+qs(s,r):t===429&&(o.all=r+60*1e3);return o}var Du=64;function Ti(e,t,n=Sr(e.bufferSize||Du)){let r={},o=s=>n.drain(s);function i(s){let a=[];if(Ot(s,(l,f)=>{let p=Bs(f);Si(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):a.push(l)}),a.length===0)return Promise.resolve({});let c=xe(s[0],a),u=l=>{Ot(c,(f,p)=>{e.recordDroppedEvent(l,Bs(p))})},d=()=>t({body:Hn(c)}).then(l=>(l.statusCode!==void 0&&(l.statusCode<200||l.statusCode>=300)&&y&&h.warn(`Sentry responded with status code ${l.statusCode} to sent event.`),r=Ei(r,l),l),l=>{throw u("network_error"),y&&h.error("Encountered error running transport request:",l),l});return n.add(d).then(l=>l,l=>{if(l===eo)return y&&h.error("Skipped sending event because buffer is full."),u("queue_overflow"),Promise.resolve({});throw l})}return{send:i,flush:o}}function Gp(e,t,n){let r=[{type:"client_report"},{timestamp:n||wt(),discarded_events:e}];return xe(t?{dsn:t}:{},[r])}function Ys(e){let t=[];e.message&&t.push(e.message);try{let n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function $p(e){let{trace_id:t,parent_span_id:n,span_id:r,status:o,origin:i,data:s,op:a}=e.contexts?.trace??{};return{data:s??{},description:e.transaction,op:a,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:o,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:s?.[zr],exclusive_time:s?.[jt],measurements:e.measurements,is_segment:!0}}function Wp(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[zr]:e.profile_id},...e.exclusive_time&&{[jt]:e.exclusive_time}}}},measurements:e.measurements}}var jp="Not capturing exception because it's already been captured.",zp="Discarded session because of missing or non-string release",Xp=Symbol.for("SentryInternalError"),Qp=Symbol.for("SentryDoNotSendEventError"),ny=5e3;function Vs(e){return{message:e,[Xp]:!0}}function Bu(e){return{message:e,[Qp]:!0}}function qp(e){return!!e&&typeof e=="object"&&Xp in e}function Yp(e){return!!e&&typeof e=="object"&&Qp in e}function Vp(e,t,n,r,o){let i=0,s,a=!1;e.on(n,()=>{i=0,clearTimeout(s),a=!1}),e.on(t,c=>{i+=r(c),i>=8e5?o(e):a||(a=!0,s=setTimeout(()=>{o(e)},ny))}),e.on("flush",()=>{o(e)})}var yi=class{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],this._promiseBuffer=Sr(t.transportOptions?.bufferSize??Du),t.dsn?this._dsn=Qo(t.dsn):y&&h.warn("No DSN provided, client will not send events."),this._dsn){let r=gi(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:r})}this._options.enableLogs=this._options.enableLogs??this._options._experiments?.enableLogs,this._options.enableLogs&&Vp(this,"afterCaptureLog","flushLogs",sy,Qr),(this._options.enableMetrics??this._options._experiments?.enableMetrics??!0)&&Vp(this,"afterCaptureMetric","flushMetrics",iy,Zr)}captureException(t,n,r){let o=le();if(Ts(t))return y&&h.log(jp),o;let i={event_id:o,...n};return this._process(()=>this.eventFromException(t,i).then(s=>this._captureEvent(s,i,r)).then(s=>s),"error"),i.event_id}captureMessage(t,n,r,o){let i={event_id:le(),...r},s=Dn(t)?t:String(t),a=it(t),c=a?this.eventFromMessage(s,n,i):this.eventFromException(t,i);return this._process(()=>c.then(u=>this._captureEvent(u,i,o)),a?"unknown":"error"),i.event_id}captureEvent(t,n,r){let o=le();if(n?.originalException&&Ts(n.originalException))return y&&h.log(jp),o;let i={event_id:o,...n},s=t.sdkProcessingMetadata||{},a=s.capturedSpanScope,c=s.capturedSpanIsolationScope,u=Kp(t.type);return this._process(()=>this._captureEvent(t,i,a||r,c),u),i.event_id}captureSession(t){this.sendSession(t),Tn(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){let n=this._transport;if(!n)return!0;this.emit("flush");let r=await this._isClientDoneProcessing(t),o=await n.flush(t);return r&&o}async close(t){let n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){let n=this._integrations[t.name];Mu(this,t,this._integrations),n||Ou(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=pp(t,this._dsn,this._options._metadata,this._options.tunnel);for(let o of n.attachments||[])r=lu(r,pu(o));this.sendEnvelope(r).then(o=>this.emit("afterSendEvent",t,o))}sendSession(t){let{release:n,environment:r=In}=this._options;if("aggregates"in t){let i=t.attrs||{};if(!i.release&&!n){y&&h.warn(zp);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){y&&h.warn(zp);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);let o=fp(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(o)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){let o=`${t}:${n}`;y&&h.log(`Recording outcome: "${o}"${r>1?` (${r} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+r}}on(t,n){let r=this._hooks[t]=this._hooks[t]||new Set,o=(...i)=>n(...i);return r.add(o),()=>{r.delete(o)}}emit(t,...n){let r=this._hooks[t];r&&r.forEach(o=>o(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return y&&h.error("Error while sending envelope:",n),{}}return y&&h.error("Transport disabled"),{}}_setupIntegrations(){let{integrations:t}=this._options;this._integrations=Op(this,t),Ou(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",o=!1,i=n.exception?.values;if(i){o=!0,r=!1;for(let c of i)if(c.mechanism?.handled===!1){r=!0;break}}let s=t.status==="ok";(s&&t.errors===0||s&&r)&&(Tn(t,{...r&&{status:"crashed"},errors:t.errors||Number(o||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,o){let i=this.getOptions(),s=Object.keys(this._integrations);return!n.integrations&&s?.length&&(n.integrations=s),this.emit("preprocessEvent",t,n),t.type||o.setLastEventId(t.event_id||n.event_id),li(i,t,n,r,this,o).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,n),a.contexts={trace:Jo(r),...a.contexts};let c=mr(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,n={},r=O(),o=ce()){return y&&Fu(t)&&h.log(`Captured error event \`${Ys(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,o).then(i=>i.event_id,i=>{y&&(Yp(i)?h.log(i.message):qp(i)?h.warn(i.message):h.warn(i))})}_processEvent(t,n,r,o){let i=this.getOptions(),{sampleRate:s}=i,a=Zp(t),c=Fu(t),d=`before send for type \`${t.type||"error"}\``,l=typeof s>"u"?void 0:kt(s);if(c&&typeof l=="number"&&Math.random()>l)return this.recordDroppedEvent("sample_rate","error"),_r(Bu(`Discarding event because it's not included in the random sample (sampling rate = ${s})`));let f=Kp(t.type);return this._prepareEvent(t,n,r,o).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),Bu("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;let _=oy(this,i,p,n);return ry(_,d)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",f),a){let S=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",S)}throw Bu(`${d} returned \`null\`, will not send event.`)}let m=r.getSession()||o.getSession();if(c&&m&&this._updateSessionFromEvent(m,p),a){let g=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,S=p.spans?p.spans.length:0,b=g-S;b>0&&this.recordDroppedEvent("before_send","span",b)}let _=p.transaction_info;if(a&&_&&p.transaction!==t.transaction){let g="custom";p.transaction_info={..._,source:g}}return this.sendEvent(p,n),p}).then(null,p=>{throw Yp(p)||qp(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Vs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t,n){this._numProcessing++,this._promiseBuffer.add(t).then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r===eo&&this.recordDroppedEvent("queue_overflow",n),r))}_clearOutcomes(){let t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{let[o,i]=n.split(":");return{reason:o,category:i,quantity:r}})}_flushOutcomes(){y&&h.log("Flushing outcomes...");let t=this._clearOutcomes();if(t.length===0){y&&h.log("No outcomes to send");return}if(!this._dsn){y&&h.log("No dsn provided, will not send outcomes");return}y&&h.log("Sending outcomes:",t);let n=Gp(t,this._options.tunnel&&Fe(this._dsn));this.sendEnvelope(n)}};function Kp(e){return e==="replay_event"?"replay":e||"error"}function ry(e,t){let n=`${t} must return \`null\` or a valid event.`;if($t(e))return e.then(r=>{if(!We(r)&&r!==null)throw Vs(n);return r},r=>{throw Vs(`${t} rejected with ${r}`)});if(!We(e)&&e!==null)throw Vs(n);return e}function oy(e,t,n,r){let{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:s,ignoreSpans:a}=t,c=n;if(Fu(c)&&o)return o(c,r);if(Zp(c)){if(s||a){let u=$p(c);if(a?.length&&pr(u,a))return null;if(s){let d=s(u);d?c=Bn(n,Wp(d)):ri()}if(c.spans){let d=[],l=c.spans;for(let p of l){if(a?.length&&pr(p,a)){lp(l,p);continue}if(s){let m=s(p);m?d.push(m):(ri(),d.push(p))}else d.push(p)}let f=c.spans.length-d.length;f&&e.recordDroppedEvent("before_send","span",f),c.spans=d}}if(i){if(c.spans){let u=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:u}}return i(c,r)}}return c}function Fu(e){return e.type===void 0}function Zp(e){return e.type==="transaction"}function iy(e){let t=0;return e.name&&(t+=e.name.length*2),t+=8,t+em(e.attributes)}function sy(e){let t=0;return e.message&&(t+=e.message.length*2),t+em(e.attributes)}function em(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*Jp(n[0]):it(n)?t+=Jp(n):t+=100}),t}function Jp(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function Hu(e,t){t.debug===!0&&(y?h.enable():Ve(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),O().update(t.initialScope);let r=new e(t);return Ks(r),r.init(),r}function Ks(e){O().setClient(e)}var Gu=100,$u=5e3,ay=36e5;function Wu(e){function t(...n){y&&h.log("[Offline]:",...n)}return n=>{let r=e(n);if(!n.createStore)throw new Error("No `createStore` function was provided");let o=n.createStore(n),i=$u,s;function a(l,f,p){return Ds(l,["client_report"])?!1:n.shouldStore?n.shouldStore(l,f,p):!0}function c(l){s&&clearTimeout(s),s=setTimeout(async()=>{s=void 0;let f=await o.shift();f&&(t("Attempting to send previously queued event"),f[0].sent_at=new Date().toISOString(),d(f,!0).catch(p=>{t("Failed to retry sending",p)}))},l),typeof s!="number"&&s.unref&&s.unref()}function u(){s||(c(i),i=Math.min(i*2,ay))}async function d(l,f=!1){if(!f&&Ds(l,["replay_event","replay_recording"]))return await o.push(l),c(Gu),{};try{if(n.shouldSend&&await n.shouldSend(l)===!1)throw new Error("Envelope not sent because `shouldSend` callback returned false");let p=await r.send(l),m=Gu;if(p){if(p.headers?.["retry-after"])m=qs(p.headers["retry-after"]);else if(p.headers?.["x-sentry-rate-limits"])m=6e4;else if((p.statusCode||0)>=400)return p}return c(m),i=$u,p}catch(p){if(await a(l,p,i))return f?await o.unshift(l):await o.push(l),u(),t("Error sending. Event queued.",p),{};throw p}}return n.flushAtStartup&&u(),{send:d,flush:l=>(l===void 0&&(i=$u,c(Gu)),r.flush(l))}}}var to="MULTIPLEXED_TRANSPORT_EXTRA_KEY";function tm(e,t){let n;return Ot(e,(r,o)=>(t.includes(o)&&(n=Array.isArray(r)?r[1]:void 0),!!n)),n}function cy(e,t){return n=>{let r=e(n);return{...r,send:async o=>{let i=tm(o,["event","transaction","profile","replay_event"]);return i&&(i.release=t),r.send(o)}}}}function uy(e,t){return xe(t?{...e[0],dsn:t}:e[0],e[1])}function ju(e,t){return n=>{let r=e(n),o=new Map,i=t||(u=>{let d=u.getEvent();return d?.extra?.[to]&&Array.isArray(d.extra[to])?d.extra[to]:[]});function s(u,d){let l=d?`${u}:${d}`:u,f=o.get(l);if(!f){let p=Rs(u);if(!p)return;let m=gi(p,n.tunnel);f=d?cy(e,d)({...n,url:m}):e({...n,url:m}),o.set(l,f)}return[u,f]}async function a(u){function d(m){let _=m?.length?m:["event"];return tm(u,_)}let l=i({envelope:u,getEvent:d}).map(m=>typeof m=="string"?s(m,void 0):s(m.dsn,m.release)).filter(m=>!!m),f=l.length?l:[["",r]];return(await Promise.all(f.map(([m,_])=>_.send(uy(u,m)))))[0]}async function c(u){let d=[...o.values(),r];return(await Promise.all(d.map(f=>f.flush(u)))).every(f=>f)}return{send:a,flush:c}}}var ly="thismessage:/";function no(e){return"isRelative"in e}function Er(e,t){let n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=t??(n?ly:void 0);try{if("canParse"in URL&&!URL.canParse(e,r))return;let o=new URL(e,r);return n?{isRelative:n,pathname:o.pathname,search:o.search,hash:o.hash}:o}catch{}}function zu(e){if(no(e))return e.pathname;let t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function Zt(e){if(!e)return{};let t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};let n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function bi(e){return e.split(/[?#]/,1)[0]}function Ii(e,t){let n=t?.getDsn(),r=t?.getOptions().tunnel;return fy(e,n)||dy(e,r)}function dy(e,t){return t?nm(e)===nm(t):!1}function fy(e,t){let n=Er(e);return!n||no(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function nm(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Js(e,...t){let n=new String(String.raw(e,...t));return n.__sentry_template_string__=e.join("\0").replace(/%/g,"%%").replace(/\0/g,"%s"),n.__sentry_template_values__=t,n}var qu=Js;function Yu(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Vu(e,t,n=[t],r="npm"){let o=e._metadata||{};o.sdk||(o.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:_t})),version:_t}),e._metadata=o}function Tr(e={}){let t=e.client||T();if(!mi()||!t)return{};let n=ot(),r=Wt(n);if(r.getTraceData)return r.getTraceData(e);let o=e.scope||O(),i=e.span||J(),s=i?ni(i):py(o),a=i?ke(i):mr(t,o),c=As(a);if(!Ns.test(s))return h.warn("Invalid sentry-trace data. Cannot generate trace data"),{};let d={"sentry-trace":s,baggage:c};if(e.propagateTraceparent){let l=i?sp(i):my(o);l&&(d.traceparent=l)}return d}function py(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return ei(t,r,n)}function my(e){let{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return Cs(t,r,n)}function Ku(e,t,n){let r,o,i,s=n?.maxWait?Math.max(n.maxWait,t):0,a=n?.setTimeoutImpl||setTimeout;function c(){return u(),r=e(),r}function u(){o!==void 0&&clearTimeout(o),i!==void 0&&clearTimeout(i),o=i=void 0}function d(){return o!==void 0||i!==void 0?c():r}function l(){return o&&clearTimeout(o),o=a(c,t),s&&i===void 0&&(i=a(c,s)),r}return l.cancel=u,l.flush=d,l}var hy=100;function lt(e,t){let n=T(),r=ce();if(!n)return;let{beforeBreadcrumb:o=null,maxBreadcrumbs:i=hy}=n.getOptions();if(i<=0)return;let a={timestamp:wt(),...e},c=o?Ve(()=>o(a,t)):a;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}var rm,_y="FunctionToString",om=new WeakMap,gy=(()=>({name:_y,setupOnce(){rm=Function.prototype.toString;try{Function.prototype.toString=function(...e){let t=ur(this),n=om.has(T())&&t!==void 0?t:this;return rm.apply(n,e)}}catch{}},setup(e){om.set(e,!0)}})),Ai=gy;var Sy=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Ey="EventFilters",Qs=(e={})=>{let t;return{name:Ey,setup(n){let r=n.getOptions();t=im(e,r)},processEvent(n,r,o){if(!t){let i=o.getOptions();t=im(e,i)}return Ty(n,t)?null:n}}},Ri=((e={})=>({...Qs(e),name:"InboundFilters"}));function im(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Sy],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Ty(e,t){if(e.type){if(e.type==="transaction"&&by(e,t.ignoreTransactions))return y&&h.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${ln(e)}`),!0}else{if(yy(e,t.ignoreErrors))return y&&h.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${ln(e)}`),!0;if(vy(e))return y&&h.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${ln(e)}`),!0;if(Iy(e,t.denyUrls))return y&&h.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${ln(e)}.
Url: ${Xs(e)}`),!0;if(!Ay(e,t.allowUrls))return y&&h.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${ln(e)}.
Url: ${Xs(e)}`),!0}return!1}function yy(e,t){return t?.length?Ys(e).some(n=>je(n,t)):!1}function by(e,t){if(!t?.length)return!1;let n=e.transaction;return n?je(n,t):!1}function Iy(e,t){if(!t?.length)return!1;let n=Xs(e);return n?je(n,t):!1}function Ay(e,t){if(!t?.length)return!0;let n=Xs(e);return n?je(n,t):!0}function Ry(e=[]){for(let t=e.length-1;t>=0;t--){let n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function Xs(e){try{let n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?Ry(n):null}catch{return y&&h.error(`Cannot extract url for event ${ln(e)}`),null}}function vy(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function Xu(e,t,n,r,o,i){if(!o.exception?.values||!i||!Ct(i.originalException,Error))return;let s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=Ju(e,t,r,i.originalException,n,o.exception.values,s,0))}function Ju(e,t,n,r,o,i,s,a){if(i.length>=n+1)return i;let c=[...i];if(Ct(r[o],Error)){sm(s,a);let u=e(t,r[o]),d=c.length;am(u,o,d,a),c=Ju(e,t,n,r[o],o,[u,...c],u,d)}return Array.isArray(r.errors)&&r.errors.forEach((u,d)=>{if(Ct(u,Error)){sm(s,a);let l=e(t,u),f=c.length;am(l,`errors[${d}]`,f,a),c=Ju(e,t,n,u,o,[l,...c],l,f)}}),c}function sm(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function am(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}var um=new Map,cm=new Set;function Ny(e){if(v._sentryModuleMetadata)for(let t of Object.keys(v._sentryModuleMetadata)){let n=v._sentryModuleMetadata[t];if(cm.has(t))continue;cm.add(t);let r=e(t);for(let o of r.reverse())if(o.filename){um.set(o.filename,n);break}}}function Cy(e,t){return Ny(e),um.get(t)}function Zs(e,t){t.exception?.values?.forEach(n=>{n.stacktrace?.frames?.forEach(r=>{if(!r.filename||r.module_metadata)return;let o=Cy(e,r.filename);o&&(r.module_metadata=o)})})}function ea(e){e.exception?.values?.forEach(t=>{t.stacktrace?.frames?.forEach(n=>{delete n.module_metadata})})}var Qu=()=>({name:"ModuleMetadata",setup(e){e.on("beforeEnvelope",t=>{Ot(t,(n,r)=>{if(r==="event"){let o=Array.isArray(n)?n[1]:void 0;o&&(ea(o),n[1]=o)}})}),e.on("applyFrameMetadata",t=>{if(t.type)return;let n=e.getOptions().stackParser;Zs(n,t)})}});function yr(e){let t="console";Ke(t,e),Je(t,wy)}function wy(){"console"in v&&ar.forEach(function(e){e in v.console&&ge(v.console,e,function(t){return Br[e]=t,function(...n){Oe("console",{args:n,level:e}),Br[e]?.apply(v.console,n)}})})}function Yn(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}var ky="CaptureConsole",xy=((e={})=>{let t=e.levels||ar,n=e.handled??!0;return{name:ky,setup(r){"console"in v&&yr(({args:o,level:i})=>{T()!==r||!t.includes(i)||Oy(o,i,n)})}}}),Zu=xy;function Oy(e,t,n){let r=Yn(t),o=new Error,i={level:Yn(t),extra:{arguments:e}};Pe(s=>{if(s.addEventProcessor(u=>(u.logger="console",Xe(u,{handled:n,type:"auto.core.capture_console"}),u)),t==="assert"){if(!e[0]){let u=`Assertion failed: ${lr(e.slice(1)," ")||"console.assert"}`;s.setExtra("arguments",e.slice(1)),s.captureMessage(u,r,{captureContext:i,syntheticException:o})}return}let a=e.find(u=>u instanceof Error);if(a){X(a,i);return}let c=lr(e," ");s.captureMessage(c,r,{captureContext:i,syntheticException:o})})}var My="Dedupe",Ly=(()=>{let e;return{name:My,processEvent(t){if(t.type)return t;try{if(Py(t,e))return y&&h.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),vi=Ly;function Py(e,t){return t?!!(Uy(e,t)||Dy(e,t)):!1}function Uy(e,t){let n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!fm(e,t)||!dm(e,t))}function Dy(e,t){let n=lm(t),r=lm(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!fm(e,t)||!dm(e,t))}function dm(e,t){let n=Fr(e),r=Fr(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let o=0;o<r.length;o++){let i=r[o],s=n[o];if(i.filename!==s.filename||i.lineno!==s.lineno||i.colno!==s.colno||i.function!==s.function)return!1}return!0}function fm(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function lm(e){return e.exception?.values?.[0]}var By="ExtraErrorData",Fy=((e={})=>{let{depth:t=3,captureErrorCause:n=!0}=e;return{name:By,processEvent(r,o,i){let{maxValueLength:s}=i.getOptions();return Hy(r,o,t,n,s)}}}),el=Fy;function Hy(e,t={},n,r,o){if(!t.originalException||!St(t.originalException))return e;let i=t.originalException.name||t.originalException.constructor.name,s=pm(t.originalException,r,o);if(s){let a={...e.contexts},c=Ue(s,n);return We(c)&&(ye(c,"__sentry_skip_normalization__",!0),a[i]=c),{...e,contexts:a}}return e}function pm(e,t,n){try{let r=["name","message","stack","line","column","fileName","lineNumber","columnNumber","toJSON"],o={};for(let i of Object.keys(e)){if(r.indexOf(i)!==-1)continue;let s=e[i];o[i]=St(s)||typeof s=="string"?n?un(`${s}`,n):`${s}`:s}if(t&&e.cause!==void 0)if(St(e.cause)){let i=e.cause.name||e.cause.constructor.name;o.cause={[i]:pm(e.cause,!1,n)}}else o.cause=e.cause;if(typeof e.toJSON=="function"){let i=e.toJSON();for(let s of Object.keys(i)){let a=i[s];o[s]=St(a)?a.toString():a}}return o}catch(r){y&&h.error("Unable to extract extra data from the Error object:",r)}return null}function Gy(e,t){let n=0;for(let r=e.length-1;r>=0;r--){let o=e[r];o==="."?e.splice(r,1):o===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var $y=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function Wy(e){let t=e.length>1024?`<truncated>${e.slice(-1024)}`:e,n=$y.exec(t);return n?n.slice(1):[]}function mm(...e){let t="",n=!1;for(let r=e.length-1;r>=-1&&!n;r--){let o=r>=0?e[r]:"/";o&&(t=`${o}/${t}`,n=o.charAt(0)==="/")}return t=Gy(t.split("/").filter(r=>!!r),!n).join("/"),(n?"/":"")+t||"."}function hm(e){let t=0;for(;t<e.length&&e[t]==="";t++);let n=e.length-1;for(;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}function _m(e,t){e=mm(e).slice(1),t=mm(t).slice(1);let n=hm(e.split("/")),r=hm(t.split("/")),o=Math.min(n.length,r.length),i=o;for(let a=0;a<o;a++)if(n[a]!==r[a]){i=a;break}let s=[];for(let a=i;a<n.length;a++)s.push("..");return s=s.concat(r.slice(i)),s.join("/")}function gm(e,t){let n=Wy(e)[2]||"";return t&&n.slice(t.length*-1)===t&&(n=n.slice(0,n.length-t.length)),n}var jy="RewriteFrames",tl=(e={})=>{let t=e.root,n=e.prefix||"app:///",r="window"in v&&!!v.window,o=e.iteratee||zy({isBrowser:r,root:t,prefix:n});function i(a){try{return{...a,exception:{...a.exception,values:a.exception.values.map(c=>({...c,...c.stacktrace&&{stacktrace:s(c.stacktrace)}}))}}}catch{return a}}function s(a){return{...a,frames:a?.frames?.map(c=>o(c))}}return{name:jy,processEvent(a){let c=a;return a.exception&&Array.isArray(a.exception.values)&&(c=i(c)),c}}};function zy({isBrowser:e,root:t,prefix:n}){return r=>{if(!r.filename)return r;let o=/^[a-zA-Z]:\\/.test(r.filename)||r.filename.includes("\\")&&!r.filename.includes("/"),i=/^\//.test(r.filename);if(e){if(t){let s=r.filename;s.indexOf(t)===0&&(r.filename=s.replace(t,n))}}else if(o||i){let s=o?r.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):r.filename,a=t?_m(t,s):gm(s);r.filename=`${n}${a}`}return r}}var qy=["reauthenticate","signInAnonymously","signInWithOAuth","signInWithIdToken","signInWithOtp","signInWithPassword","signInWithSSO","signOut","signUp","verifyOtp"],Yy=["createUser","deleteUser","listUsers","getUserById","updateUserById","inviteUserByEmail"],Vy={eq:"eq",neq:"neq",gt:"gt",gte:"gte",lt:"lt",lte:"lte",like:"like","like(all)":"likeAllOf","like(any)":"likeAnyOf",ilike:"ilike","ilike(all)":"ilikeAllOf","ilike(any)":"ilikeAnyOf",is:"is",in:"in",cs:"contains",cd:"containedBy",sr:"rangeGt",nxl:"rangeGte",sl:"rangeLt",nxr:"rangeLte",adj:"rangeAdjacent",ov:"overlaps",fts:"",plfts:"plain",phfts:"phrase",wfts:"websearch",not:"not"},Em=["select","insert","upsert","update","delete"];function ta(e){try{e.__SENTRY_INSTRUMENTED__=!0}catch{}}function na(e){try{return e.__SENTRY_INSTRUMENTED__}catch{return!1}}function Ky(e,t={}){switch(e){case"GET":return"select";case"POST":return t.Prefer?.includes("resolution=")?"upsert":"insert";case"PATCH":return"update";case"DELETE":return"delete";default:return"<unknown-op>"}}function Jy(e,t){if(t===""||t==="*")return"select(*)";if(e==="select")return`select(${t})`;if(e==="or"||e.endsWith(".or"))return`${e}${t}`;let[n,...r]=t.split("."),o;return n?.startsWith("fts")?o="textSearch":n?.startsWith("plfts")?o="textSearch[plain]":n?.startsWith("phfts")?o="textSearch[phrase]":n?.startsWith("wfts")?o="textSearch[websearch]":o=n&&Vy[n]||"filter",`${o}(${e}, ${r.join(".")})`}function Sm(e,t=!1){return new Proxy(e,{apply(n,r,o){return qe({name:`auth ${t?"(admin) ":""}${e.name}`,attributes:{[H]:"auto.db.supabase",[ie]:"db","db.system":"postgresql","db.operation":`auth.${t?"admin.":""}${e.name}`}},i=>Reflect.apply(n,r,o).then(s=>(s&&typeof s=="object"&&"error"in s&&s.error?(i.setStatus({code:2}),X(s.error,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}})):i.setStatus({code:1}),i.end(),s)).catch(s=>{throw i.setStatus({code:2}),i.end(),X(s,{mechanism:{handled:!1,type:"auto.db.supabase.auth"}}),s}).then(...o))}})}function Xy(e){let t=e.auth;if(!(!t||na(e.auth))){for(let n of qy){let r=t[n];r&&typeof e.auth[n]=="function"&&(e.auth[n]=Sm(r))}for(let n of Yy){let r=t.admin[n];r&&typeof e.auth.admin[n]=="function"&&(e.auth.admin[n]=Sm(r,!0))}ta(e.auth)}}function Qy(e){na(e.prototype.from)||(e.prototype.from=new Proxy(e.prototype.from,{apply(t,n,r){let o=Reflect.apply(t,n,r),i=o.constructor;return eb(i),o}}),ta(e.prototype.from))}function Zy(e){na(e.prototype.then)||(e.prototype.then=new Proxy(e.prototype.then,{apply(t,n,r){let o=Em,i=n,s=Ky(i.method,i.headers);if(!o.includes(s)||!i?.url?.pathname||typeof i.url.pathname!="string")return Reflect.apply(t,n,r);let a=i.url.pathname.split("/"),c=a.length>0?a[a.length-1]:"",u=[];for(let[p,m]of i.url.searchParams.entries())u.push(Jy(p,m));let d=Object.create(null);if(We(i.body))for(let[p,m]of Object.entries(i.body))d[p]=m;let l=`${s==="select"?"":`${s}${d?"(...) ":""}`}${u.join(" ")} from(${c})`,f={"db.table":c,"db.schema":i.schema,"db.url":i.url.origin,"db.sdk":i.headers["X-Client-Info"],"db.system":"postgresql","db.operation":s,[H]:"auto.db.supabase",[ie]:"db"};return u.length&&(f["db.query"]=u),Object.keys(d).length&&(f["db.body"]=d),qe({name:l,attributes:f},p=>Reflect.apply(t,n,[]).then(m=>{if(p&&(m&&typeof m=="object"&&"status"in m&&pn(p,m.status||500),p.end()),m.error){let S=new Error(m.error.message);m.error.code&&(S.code=m.error.code),m.error.details&&(S.details=m.error.details);let b={};u.length&&(b.query=u),Object.keys(d).length&&(b.body=d),X(S,D=>(D.addEventProcessor(M=>(Xe(M,{handled:!1,type:"auto.db.supabase.postgres"}),M)),D.setContext("supabase",b),D))}let _={type:"supabase",category:`db.${s}`,message:l},g={};return u.length&&(g.query=u),Object.keys(d).length&&(g.body=d),Object.keys(g).length&&(_.data=g),lt(_),m},m=>{throw p&&(pn(p,500),p.end()),m}).then(...r))}}),ta(e.prototype.then))}function eb(e){for(let t of Em)na(e.prototype[t])||(e.prototype[t]=new Proxy(e.prototype[t],{apply(n,r,o){let i=Reflect.apply(n,r,o),s=i.constructor;return y&&h.log(`Instrumenting ${t} operation's PostgRESTFilterBuilder`),Zy(s),i}}),ta(e.prototype[t]))}var ra=e=>{if(!e){y&&h.warn("Supabase integration was not installed because no Supabase client was provided.");return}let t=e.constructor===Function?e:e.constructor;Qy(t),Xy(e)},tb="Supabase",nb=(e=>({setupOnce(){ra(e)},name:tb})),nl=e=>nb(e.supabaseClient);var rb=10,ob="ZodErrors";function ib(e){return St(e)&&e.name==="ZodError"&&Array.isArray(e.issues)}function sb(e){return{...e,path:"path"in e&&Array.isArray(e.path)?e.path.join("."):void 0,keys:"keys"in e?JSON.stringify(e.keys):void 0,unionErrors:"unionErrors"in e?JSON.stringify(e.unionErrors):void 0}}function ab(e){return e.map(t=>typeof t=="number"?"<array>":t).join(".")}function cb(e){let t=new Set;for(let r of e.issues){let o=ab(r.path);o.length>0&&t.add(o)}let n=Array.from(t);if(n.length===0){let r="variable";if(e.issues.length>0){let o=e.issues[0];o!==void 0&&"expected"in o&&typeof o.expected=="string"&&(r=o.expected)}return`Failed to validate ${r}`}return`Failed to validate keys: ${un(n.join(", "),100)}`}function ub(e,t=!1,n,r){if(!n.exception?.values||!r.originalException||!ib(r.originalException)||r.originalException.issues.length===0)return n;try{let i=(t?r.originalException.issues:r.originalException.issues.slice(0,e)).map(sb);return t&&(Array.isArray(r.attachments)||(r.attachments=[]),r.attachments.push({filename:"zod_issues.json",data:JSON.stringify({issues:i})})),{...n,exception:{...n.exception,values:[{...n.exception.values[0],value:cb(r.originalException)},...n.exception.values.slice(1)]},extra:{...n.extra,"zoderror.issues":i.slice(0,e)}}}catch(o){return{...n,extra:{...n.extra,"zoderrors sentry integration parse error":{message:"an exception was thrown while processing ZodError within applyZodErrorsToEvent()",error:o instanceof Error?`${o.name}: ${o.message}
${o.stack}`:"unknown"}}}}}var lb=((e={})=>{let t=e.limit??rb;return{name:ob,processEvent(n,r){return ub(t,e.saveZodIssuesAsAttachment,n,r)}}}),rl=lb;var ol=e=>({name:"ThirdPartyErrorsFilter",setup(t){t.on("beforeEnvelope",n=>{Ot(n,(r,o)=>{if(o==="event"){let i=Array.isArray(r)?r[1]:void 0;i&&(ea(i),r[1]=i)}})}),t.on("applyFrameMetadata",n=>{if(n.type)return;let r=t.getOptions().stackParser;Zs(r,n)})},processEvent(t){let n=db(t);if(n){let r=e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="apply-tag-if-contains-third-party-frames"?"some":"every";if(n[r](i=>!i.some(s=>e.filterKeys.includes(s)))){if(e.behaviour==="drop-error-if-contains-third-party-frames"||e.behaviour==="drop-error-if-exclusively-contains-third-party-frames")return null;t.tags={...t.tags,third_party_code:!0}}}return t}});function db(e){let t=Fr(e);if(t)return t.filter(n=>!!n.filename&&(n.lineno??n.colno)!=null).map(n=>n.module_metadata?Object.keys(n.module_metadata).filter(r=>r.startsWith(Tm)).map(r=>r.slice(Tm.length)):[])}var Tm="_sentryBundlerPluginAppKey:";var ym=100,bm=10,oa="flag.evaluation.";function Mt(e){let n=O().getScopeData().contexts.flags,r=n?n.values:[];return r.length&&(e.contexts===void 0&&(e.contexts={}),e.contexts.flags={values:[...r]}),e}function Tt(e,t,n=ym){let r=O().getScopeData().contexts;r.flags||(r.flags={values:[]});let o=r.flags.values;fb(o,e,t,n)}function fb(e,t,n,r){if(typeof n!="boolean")return;if(e.length>r){y&&h.error(`[Feature Flags] insertToFlagBuffer called on a buffer larger than maxSize=${r}`);return}let o=e.findIndex(i=>i.flag===t);o!==-1&&e.splice(o,1),e.length===r&&e.shift(),e.push({flag:t,result:n})}function yt(e,t,n=bm){if(typeof t!="boolean")return;let r=J();if(!r)return;let o=L(r).data;if(`${oa}${e}`in o){r.setAttribute(`${oa}${e}`,t);return}Object.keys(o).filter(s=>s.startsWith(oa)).length<n&&r.setAttribute(`${oa}${e}`,t)}var il=()=>({name:"FeatureFlags",processEvent(e,t,n){return Mt(e)},addFeatureFlag(e,t){Tt(e,t),yt(e,t)}});var sl=({growthbookClass:e})=>({name:"GrowthBook",setupOnce(){let t=e.prototype;typeof t.isOn=="function"&&ge(t,"isOn",Im),typeof t.getFeatureValue=="function"&&ge(t,"getFeatureValue",Im)},processEvent(t,n,r){return Mt(t)}});function Im(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"&&(Tt(n,r),yt(n,r)),r}}function al(e,t,n,r,o){if(!e.fetchData)return;let{method:i,url:s}=e.fetchData,a=we()&&t(s);if(e.endTimestamp&&a){let p=e.fetchData.__span;if(!p)return;let m=r[p];m&&(hb(m,e),pb(m,e,o),delete r[p]);return}let{spanOrigin:c="auto.http.browser",propagateTraceparent:u=!1}=typeof o=="object"?o:{spanOrigin:o},d=!!J(),l=a&&d?Et(gb(s,i,c)):new et;if(e.fetchData.__span=l.spanContext().spanId,r[l.spanContext().spanId]=l,n(e.fetchData.url)){let p=e.args[0],m=e.args[1]||{},_=mb(p,m,we()&&d?l:void 0,u);_&&(e.args[1]=m,m.headers=_)}let f=T();if(f){let p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};f.emit("beforeOutgoingRequestSpan",l,p)}return l}function pb(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function mb(e,t,n,r){let o=Tr({span:n,propagateTraceparent:r}),i=o["sentry-trace"],s=o.baggage,a=o.traceparent;if(!i)return;let c=t.headers||(gs(e)?e.headers:void 0);if(c)if(_b(c)){let u=new Headers(c);if(u.get("sentry-trace")||u.set("sentry-trace",i),r&&a&&!u.get("traceparent")&&u.set("traceparent",a),s){let d=u.get("baggage");d?ia(d)||u.set("baggage",`${d},${s}`):u.set("baggage",s)}return u}else if(Array.isArray(c)){let u=[...c];c.find(l=>l[0]==="sentry-trace")||u.push(["sentry-trace",i]),r&&a&&!c.find(l=>l[0]==="traceparent")&&u.push(["traceparent",a]);let d=c.find(l=>l[0]==="baggage"&&ia(l[1]));return s&&!d&&u.push(["baggage",s]),u}else{let u="sentry-trace"in c?c["sentry-trace"]:void 0,d="traceparent"in c?c.traceparent:void 0,l="baggage"in c?c.baggage:void 0,f=l?Array.isArray(l)?[...l]:[l]:[],p=l&&(Array.isArray(l)?l.find(_=>ia(_)):ia(l));s&&!p&&f.push(s);let m={...c,"sentry-trace":u??i,baggage:f.length>0?f.join(","):void 0};return r&&a&&!d&&(m.traceparent=a),m}else return{...o}}function hb(e,t){if(t.response){pn(e,t.response.status);let n=t.response?.headers?.get("content-length");if(n){let r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}function ia(e){return e.split(",").some(t=>t.trim().startsWith(Is))}function _b(e){return typeof Headers<"u"&&Ct(e,Headers)}function gb(e,t,n){let r=Er(e);return{name:r?`${t} ${zu(r)}`:t,attributes:Sb(e,r,t,n)}}function Sb(e,t,n,r){let o={url:e,type:"fetch","http.method":n,[H]:r,[ie]:"http.client"};return t&&(no(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function Ni(e,t={},n=O()){let{message:r,name:o,email:i,url:s,source:a,associatedEventId:c,tags:u}=e,d={contexts:{feedback:{contact_email:i,name:o,message:r,url:s,source:a,associated_event_id:c}},type:"feedback",level:"info",tags:u},l=n?.getClient()||T();return l&&l.emit("beforeSendFeedback",d,t),n.captureEvent(d,t)}var sa={};Dc(sa,{debug:()=>Tb,error:()=>Ib,fatal:()=>Ab,fmt:()=>qu,info:()=>yb,trace:()=>Eb,warn:()=>bb});function ro(e,t,n,r,o){qn({level:e,message:t,attributes:n,severityNumber:o},r)}function Eb(e,t,{scope:n}={}){ro("trace",e,t,n)}function Tb(e,t,{scope:n}={}){ro("debug",e,t,n)}function yb(e,t,{scope:n}={}){ro("info",e,t,n)}function bb(e,t,{scope:n}={}){ro("warn",e,t,n)}function Ib(e,t,{scope:n}={}){ro("error",e,t,n)}function Ab(e,t,{scope:n}={}){ro("fatal",e,t,n)}function Ci(e,t,n){return"util"in v&&typeof v.util.format=="function"?v.util.format(...e):Rb(e,t,n)}function Rb(e,t,n){return e.map(r=>it(r)?String(r):JSON.stringify(Ue(r,t,n))).join(" ")}function Am(e){return/%[sdifocO]/.test(e)}function Rm(e,t){let n={},r=new Array(t.length).fill("{}").join(" ");return n["sentry.message.template"]=`${e} ${r}`,t.forEach((o,i)=>{n[`sentry.message.parameter.${i}`]=o}),n}var vb="ConsoleLogs",vm={[H]:"auto.log.console"},Nb=((e={})=>{let t=e.levels||ar;return{name:vb,setup(n){let{enableLogs:r,normalizeDepth:o=3,normalizeMaxBreadth:i=1e3}=n.getOptions();if(!r){y&&h.warn("`enableLogs` is not enabled, ConsoleLogs integration disabled");return}yr(({args:s,level:a})=>{if(T()!==n||!t.includes(a))return;let c=s[0],u=s.slice(1);if(a==="assert"){if(!c){let p=u.length>0?`Assertion failed: ${Ci(u,o,i)}`:"Assertion failed";qn({level:"error",message:p,attributes:vm})}return}let d=a==="log",l=s.length>1&&typeof s[0]=="string"&&!Am(s[0]),f={...vm,...l?Rm(c,u):{}};qn({level:d?"info":a,message:Ci(s,o,i),severityNumber:d?10:void 0,attributes:f})})}}}),cl=Nb;var aa={};Dc(aa,{count:()=>Cb,distribution:()=>kb,gauge:()=>wb});function ul(e,t,n,r){Pu({type:e,name:t,value:n,unit:r?.unit,attributes:r?.attributes},{scope:r?.scope})}function Cb(e,t=1,n){ul("counter",e,t,n)}function wb(e,t,n){ul("gauge",e,t,n)}function kb(e,t,n){ul("distribution",e,t,n)}var xb=["trace","debug","info","warn","error","fatal"];function ll(e={}){let t=new Set(e.levels??xb),n=e.client;return{log(r){let{type:o,level:i,message:s,args:a,tag:c,date:u,...d}=r,l=n||T();if(!l)return;let f=Lb(o,i);if(!t.has(f))return;let{normalizeDepth:p=3,normalizeMaxBreadth:m=1e3}=l.getOptions(),_=[];s&&_.push(s),a&&a.length>0&&_.push(Ci(a,p,m));let g=_.join(" ");d["sentry.origin"]="auto.log.consola",c&&(d["consola.tag"]=c),o&&(d["consola.type"]=o),i!=null&&typeof i=="number"&&(d["consola.level"]=i),qn({level:f,message:g,attributes:d})}}}var Ob={silent:"trace",fatal:"fatal",error:"error",warn:"warn",log:"info",info:"info",success:"info",fail:"error",ready:"info",start:"info",box:"info",debug:"debug",trace:"trace",verbose:"debug",critical:"fatal",notice:"info"},Mb={0:"fatal",1:"warn",2:"info",3:"info",4:"debug",5:"trace"};function Lb(e,t){if(e==="verbose")return"debug";if(e==="silent")return"trace";if(e){let n=Ob[e];if(n)return n}if(typeof t=="number"){let n=Mb[t];if(n)return n}return"info"}var Nm="gen_ai.prompt",Vn="gen_ai.system",De="gen_ai.request.model",oo="gen_ai.request.stream",Kn="gen_ai.request.temperature",io="gen_ai.request.max_tokens",Jn="gen_ai.request.frequency_penalty",so="gen_ai.request.presence_penalty",Xn="gen_ai.request.top_p",ca="gen_ai.request.top_k",Cm="gen_ai.request.encoding_format",wm="gen_ai.request.dimensions",bt="gen_ai.response.finish_reasons",It="gen_ai.response.model",en="gen_ai.response.id",km="gen_ai.response.stop_reason",Lt="gen_ai.usage.input_tokens",Pt="gen_ai.usage.output_tokens",Ut="gen_ai.usage.total_tokens",At="gen_ai.operation.name",dt="gen_ai.request.messages",Me="gen_ai.response.text",Qn="gen_ai.request.available_tools",br="gen_ai.response.streaming",He="gen_ai.response.tool_calls",dl="gen_ai.agent.name",xm="gen_ai.pipeline.name",Om="gen_ai.usage.cache_creation_input_tokens",Mm="gen_ai.usage.cache_read_input_tokens";var Lm="gen_ai.invoke_agent",Pm="openai.response.id",fl="openai.response.model",Um="openai.response.timestamp",Dm="openai.usage.completion_tokens",Bm="openai.usage.prompt_tokens",ua={CHAT:"chat",RESPONSES:"responses",EMBEDDINGS:"embeddings"},pl="anthropic.response.timestamp";var la=e=>new TextEncoder().encode(e).length,da=e=>la(JSON.stringify(e));function ml(e,t){if(la(e)<=t)return e;let n=0,r=e.length,o="";for(;n<=r;){let i=Math.floor((n+r)/2),s=e.slice(0,i);la(s)<=t?(o=s,n=i+1):r=i-1}return o}function Pb(e){return typeof e=="string"?e:e.text}function Fm(e,t){return typeof e=="string"?t:{...e,text:t}}function Ub(e){return e!==null&&typeof e=="object"&&"content"in e&&typeof e.content=="string"}function Db(e){return e!==null&&typeof e=="object"&&"parts"in e&&Array.isArray(e.parts)&&e.parts.length>0}function Bb(e,t){let n={...e,content:""},r=da(n),o=t-r;if(o<=0)return[];let i=ml(e.content,o);return[{...e,content:i}]}function Fb(e,t){let{parts:n}=e,r=n.map(a=>Fm(a,"")),o=da({...e,parts:r}),i=t-o;if(i<=0)return[];let s=[];for(let a of n){let c=Pb(a),u=la(c);if(u<=i)s.push(a),i-=u;else if(s.length===0){let d=ml(c,i);d&&s.push(Fm(a,d));break}else break}return s.length>0?[{...e,parts:s}]:[]}function Hb(e,t){return!e||typeof e!="object"?[]:Ub(e)?Bb(e,t):Db(e)?Fb(e,t):[]}function Gb(e,t){if(!Array.isArray(e)||e.length===0||da(e)<=t)return e;let r=e.map(da),o=0,i=e.length;for(let s=e.length-1;s>=0;s--){let a=r[s];if(a&&o+a>t)break;a&&(o+=a),i=s}if(i===e.length){let s=e[e.length-1];return Hb(s,t)}return e.slice(i)}function ao(e){return Gb(e,2e4)}function Hm(e){return ml(e,2e4)}function Ir(e){return e.includes("messages")?"messages":e.includes("completions")?"completions":e.includes("models")?"models":e.includes("chat")?"chat":e.split(".").pop()||"unknown"}function co(e){return`gen_ai.${Ir(e)}`}function fa(e,t){return e?`${e}.${t}`:t}function wi(e,t,n,r,o){if(t!==void 0&&e.setAttributes({[Lt]:t}),n!==void 0&&e.setAttributes({[Pt]:n}),t!==void 0||n!==void 0||r!==void 0||o!==void 0){let i=(t??0)+(n??0)+(r??0)+(o??0);e.setAttributes({[Ut]:i})}}function hn(e){if(typeof e=="string")return Hm(e);if(Array.isArray(e)){let t=ao(e);return JSON.stringify(t)}return JSON.stringify(e)}var Gm=["responses.create","chat.completions.create","embeddings.create"],$b=["response.output_item.added","response.function_call_arguments.delta","response.function_call_arguments.done","response.output_item.done"],$m=["response.created","response.in_progress","response.failed","response.completed","response.incomplete","response.queued","response.output_text.delta",...$b];function pa(e){return e.includes("chat.completions")?ua.CHAT:e.includes("responses")?ua.RESPONSES:e.includes("embeddings")?ua.EMBEDDINGS:e.split(".").pop()||"unknown"}function hl(e){return`gen_ai.${pa(e)}`}function Wm(e){return Gm.includes(e)}function jm(e,t){return e?`${e}.${t}`:t}function zm(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion"}function qm(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="response"}function Ym(e){if(e===null||typeof e!="object"||!("object"in e))return!1;let t=e;return t.object==="list"&&typeof t.model=="string"&&t.model.toLowerCase().includes("embedding")}function Vm(e){return e!==null&&typeof e=="object"&&"type"in e&&typeof e.type=="string"&&e.type.startsWith("response.")}function Km(e){return e!==null&&typeof e=="object"&&"object"in e&&e.object==="chat.completion.chunk"}function Jm(e,t,n){if(ma(e,t.id,t.model,t.created),t.usage&&ki(e,t.usage.prompt_tokens,t.usage.completion_tokens,t.usage.total_tokens),Array.isArray(t.choices)){let r=t.choices.map(o=>o.finish_reason).filter(o=>o!==null);if(r.length>0&&e.setAttributes({[bt]:JSON.stringify(r)}),n){let o=t.choices.map(i=>i.message?.tool_calls).filter(i=>Array.isArray(i)&&i.length>0).flat();o.length>0&&e.setAttributes({[He]:JSON.stringify(o)})}}}function Xm(e,t,n){if(ma(e,t.id,t.model,t.created_at),t.status&&e.setAttributes({[bt]:JSON.stringify([t.status])}),t.usage&&ki(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.total_tokens),n){let r=t;if(Array.isArray(r.output)&&r.output.length>0){let o=r.output.filter(i=>typeof i=="object"&&i!==null&&i.type==="function_call");o.length>0&&e.setAttributes({[He]:JSON.stringify(o)})}}}function Qm(e,t){e.setAttributes({[fl]:t.model,[It]:t.model}),t.usage&&ki(e,t.usage.prompt_tokens,void 0,t.usage.total_tokens)}function ki(e,t,n,r){t!==void 0&&e.setAttributes({[Bm]:t,[Lt]:t}),n!==void 0&&e.setAttributes({[Dm]:n,[Pt]:n}),r!==void 0&&e.setAttributes({[Ut]:r})}function ma(e,t,n,r){e.setAttributes({[Pm]:t,[en]:t}),e.setAttributes({[fl]:n,[It]:n}),e.setAttributes({[Um]:new Date(r*1e3).toISOString()})}function Wb(e,t){for(let n of e){let r=n.index;if(!(r===void 0||!n.function))if(!(r in t.chatCompletionToolCalls))t.chatCompletionToolCalls[r]={...n,function:{name:n.function.name,arguments:n.function.arguments||""}};else{let o=t.chatCompletionToolCalls[r];n.function.arguments&&o?.function&&(o.function.arguments+=n.function.arguments)}}}function jb(e,t,n){t.responseId=e.id??t.responseId,t.responseModel=e.model??t.responseModel,t.responseTimestamp=e.created??t.responseTimestamp,e.usage&&(t.promptTokens=e.usage.prompt_tokens,t.completionTokens=e.usage.completion_tokens,t.totalTokens=e.usage.total_tokens);for(let r of e.choices??[])n&&(r.delta?.content&&t.responseTexts.push(r.delta.content),r.delta?.tool_calls&&Wb(r.delta.tool_calls,t)),r.finish_reason&&t.finishReasons.push(r.finish_reason)}function zb(e,t,n,r){if(!(e&&typeof e=="object")){t.eventTypes.push("unknown:non-object");return}if(e instanceof Error){r.setStatus({code:2,message:"internal_error"}),X(e,{mechanism:{handled:!1,type:"auto.ai.openai.stream-response"}});return}if(!("type"in e))return;let o=e;if(!$m.includes(o.type)){t.eventTypes.push(o.type);return}if(n&&(o.type==="response.output_item.done"&&"item"in o&&t.responsesApiToolCalls.push(o.item),o.type==="response.output_text.delta"&&"delta"in o&&o.delta)){t.responseTexts.push(o.delta);return}if("response"in o){let{response:i}=o;t.responseId=i.id??t.responseId,t.responseModel=i.model??t.responseModel,t.responseTimestamp=i.created_at??t.responseTimestamp,i.usage&&(t.promptTokens=i.usage.input_tokens,t.completionTokens=i.usage.output_tokens,t.totalTokens=i.usage.total_tokens),i.status&&t.finishReasons.push(i.status),n&&i.output_text&&t.responseTexts.push(i.output_text)}}async function*Zm(e,t,n){let r={eventTypes:[],responseTexts:[],finishReasons:[],responseId:"",responseModel:"",responseTimestamp:0,promptTokens:void 0,completionTokens:void 0,totalTokens:void 0,chatCompletionToolCalls:{},responsesApiToolCalls:[]};try{for await(let o of e)Km(o)?jb(o,r,n):Vm(o)&&zb(o,r,n,t),yield o}finally{ma(t,r.responseId,r.responseModel,r.responseTimestamp),ki(t,r.promptTokens,r.completionTokens,r.totalTokens),t.setAttributes({[br]:!0}),r.finishReasons.length&&t.setAttributes({[bt]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length&&t.setAttributes({[Me]:r.responseTexts.join("")});let i=[...Object.values(r.chatCompletionToolCalls),...r.responsesApiToolCalls];i.length>0&&t.setAttributes({[He]:JSON.stringify(i)}),t.end()}}function qb(e,t){let n={[Vn]:"openai",[At]:pa(t),[H]:"auto.ai.openai"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0],o=Array.isArray(r.tools)?r.tools:[],s=r.web_search_options&&typeof r.web_search_options=="object"?[{type:"web_search_options",...r.web_search_options}]:[],a=[...o,...s];a.length>0&&(n[Qn]=JSON.stringify(a))}if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];n[De]=r.model??"unknown","temperature"in r&&(n[Kn]=r.temperature),"top_p"in r&&(n[Xn]=r.top_p),"frequency_penalty"in r&&(n[Jn]=r.frequency_penalty),"presence_penalty"in r&&(n[so]=r.presence_penalty),"stream"in r&&(n[oo]=r.stream),"encoding_format"in r&&(n[Cm]=r.encoding_format),"dimensions"in r&&(n[wm]=r.dimensions)}else n[De]="unknown";return n}function Yb(e,t,n){if(!t||typeof t!="object")return;let r=t;if(zm(r)){if(Jm(e,r,n),n&&r.choices?.length){let o=r.choices.map(i=>i.message?.content||"");e.setAttributes({[Me]:JSON.stringify(o)})}}else qm(r)?(Xm(e,r,n),n&&r.output_text&&e.setAttributes({[Me]:r.output_text})):Ym(r)&&Qm(e,r)}function eh(e,t){if("messages"in t){let n=hn(t.messages);e.setAttributes({[dt]:n})}if("input"in t){let n=hn(t.input);e.setAttributes({[dt]:n})}}function Vb(e,t,n,r){return async function(...i){let s=qb(i,t),a=s[De]||"unknown",c=pa(t),u=i[0];return u&&typeof u=="object"&&u.stream===!0?ut({name:`${c} ${a} stream-response`,op:hl(t),attributes:s},async l=>{try{r.recordInputs&&u&&eh(l,u);let f=await e.apply(n,i);return Zm(f,l,r.recordOutputs??!1)}catch(f){throw l.setStatus({code:2,message:"internal_error"}),X(f,{mechanism:{handled:!1,type:"auto.ai.openai.stream",data:{function:t}}}),l.end(),f}}):qe({name:`${c} ${a}`,op:hl(t),attributes:s},async l=>{try{r.recordInputs&&u&&eh(l,u);let f=await e.apply(n,i);return Yb(l,f,r.recordOutputs),f}catch(f){throw X(f,{mechanism:{handled:!1,type:"auto.ai.openai",data:{function:t}}}),f}})}}function th(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=jm(t,String(o));return typeof i=="function"&&Wm(s)?Vb(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?th(i,s,n):i}})}function _l(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return th(e,"",r)}function Kb(e,t){return"type"in e&&typeof e.type=="string"&&e.type==="error"?(t.setStatus({code:2,message:e.error?.type??"internal_error"}),X(e.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}),!0):!1}function Jb(e,t){if(e.type==="message_delta"&&e.usage&&"output_tokens"in e.usage&&typeof e.usage.output_tokens=="number"&&(t.completionTokens=e.usage.output_tokens),e.message){let n=e.message;n.id&&(t.responseId=n.id),n.model&&(t.responseModel=n.model),n.stop_reason&&t.finishReasons.push(n.stop_reason),n.usage&&(typeof n.usage.input_tokens=="number"&&(t.promptTokens=n.usage.input_tokens),typeof n.usage.cache_creation_input_tokens=="number"&&(t.cacheCreationInputTokens=n.usage.cache_creation_input_tokens),typeof n.usage.cache_read_input_tokens=="number"&&(t.cacheReadInputTokens=n.usage.cache_read_input_tokens))}}function Xb(e,t){e.type!=="content_block_start"||typeof e.index!="number"||!e.content_block||(e.content_block.type==="tool_use"||e.content_block.type==="server_tool_use")&&(t.activeToolBlocks[e.index]={id:e.content_block.id,name:e.content_block.name,inputJsonParts:[]})}function Qb(e,t,n){if(!(e.type!=="content_block_delta"||!e.delta)){if(typeof e.index=="number"&&"partial_json"in e.delta&&typeof e.delta.partial_json=="string"){let r=t.activeToolBlocks[e.index];r&&r.inputJsonParts.push(e.delta.partial_json)}n&&typeof e.delta.text=="string"&&t.responseTexts.push(e.delta.text)}}function Zb(e,t){if(e.type!=="content_block_stop"||typeof e.index!="number")return;let n=t.activeToolBlocks[e.index];if(!n)return;let r=n.inputJsonParts.join(""),o;try{o=r?JSON.parse(r):{}}catch{o={__unparsed:r}}t.toolCalls.push({type:"tool_use",id:n.id,name:n.name,input:o}),delete t.activeToolBlocks[e.index]}function nh(e,t,n,r){!(e&&typeof e=="object")||Kb(e,r)||(Jb(e,t),Xb(e,t),Qb(e,t,n),Zb(e,t))}function eI(e,t,n){t.isRecording()&&(e.responseId&&t.setAttributes({[en]:e.responseId}),e.responseModel&&t.setAttributes({[It]:e.responseModel}),wi(t,e.promptTokens,e.completionTokens,e.cacheCreationInputTokens,e.cacheReadInputTokens),t.setAttributes({[br]:!0}),e.finishReasons.length>0&&t.setAttributes({[bt]:JSON.stringify(e.finishReasons)}),n&&e.responseTexts.length>0&&t.setAttributes({[Me]:e.responseTexts.join("")}),n&&e.toolCalls.length>0&&t.setAttributes({[He]:JSON.stringify(e.toolCalls)}),t.end())}async function*rh(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};try{for await(let o of e)nh(o,r,n,t),yield o}finally{r.responseId&&t.setAttributes({[en]:r.responseId}),r.responseModel&&t.setAttributes({[It]:r.responseModel}),wi(t,r.promptTokens,r.completionTokens,r.cacheCreationInputTokens,r.cacheReadInputTokens),t.setAttributes({[br]:!0}),r.finishReasons.length>0&&t.setAttributes({[bt]:JSON.stringify(r.finishReasons)}),n&&r.responseTexts.length>0&&t.setAttributes({[Me]:r.responseTexts.join("")}),n&&r.toolCalls.length>0&&t.setAttributes({[He]:JSON.stringify(r.toolCalls)}),t.end()}}function oh(e,t,n){let r={responseTexts:[],finishReasons:[],responseId:"",responseModel:"",promptTokens:void 0,completionTokens:void 0,cacheCreationInputTokens:void 0,cacheReadInputTokens:void 0,toolCalls:[],activeToolBlocks:{}};return e.on("streamEvent",o=>{nh(o,r,n,t)}),e.on("message",()=>{eI(r,t,n)}),e.on("error",o=>{X(o,{mechanism:{handled:!1,type:"auto.ai.anthropic.stream_error"}}),t.isRecording()&&(t.setStatus({code:2,message:"stream_error"}),t.end())}),e}var ih=["messages.create","messages.stream","messages.countTokens","models.get","completions.create","models.retrieve","beta.messages.create"];function sh(e){return ih.includes(e)}function ah(e,t){t.error&&(e.setStatus({code:2,message:t.error.type||"internal_error"}),X(t.error,{mechanism:{handled:!1,type:"auto.ai.anthropic.anthropic_error"}}))}function ch(e){let{system:t,messages:n}=e,r=typeof t=="string"?[{role:"system",content:e.system}]:[],o=Array.isArray(n)?n:n!=null?[n]:[];return[...r,...o]}function tI(e,t){let n={[Vn]:"anthropic",[At]:Ir(t),[H]:"auto.ai.anthropic"};if(e.length>0&&typeof e[0]=="object"&&e[0]!==null){let r=e[0];r.tools&&Array.isArray(r.tools)&&(n[Qn]=JSON.stringify(r.tools)),n[De]=r.model??"unknown","temperature"in r&&(n[Kn]=r.temperature),"top_p"in r&&(n[Xn]=r.top_p),"stream"in r&&(n[oo]=r.stream),"top_k"in r&&(n[ca]=r.top_k),"frequency_penalty"in r&&(n[Jn]=r.frequency_penalty),"max_tokens"in r&&(n[io]=r.max_tokens)}else t==="models.retrieve"||t==="models.get"?n[De]=e[0]:n[De]="unknown";return n}function gl(e,t){let n=ch(t);if(n.length){let r=hn(n);e.setAttributes({[dt]:r})}if("input"in t){let r=hn(t.input);e.setAttributes({[dt]:r})}"prompt"in t&&e.setAttributes({[Nm]:JSON.stringify(t.prompt)})}function nI(e,t){if("content"in t&&Array.isArray(t.content)){e.setAttributes({[Me]:t.content.map(r=>r.text).filter(r=>!!r).join("")});let n=[];for(let r of t.content)(r.type==="tool_use"||r.type==="server_tool_use")&&n.push(r);n.length>0&&e.setAttributes({[He]:JSON.stringify(n)})}"completion"in t&&e.setAttributes({[Me]:t.completion}),"input_tokens"in t&&e.setAttributes({[Me]:JSON.stringify(t.input_tokens)})}function rI(e,t){"id"in t&&"model"in t&&(e.setAttributes({[en]:t.id,[It]:t.model}),"created"in t&&typeof t.created=="number"&&e.setAttributes({[pl]:new Date(t.created*1e3).toISOString()}),"created_at"in t&&typeof t.created_at=="number"&&e.setAttributes({[pl]:new Date(t.created_at*1e3).toISOString()}),"usage"in t&&t.usage&&wi(e,t.usage.input_tokens,t.usage.output_tokens,t.usage.cache_creation_input_tokens,t.usage.cache_read_input_tokens))}function oI(e,t,n){if(!(!t||typeof t!="object")){if("type"in t&&t.type==="error"){ah(e,t);return}n&&nI(e,t),rI(e,t)}}function uh(e,t,n){throw X(e,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:n}}}),t.isRecording()&&(t.setStatus({code:2,message:"internal_error"}),t.end()),e}function iI(e,t,n,r,o,i,s,a,c,u,d){let l=o[De]??"unknown",f={name:`${i} ${l} stream-response`,op:co(s),attributes:o};return u&&!d?ut(f,async p=>{try{c.recordInputs&&a&&gl(p,a);let m=await e.apply(n,r);return rh(m,p,c.recordOutputs??!1)}catch(m){return uh(m,p,s)}}):ut(f,p=>{try{c.recordInputs&&a&&gl(p,a);let m=t.apply(n,r);return oh(m,p,c.recordOutputs??!1)}catch(m){return uh(m,p,s)}})}function sI(e,t,n,r){return new Proxy(e,{apply(o,i,s){let a=tI(s,t),c=a[De]??"unknown",u=Ir(t),d=typeof s[0]=="object"?s[0]:void 0,l=!!d?.stream,f=t==="messages.stream";return l||f?iI(e,o,n,s,a,u,t,d,r,l,f):qe({name:`${u} ${c}`,op:co(t),attributes:a},p=>(r.recordInputs&&d&&gl(p,d),hr(()=>o.apply(n,s),m=>{X(m,{mechanism:{handled:!1,type:"auto.ai.anthropic",data:{function:t}}})},()=>{},m=>oI(p,m,r.recordOutputs))))}})}function lh(e,t="",n){return new Proxy(e,{get(r,o){let i=r[o],s=fa(t,String(o));return typeof i=="function"&&sh(s)?sI(i,s,r,n):typeof i=="function"?i.bind(r):i&&typeof i=="object"?lh(i,s,n):i}})}function Sl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return lh(e,"",r)}var El=["models.generateContent","models.generateContentStream","chats.create","sendMessage","sendMessageStream"],dh="google_genai",Tl="chats.create",fh="chat";function aI(e,t){let n=e?.promptFeedback;if(n?.blockReason){let r=n.blockReasonMessage??n.blockReason;return t.setStatus({code:2,message:`Content blocked: ${r}`}),X(`Content blocked: ${r}`,{mechanism:{handled:!1,type:"auto.ai.google_genai"}}),!0}return!1}function cI(e,t){typeof e.responseId=="string"&&(t.responseId=e.responseId),typeof e.modelVersion=="string"&&(t.responseModel=e.modelVersion);let n=e.usageMetadata;n&&(typeof n.promptTokenCount=="number"&&(t.promptTokens=n.promptTokenCount),typeof n.candidatesTokenCount=="number"&&(t.completionTokens=n.candidatesTokenCount),typeof n.totalTokenCount=="number"&&(t.totalTokens=n.totalTokenCount))}function uI(e,t,n){Array.isArray(e.functionCalls)&&t.toolCalls.push(...e.functionCalls);for(let r of e.candidates??[]){r?.finishReason&&!t.finishReasons.includes(r.finishReason)&&t.finishReasons.push(r.finishReason);for(let o of r?.content?.parts??[])n&&o.text&&t.responseTexts.push(o.text),o.functionCall&&t.toolCalls.push({type:"function",id:o.functionCall.id,name:o.functionCall.name,arguments:o.functionCall.args})}}function lI(e,t,n,r){!e||aI(e,r)||(cI(e,t),uI(e,t,n))}async function*ph(e,t,n){let r={responseTexts:[],finishReasons:[],toolCalls:[]};try{for await(let o of e)lI(o,r,n,t),yield o}finally{let o={[br]:!0};r.responseId&&(o[en]=r.responseId),r.responseModel&&(o[It]=r.responseModel),r.promptTokens!==void 0&&(o[Lt]=r.promptTokens),r.completionTokens!==void 0&&(o[Pt]=r.completionTokens),r.totalTokens!==void 0&&(o[Ut]=r.totalTokens),r.finishReasons.length&&(o[bt]=JSON.stringify(r.finishReasons)),n&&r.responseTexts.length&&(o[Me]=r.responseTexts.join("")),n&&r.toolCalls.length&&(o[He]=JSON.stringify(r.toolCalls)),t.setAttributes(o),t.end()}}function mh(e){if(El.includes(e))return!0;let t=e.split(".").pop();return El.includes(t)}function hh(e){return e.includes("Stream")||e.endsWith("generateContentStream")||e.endsWith("sendMessageStream")}function _h(e,t){if("model"in e&&typeof e.model=="string")return e.model;if(t&&typeof t=="object"){let n=t;if("model"in n&&typeof n.model=="string")return n.model;if("modelVersion"in n&&typeof n.modelVersion=="string")return n.modelVersion}return"unknown"}function dI(e){let t={};return"temperature"in e&&typeof e.temperature=="number"&&(t[Kn]=e.temperature),"topP"in e&&typeof e.topP=="number"&&(t[Xn]=e.topP),"topK"in e&&typeof e.topK=="number"&&(t[ca]=e.topK),"maxOutputTokens"in e&&typeof e.maxOutputTokens=="number"&&(t[io]=e.maxOutputTokens),"frequencyPenalty"in e&&typeof e.frequencyPenalty=="number"&&(t[Jn]=e.frequencyPenalty),"presencePenalty"in e&&typeof e.presencePenalty=="number"&&(t[so]=e.presencePenalty),t}function fI(e,t,n){let r={[Vn]:dh,[At]:Ir(e),[H]:"auto.ai.google_genai"};if(t){if(r[De]=_h(t,n),"config"in t&&typeof t.config=="object"&&t.config){let o=t.config;if(Object.assign(r,dI(o)),"tools"in o&&Array.isArray(o.tools)){let i=o.tools.flatMap(s=>s.functionDeclarations);r[Qn]=JSON.stringify(i)}}}else r[De]=_h({},n);return r}function gh(e,t){if("contents"in t){let n=t.contents,r=hn(n);e.setAttributes({[dt]:r})}if("message"in t){let n=t.message,r=hn(n);e.setAttributes({[dt]:r})}if("history"in t){let n=t.history,r=hn(n);e.setAttributes({[dt]:r})}}function pI(e,t,n){if(!(!t||typeof t!="object")){if(t.usageMetadata&&typeof t.usageMetadata=="object"){let r=t.usageMetadata;typeof r.promptTokenCount=="number"&&e.setAttributes({[Lt]:r.promptTokenCount}),typeof r.candidatesTokenCount=="number"&&e.setAttributes({[Pt]:r.candidatesTokenCount}),typeof r.totalTokenCount=="number"&&e.setAttributes({[Ut]:r.totalTokenCount})}if(n&&Array.isArray(t.candidates)&&t.candidates.length>0){let r=t.candidates.map(o=>o.content?.parts&&Array.isArray(o.content.parts)?o.content.parts.map(i=>typeof i.text=="string"?i.text:"").filter(i=>i.length>0).join(""):"").filter(o=>o.length>0);r.length>0&&e.setAttributes({[Me]:r.join("")})}if(n&&t.functionCalls){let r=t.functionCalls;Array.isArray(r)&&r.length>0&&e.setAttributes({[He]:JSON.stringify(r)})}}}function Sh(e,t,n,r){let o=t===Tl;return new Proxy(e,{apply(i,s,a){let c=a[0],u=fI(t,c,n),d=u[De]??"unknown",l=Ir(t);return hh(t)?ut({name:`${l} ${d} stream-response`,op:co(t),attributes:u},async f=>{try{r.recordInputs&&c&&gh(f,c);let p=await i.apply(n,a);return ph(p,f,!!r.recordOutputs)}catch(p){throw f.setStatus({code:2,message:"internal_error"}),X(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}}),f.end(),p}}):qe({name:o?`${l} ${d} create`:`${l} ${d}`,op:co(t),attributes:u},f=>(r.recordInputs&&c&&gh(f,c),hr(()=>i.apply(n,a),p=>{X(p,{mechanism:{handled:!1,type:"auto.ai.google_genai",data:{function:t}}})},()=>{},p=>{o||pI(f,p,r.recordOutputs)})))}})}function yl(e,t="",n){return new Proxy(e,{get:(r,o,i)=>{let s=Reflect.get(r,o,i),a=fa(t,String(o));if(typeof s=="function"&&mh(a)){if(a===Tl){let c=Sh(s,a,r,n);return function(...d){let l=c(...d);return l&&typeof l=="object"?yl(l,fh,n):l}}return Sh(s,a,r,n)}return typeof s=="function"?s.bind(r):s&&typeof s=="object"?yl(s,a,n):s}})}function bl(e,t){let n=!!T()?.getOptions().sendDefaultPii,r={recordInputs:n,recordOutputs:n,...t};return yl(e,"",r)}var Ar="auto.ai.langchain",Eh={human:"user",ai:"assistant",assistant:"assistant",system:"system",function:"function",tool:"tool"};var vn=(e,t,n)=>{n!=null&&(e[t]=n)},Dt=(e,t,n)=>{let r=Number(n);Number.isNaN(r)||(e[t]=r)};function Rt(e){if(typeof e=="string")return e;try{return JSON.stringify(e)}catch{return String(e)}}function xi(e){let t=e.toLowerCase();return Eh[t]??t}function Th(e){return e.includes("System")?"system":e.includes("Human")?"user":e.includes("AI")||e.includes("Assistant")?"assistant":e.includes("Function")?"function":e.includes("Tool")?"tool":"user"}function Il(e){if(!(!e||Array.isArray(e)))return e.invocation_params}function Oi(e){return e.map(t=>{let n=t._getType;if(typeof n=="function"){let o=n.call(t);return{role:xi(o),content:Rt(t.content)}}let r=t.constructor?.name;if(r)return{role:xi(Th(r)),content:Rt(t.content)};if(t.type){let o=String(t.type).toLowerCase();return{role:xi(o),content:Rt(t.content)}}if(t.role)return{role:xi(String(t.role)),content:Rt(t.content)};if(t.lc===1&&t.kwargs){let o=t.id,i=Array.isArray(o)&&o.length>0?o[o.length-1]:"",s=typeof i=="string"?Th(i):"user";return{role:xi(s),content:Rt(t.kwargs?.content)}}return{role:"user",content:Rt(t.content)}})}function mI(e,t,n){let r={},o="kwargs"in e?e.kwargs:void 0,i=t?.temperature??n?.ls_temperature??o?.temperature;Dt(r,Kn,i);let s=t?.max_tokens??n?.ls_max_tokens??o?.max_tokens;Dt(r,io,s);let a=t?.top_p??o?.top_p;Dt(r,Xn,a);let c=t?.frequency_penalty;Dt(r,Jn,c);let u=t?.presence_penalty;return Dt(r,so,u),t&&"stream"in t&&vn(r,oo,!!t.stream),r}function yh(e,t,n,r,o,i){return{[Vn]:Rt(e??"langchain"),[At]:n,[De]:Rt(t),[H]:Ar,...mI(r,o,i)}}function bh(e,t,n,r,o){let i=o?.ls_provider,s=r?.model??o?.ls_model_name??"unknown",a=yh(i,s,"pipeline",e,r,o);if(n&&Array.isArray(t)&&t.length>0){let c=t.map(u=>({role:"user",content:u}));vn(a,dt,Rt(c))}return a}function Ih(e,t,n,r,o){let i=o?.ls_provider??e.id?.[2],s=r?.model??o?.ls_model_name??"unknown",a=yh(i,s,"chat",e,r,o);if(n&&Array.isArray(t)&&t.length>0){let c=Oi(t.flat()),u=ao(c);vn(a,dt,Rt(u))}return a}function hI(e,t){let n=[],r=e.flat();for(let o of r){let i=o.message?.content;if(Array.isArray(i))for(let s of i){let a=s;a.type==="tool_use"&&n.push(a)}}n.length>0&&vn(t,He,Rt(n))}function _I(e,t){if(!e)return;let n=e.tokenUsage,r=e.usage;if(n)Dt(t,Lt,n.promptTokens),Dt(t,Pt,n.completionTokens),Dt(t,Ut,n.totalTokens);else if(r){Dt(t,Lt,r.input_tokens),Dt(t,Pt,r.output_tokens);let o=Number(r.input_tokens),i=Number(r.output_tokens),s=(Number.isNaN(o)?0:o)+(Number.isNaN(i)?0:i);s>0&&Dt(t,Ut,s),r.cache_creation_input_tokens!==void 0&&Dt(t,Om,r.cache_creation_input_tokens),r.cache_read_input_tokens!==void 0&&Dt(t,Mm,r.cache_read_input_tokens)}}function Ah(e,t){if(!e)return;let n={};if(Array.isArray(e.generations)){let u=e.generations.flat().map(d=>d.generationInfo?.finish_reason?d.generationInfo.finish_reason:d.generation_info?.finish_reason?d.generation_info.finish_reason:null).filter(d=>typeof d=="string");if(u.length>0&&vn(n,bt,Rt(u)),hI(e.generations,n),t){let d=e.generations.flat().map(l=>l.text??l.message?.content).filter(l=>typeof l=="string");d.length>0&&vn(n,Me,Rt(d))}}_I(e.llmOutput,n);let r=e.llmOutput,i=e.generations?.[0]?.[0]?.message,s=r?.model_name??r?.model??i?.response_metadata?.model_name;s&&vn(n,It,s);let a=r?.id??i?.id;a&&vn(n,en,a);let c=r?.stop_reason??i?.response_metadata?.finish_reason;return c&&vn(n,km,Rt(c)),n}function Al(e={}){let t=e.recordInputs??!1,n=e.recordOutputs??!1,r=new Map,o=s=>{let a=r.get(s);a?.isRecording()&&(a.end(),r.delete(s))},i={lc_serializable:!1,lc_namespace:["langchain_core","callbacks","sentry"],lc_secrets:void 0,lc_attributes:void 0,lc_aliases:void 0,lc_serializable_keys:void 0,lc_id:["langchain_core","callbacks","sentry"],lc_kwargs:{},name:"SentryCallbackHandler",ignoreLLM:!1,ignoreChain:!1,ignoreAgent:!1,ignoreRetriever:!1,ignoreCustomEvent:!1,raiseError:!1,awaitHandlers:!0,handleLLMStart(s,a,c,u,d,l,f,p){let m=Il(l),_=bh(s,a,t,m,f),g=_[De],S=_[At];ut({name:`${S} ${g}`,op:"gen_ai.pipeline",attributes:{..._,[ie]:"gen_ai.pipeline"}},b=>(r.set(c,b),b))},handleChatModelStart(s,a,c,u,d,l,f,p){let m=Il(l),_=Ih(s,a,t,m,f),g=_[De],S=_[At];ut({name:`${S} ${g}`,op:"gen_ai.chat",attributes:{..._,[ie]:"gen_ai.chat"}},b=>(r.set(c,b),b))},handleLLMEnd(s,a,c,u,d){let l=r.get(a);if(l?.isRecording()){let f=Ah(s,n);f&&l.setAttributes(f),o(a)}},handleLLMError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"llm_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${Ar}.llm_error_handler`}})},handleChainStart(s,a,c,u){let d=s.name||"unknown_chain",l={[H]:"auto.ai.langchain","langchain.chain.name":d};t&&(l["langchain.chain.inputs"]=JSON.stringify(a)),ut({name:`chain ${d}`,op:"gen_ai.invoke_agent",attributes:{...l,[ie]:"gen_ai.invoke_agent"}},f=>(r.set(c,f),f))},handleChainEnd(s,a){let c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"langchain.chain.outputs":JSON.stringify(s)}),o(a))},handleChainError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"chain_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${Ar}.chain_error_handler`}})},handleToolStart(s,a,c,u){let d=s.name||"unknown_tool",l={[H]:Ar,"gen_ai.tool.name":d};t&&(l["gen_ai.tool.input"]=a),ut({name:`execute_tool ${d}`,op:"gen_ai.execute_tool",attributes:{...l,[ie]:"gen_ai.execute_tool"}},f=>(r.set(c,f),f))},handleToolEnd(s,a){let c=r.get(a);c?.isRecording()&&(n&&c.setAttributes({"gen_ai.tool.output":JSON.stringify(s)}),o(a))},handleToolError(s,a){let c=r.get(a);c?.isRecording()&&(c.setStatus({code:2,message:"tool_error"}),o(a)),X(s,{mechanism:{handled:!1,type:`${Ar}.tool_error_handler`}})},copy(){return i},toJSON(){return{lc:1,type:"not_implemented",id:i.lc_id}},toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:i.lc_id}}};return i}var Rl="auto.ai.langgraph";function gI(e){if(!e||e.length===0)return null;let t=[];for(let n of e)if(n&&typeof n=="object"){let r=n.tool_calls;r&&Array.isArray(r)&&t.push(...r)}return t.length>0?t:null}function SI(e){let t=e,n=0,r=0,o=0;if(t.usage_metadata&&typeof t.usage_metadata=="object"){let i=t.usage_metadata;return typeof i.input_tokens=="number"&&(n=i.input_tokens),typeof i.output_tokens=="number"&&(r=i.output_tokens),typeof i.total_tokens=="number"&&(o=i.total_tokens),{inputTokens:n,outputTokens:r,totalTokens:o}}if(t.response_metadata&&typeof t.response_metadata=="object"){let i=t.response_metadata;if(i.tokenUsage&&typeof i.tokenUsage=="object"){let s=i.tokenUsage;typeof s.promptTokens=="number"&&(n=s.promptTokens),typeof s.completionTokens=="number"&&(r=s.completionTokens),typeof s.totalTokens=="number"&&(o=s.totalTokens)}}return{inputTokens:n,outputTokens:r,totalTokens:o}}function EI(e,t){let n=t;if(n.response_metadata&&typeof n.response_metadata=="object"){let r=n.response_metadata;r.model_name&&typeof r.model_name=="string"&&e.setAttribute(It,r.model_name),r.finish_reason&&typeof r.finish_reason=="string"&&e.setAttribute(bt,[r.finish_reason])}}function Rh(e){if(!e.builder?.nodes?.tools?.runnable?.tools)return null;let t=e.builder?.nodes?.tools?.runnable?.tools;return!t||!Array.isArray(t)||t.length===0?null:t.map(n=>({name:n.lc_kwargs?.name,description:n.lc_kwargs?.description,schema:n.lc_kwargs?.schema}))}function vh(e,t,n){let o=n?.messages;if(!o||!Array.isArray(o))return;let i=t?.length??0,s=o.length>i?o.slice(i):[];if(s.length===0)return;let a=gI(s);a&&e.setAttribute(He,JSON.stringify(a));let c=Oi(s);e.setAttribute(Me,JSON.stringify(c));let u=0,d=0,l=0;for(let f of s){let p=SI(f);u+=p.inputTokens,d+=p.outputTokens,l+=p.totalTokens,EI(e,f)}u>0&&e.setAttribute(Lt,u),d>0&&e.setAttribute(Pt,d),l>0&&e.setAttribute(Ut,l)}function Nh(e,t){return new Proxy(e,{apply(n,r,o){return qe({op:"gen_ai.create_agent",name:"create_agent",attributes:{[H]:Rl,[ie]:"gen_ai.create_agent",[At]:"create_agent"}},i=>{try{let s=Reflect.apply(n,r,o),a=o.length>0?o[0]:{};a?.name&&typeof a.name=="string"&&(i.setAttribute(dl,a.name),i.updateName(`create_agent ${a.name}`));let c=s.invoke;return c&&typeof c=="function"&&(s.invoke=TI(c.bind(s),s,a,t)),s}catch(s){throw i.setStatus({code:2,message:"internal_error"}),X(s,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),s}})}})}function TI(e,t,n,r){return new Proxy(e,{apply(o,i,s){return qe({op:"gen_ai.invoke_agent",name:"invoke_agent",attributes:{[H]:Rl,[ie]:Lm,[At]:"invoke_agent"}},async a=>{try{let c=n?.name;c&&typeof c=="string"&&(a.setAttribute(xm,c),a.setAttribute(dl,c),a.updateName(`invoke_agent ${c}`));let u=Rh(t);u&&a.setAttribute(Qn,JSON.stringify(u));let d=r.recordInputs,l=r.recordOutputs,f=s.length>0?s[0].messages??[]:[];if(f&&d){let m=Oi(f),_=ao(m);a.setAttribute(dt,JSON.stringify(_))}let p=await Reflect.apply(o,i,s);return l&&vh(a,f??null,p),p}catch(c){throw a.setStatus({code:2,message:"internal_error"}),X(c,{mechanism:{handled:!1,type:"auto.ai.langgraph.error"}}),c}})}})}function vl(e,t){let n=t||{};return e.compile=Nh(e.compile.bind(e),n),e}function ha(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}var uo=v;function Nl(){return"history"in uo&&!!uo.history}function yI(){if(!("fetch"in uo))return!1;try{return new Headers,new Request("data:,"),new Response,!0}catch{return!1}}function Mi(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Li(){if(typeof EdgeRuntime=="string")return!0;if(!yI())return!1;if(Mi(uo.fetch))return!0;let e=!1,t=uo.document;if(t&&typeof t.createElement=="function")try{let n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Mi(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){y&&h.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function Cl(){return"ReportingObserver"in uo}function Rr(e,t){let n="fetch";Ke(n,e),Je(n,()=>wh(void 0,t))}function kl(e){let t="fetch-body-resolved";Ke(t,e),Je(t,()=>wh(II))}function wh(e,t=!1){t&&!Li()||ge(v,"fetch",function(n){return function(...r){let o=new Error,{method:i,url:s}=AI(r),a={args:r,fetchData:{method:i,url:s},startTimestamp:Q()*1e3,virtualError:o,headers:RI(r)};return e||Oe("fetch",{...a}),n.apply(v,r).then(async c=>(e?e(c):Oe("fetch",{...a,endTimestamp:Q()*1e3,response:c}),c),c=>{if(Oe("fetch",{...a,endTimestamp:Q()*1e3,error:c}),St(c)&&c.stack===void 0&&(c.stack=o.stack,ye(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{let u=new URL(a.fetchData.url);c.message=`${c.message} (${u.host})`}catch{}throw c})}})}async function bI(e,t){if(e?.body){let n=e.body,r=n.getReader(),o=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3),i=!0;for(;i;){let s;try{s=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);let{done:a}=await r.read();clearTimeout(s),a&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(s)}}clearTimeout(o),r.releaseLock(),n.cancel().then(null,()=>{})}}function II(e){let t;try{t=e.clone()}catch{return}bI(t,()=>{Oe("fetch-body-resolved",{endTimestamp:Q()*1e3,response:e})})}function wl(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Ch(e){return typeof e=="string"?e:e?wl(e,"url")?e.url:e.toString?e.toString():"":""}function AI(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){let[n,r]=e;return{url:Ch(n),method:wl(r,"method")?String(r.method).toUpperCase():"GET"}}let t=e[0];return{url:Ch(t),method:wl(t,"method")?String(t.method).toUpperCase():"GET"}}function RI(e){let[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(gs(t))return new Headers(t.headers)}catch{}}function xl(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function Ol(){return"npm"}function kh(){return!xl()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Zn(){return typeof window<"u"&&(!kh()||vI())}function vI(){return v.process?.type==="renderer"}var nn=v,pe=nn.document,Pi=nn.navigator,Yh="Report a Bug",NI="Cancel",CI="Send Bug Report",wI="Confirm",kI="Report a Bug",xI="your.email@example.org",OI="Email",MI="What's the bug? What did you expect?",LI="Description",PI="Your Name",UI="Name",DI="Thank you for your report!",BI="(required)",FI="Add a screenshot",HI="Remove screenshot",GI="Highlight",$I="Hide",WI="Remove",jI="widget",zI="api",qI=5e3,$l=(e,t={includeReplay:!0})=>{if(!e.message)throw new Error("Unable to submit feedback with empty message");let n=T();if(!n)throw new Error("No client setup, cannot send feedback.");e.tags&&Object.keys(e.tags).length&&O().setTags(e.tags);let r=Ni({source:zI,url:st(),...e},t);return new Promise((o,i)=>{let s=setTimeout(()=>i("Unable to determine if Feedback was correctly sent."),3e4),a=n.on("afterSendEvent",(c,u)=>{if(c.event_id===r)return clearTimeout(s),a(),u?.statusCode&&u.statusCode>=200&&u.statusCode<300?o(r):u?.statusCode===403?i("Unable to send feedback. This could be because this domain is not in your list of allowed domains."):i("Unable to send feedback. This could be because of network issues, or because you are using an ad-blocker.")})})},Ea=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function YI(){return!(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(Pi.userAgent)||/Macintosh/i.test(Pi.userAgent)&&Pi.maxTouchPoints&&Pi.maxTouchPoints>1||!isSecureContext)}function _a(e,t){return{...e,...t,tags:{...e.tags,...t.tags},onFormOpen:()=>{t.onFormOpen?.(),e.onFormOpen?.()},onFormClose:()=>{t.onFormClose?.(),e.onFormClose?.()},onSubmitSuccess:(n,r)=>{t.onSubmitSuccess?.(n,r),e.onSubmitSuccess?.(n,r)},onSubmitError:n=>{t.onSubmitError?.(n),e.onSubmitError?.(n)},onFormSubmitted:()=>{t.onFormSubmitted?.(),e.onFormSubmitted?.()},themeDark:{...e.themeDark,...t.themeDark},themeLight:{...e.themeLight,...t.themeLight}}}function VI(e){let t=pe.createElement("style");return t.textContent=`
.widget__actor {
  position: fixed;
  z-index: var(--z-index);
  margin: var(--page-margin);
  inset: var(--actor-inset);

  display: flex;
  align-items: center;
  gap: 8px;
  padding: 16px;

  font-family: inherit;
  font-size: var(--font-size);
  font-weight: 600;
  line-height: 1.14em;
  text-decoration: none;

  background: var(--actor-background, var(--background));
  border-radius: var(--actor-border-radius, 1.7em/50%);
  border: var(--actor-border, var(--border));
  box-shadow: var(--actor-box-shadow, var(--box-shadow));
  color: var(--actor-color, var(--foreground));
  fill: var(--actor-color, var(--foreground));
  cursor: pointer;
  opacity: 1;
  transition: transform 0.2s ease-in-out;
  transform: translate(0, 0) scale(1);
}
.widget__actor[aria-hidden="true"] {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
  transform: translate(0, 16px) scale(0.98);
}

.widget__actor:hover {
  background: var(--actor-hover-background, var(--background));
  filter: var(--interactive-filter);
}

.widget__actor svg {
  width: 1.14em;
  height: 1.14em;
}

@media (max-width: 600px) {
  .widget__actor span {
    display: none;
  }
}
`,e&&t.setAttribute("nonce",e),t}function Bt(e,t){return Object.entries(t).forEach(([n,r])=>{e.setAttributeNS(null,n,r)}),e}var lo=20,KI="http://www.w3.org/2000/svg";function JI(){let e=a=>nn.document.createElementNS(KI,a),t=Bt(e("svg"),{width:`${lo}`,height:`${lo}`,viewBox:`0 0 ${lo} ${lo}`,fill:"var(--actor-color, var(--foreground))"}),n=Bt(e("g"),{clipPath:"url(#clip0_57_80)"}),r=Bt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15.6622 15H12.3997C12.2129 14.9959 12.031 14.9396 11.8747 14.8375L8.04965 12.2H7.49956V19.1C7.4875 19.3348 7.3888 19.5568 7.22256 19.723C7.05632 19.8892 6.83435 19.9879 6.59956 20H2.04956C1.80193 19.9968 1.56535 19.8969 1.39023 19.7218C1.21511 19.5467 1.1153 19.3101 1.11206 19.0625V12.2H0.949652C0.824431 12.2017 0.700142 12.1783 0.584123 12.1311C0.468104 12.084 0.362708 12.014 0.274155 11.9255C0.185602 11.8369 0.115689 11.7315 0.0685419 11.6155C0.0213952 11.4995 -0.00202913 11.3752 -0.00034808 11.25V3.75C-0.00900498 3.62067 0.0092504 3.49095 0.0532651 3.36904C0.0972798 3.24712 0.166097 3.13566 0.255372 3.04168C0.344646 2.94771 0.452437 2.87327 0.571937 2.82307C0.691437 2.77286 0.82005 2.74798 0.949652 2.75H8.04965L11.8747 0.1625C12.031 0.0603649 12.2129 0.00407221 12.3997 0H15.6622C15.9098 0.00323746 16.1464 0.103049 16.3215 0.278167C16.4966 0.453286 16.5964 0.689866 16.5997 0.9375V3.25269C17.3969 3.42959 18.1345 3.83026 18.7211 4.41679C19.5322 5.22788 19.9878 6.32796 19.9878 7.47502C19.9878 8.62209 19.5322 9.72217 18.7211 10.5333C18.1345 11.1198 17.3969 11.5205 16.5997 11.6974V14.0125C16.6047 14.1393 16.5842 14.2659 16.5395 14.3847C16.4948 14.5035 16.4268 14.6121 16.3394 14.7042C16.252 14.7962 16.147 14.8698 16.0307 14.9206C15.9144 14.9714 15.7891 14.9984 15.6622 15ZM1.89695 10.325H1.88715V4.625H8.33715C8.52423 4.62301 8.70666 4.56654 8.86215 4.4625L12.6872 1.875H14.7247V13.125H12.6872L8.86215 10.4875C8.70666 10.3835 8.52423 10.327 8.33715 10.325H2.20217C2.15205 10.3167 2.10102 10.3125 2.04956 10.3125C1.9981 10.3125 1.94708 10.3167 1.89695 10.325ZM2.98706 12.2V18.1625H5.66206V12.2H2.98706ZM16.5997 9.93612V5.01393C16.6536 5.02355 16.7072 5.03495 16.7605 5.04814C17.1202 5.13709 17.4556 5.30487 17.7425 5.53934C18.0293 5.77381 18.2605 6.06912 18.4192 6.40389C18.578 6.73866 18.6603 7.10452 18.6603 7.47502C18.6603 7.84552 18.578 8.21139 18.4192 8.54616C18.2605 8.88093 18.0293 9.17624 17.7425 9.41071C17.4556 9.64518 17.1202 9.81296 16.7605 9.90191C16.7072 9.91509 16.6536 9.9265 16.5997 9.93612Z"});t.appendChild(n).appendChild(r);let o=e("defs"),i=Bt(e("clipPath"),{id:"clip0_57_80"}),s=Bt(e("rect"),{width:`${lo}`,height:`${lo}`,fill:"white"});return i.appendChild(s),o.appendChild(i),t.appendChild(o).appendChild(i).appendChild(s),t}function XI({triggerLabel:e,triggerAriaLabel:t,shadow:n,styleNonce:r}){let o=pe.createElement("button");if(o.type="button",o.className="widget__actor",o.ariaHidden="false",o.ariaLabel=t||e||Yh,o.appendChild(JI()),e){let s=pe.createElement("span");s.appendChild(pe.createTextNode(e)),o.appendChild(s)}let i=VI(r);return{el:o,appendToDom(){n.appendChild(i),n.appendChild(o)},removeFromDom(){o.remove(),i.remove()},show(){o.ariaHidden="false"},hide(){o.ariaHidden="true"}}}var Vh="rgba(88, 74, 192, 1)",QI={foreground:"#2b2233",background:"#ffffff",accentForeground:"white",accentBackground:Vh,successColor:"#268d75",errorColor:"#df3338",border:"1.5px solid rgba(41, 35, 47, 0.13)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(95%)"},xh={foreground:"#ebe6ef",background:"#29232f",accentForeground:"white",accentBackground:Vh,successColor:"#2da98c",errorColor:"#f55459",border:"1.5px solid rgba(235, 230, 239, 0.15)",boxShadow:"0px 4px 24px 0px rgba(43, 34, 51, 0.12)",outline:"1px auto var(--accent-background)",interactiveFilter:"brightness(150%)"};function Oh(e){return`
  --foreground: ${e.foreground};
  --background: ${e.background};
  --accent-foreground: ${e.accentForeground};
  --accent-background: ${e.accentBackground};
  --success-color: ${e.successColor};
  --error-color: ${e.errorColor};
  --border: ${e.border};
  --box-shadow: ${e.boxShadow};
  --outline: ${e.outline};
  --interactive-filter: ${e.interactiveFilter};
  `}function ZI({colorScheme:e,themeDark:t,themeLight:n,styleNonce:r}){let o=pe.createElement("style");return o.textContent=`
:host {
  --font-family: system-ui, 'Helvetica Neue', Arial, sans-serif;
  --font-size: 14px;
  --z-index: 100000;

  --page-margin: 16px;
  --inset: auto 0 0 auto;
  --actor-inset: var(--inset);

  font-family: var(--font-family);
  font-size: var(--font-size);

  ${e!=="system"?"color-scheme: only light;":""}

  ${Oh(e==="dark"?{...xh,...t}:{...QI,...n})}
}

${e==="system"?`
@media (prefers-color-scheme: dark) {
  :host {
    ${Oh({...xh,...t})}
  }
}`:""}
}
`,r&&o.setAttribute("nonce",r),o}var Ra=({lazyLoadIntegration:e,getModalIntegration:t,getScreenshotIntegration:n})=>(({id:o="sentry-feedback",autoInject:i=!0,showBranding:s=!0,isEmailRequired:a=!1,isNameRequired:c=!1,showEmail:u=!0,showName:d=!0,enableScreenshot:l=!0,useSentryUser:f={email:"email",name:"username"},tags:p,styleNonce:m,scriptNonce:_,colorScheme:g="system",themeLight:S={},themeDark:b={},addScreenshotButtonLabel:D=FI,cancelButtonLabel:M=NI,confirmButtonLabel:z=wI,emailLabel:B=OI,emailPlaceholder:E=xI,formTitle:k=kI,isRequiredLabel:G=BI,messageLabel:A=LI,messagePlaceholder:x=MI,nameLabel:C=UI,namePlaceholder:P=PI,removeScreenshotButtonLabel:F=HI,submitButtonLabel:te=CI,successMessageText:ee=DI,triggerLabel:ue=Yh,triggerAriaLabel:R="",highlightToolText:q=GI,hideToolText:N=$I,removeHighlightText:Y=WI,onFormOpen:de,onFormClose:se,onSubmitSuccess:Ce,onSubmitError:nt,onFormSubmitted:Ln}={})=>{let rt={id:o,autoInject:i,showBranding:s,isEmailRequired:a,isNameRequired:c,showEmail:u,showName:d,enableScreenshot:l,useSentryUser:f,tags:p,styleNonce:m,scriptNonce:_,colorScheme:g,themeDark:b,themeLight:S,triggerLabel:ue,triggerAriaLabel:R,cancelButtonLabel:M,submitButtonLabel:te,confirmButtonLabel:z,formTitle:k,emailLabel:B,emailPlaceholder:E,messageLabel:A,messagePlaceholder:x,nameLabel:C,namePlaceholder:P,successMessageText:ee,isRequiredLabel:G,addScreenshotButtonLabel:D,removeScreenshotButtonLabel:F,highlightToolText:q,hideToolText:N,removeHighlightText:Y,onFormClose:se,onFormOpen:de,onSubmitError:nt,onSubmitSuccess:Ce,onFormSubmitted:Ln},ht=null,an=[],Pn=fe=>{if(!ht){let Ie=pe.createElement("div");Ie.id=String(fe.id),pe.body.appendChild(Ie),ht=Ie.attachShadow({mode:"open"}),ht.appendChild(ZI(fe))}return ht},$o=async fe=>{let Ie=fe.enableScreenshot&&YI(),Gt,Ge;try{Gt=(t?t():await e("feedbackModalIntegration",_))(),Xr(Gt)}catch{throw Ea&&h.error("[Feedback] Error when trying to load feedback integrations. Try using `feedbackSyncIntegration` in your `Sentry.init`."),new Error("[Feedback] Missing feedback modal integration!")}try{let cn=Ie?n?n():await e("feedbackScreenshotIntegration",_):void 0;cn&&(Ge=cn(),Xr(Ge))}catch{Ea&&h.error("[Feedback] Missing feedback screenshot integration. Proceeding without screenshots.")}let Ye=Gt.createDialog({options:{...fe,onFormClose:()=>{Ye?.close(),fe.onFormClose?.()},onFormSubmitted:()=>{Ye?.close(),fe.onFormSubmitted?.()}},screenshotIntegration:Ge,sendFeedback:$l,shadow:Pn(fe)});return Ye},ls=(fe,Ie={})=>{let Gt=_a(rt,Ie),Ge=typeof fe=="string"?pe.querySelector(fe):typeof fe.addEventListener=="function"?fe:null;if(!Ge)throw Ea&&h.error("[Feedback] Unable to attach to target element"),new Error("Unable to attach to target element");let Ye=null,cn=async()=>{Ye||(Ye=await $o({...Gt,onFormSubmitted:()=>{Ye?.removeFromDom(),Gt.onFormSubmitted?.()}})),Ye.appendToDom(),Ye.open()};Ge.addEventListener("click",cn);let ne=()=>{an=an.filter(Nt=>Nt!==ne),Ye?.removeFromDom(),Ye=null,Ge.removeEventListener("click",cn)};return an.push(ne),ne},Wo=(fe={})=>{let Ie=_a(rt,fe),Gt=Pn(Ie),Ge=XI({triggerLabel:Ie.triggerLabel,triggerAriaLabel:Ie.triggerAriaLabel,shadow:Gt,styleNonce:m});return ls(Ge.el,{...Ie,onFormOpen(){Ge.hide()},onFormClose(){Ge.show()},onFormSubmitted(){Ge.show()}}),Ge};return{name:"Feedback",setupOnce(){!Zn()||!rt.autoInject||(pe.readyState==="loading"?pe.addEventListener("DOMContentLoaded",()=>Wo().appendToDom()):Wo().appendToDom())},attachTo:ls,createWidget(fe={}){let Ie=Wo(_a(rt,fe));return Ie.appendToDom(),Ie},async createForm(fe={}){return $o(_a(rt,fe))},remove(){ht&&(ht.parentElement?.remove(),ht=null),an.forEach(fe=>fe()),an=[]}}});function Kh(){return T()?.getIntegrationByName("Feedback")}var va,he,Jh,vr,Mh,Xh,Bl,Ui={},Wl=[],eA=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,jl=Array.isArray;function tr(e,t){for(var n in t)e[n]=t[n];return e}function Qh(e){var t=e.parentNode;t&&t.removeChild(e)}function V(e,t,n){var r,o,i,s={};for(i in t)i=="key"?r=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?va.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return Ta(e,s,r,o,null)}function Ta(e,t,n,r,o){var i={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:o??++Jh,__i:-1,__u:0};return o==null&&he.vnode!=null&&he.vnode(i),i}function Di(e){return e.children}function ya(e,t){this.props=e,this.context=t}function po(e,t){if(t==null)return e.__?po(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?po(e):null}function tA(e,t,n){var r,o=e.__v,i=o.__e,s=e.__P;if(s)return(r=tr({},o)).__v=o.__v+1,he.vnode&&he.vnode(r),zl(s,r,o,e.__n,s.ownerSVGElement!==void 0,32&o.__u?[i]:null,t,i??po(o),!!(32&o.__u),n),r.__.__k[r.__i]=r,r.__d=void 0,r.__e!=i&&Zh(r),r}function Zh(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Zh(e)}}function Lh(e){(!e.__d&&(e.__d=!0)&&vr.push(e)&&!Aa.__r++||Mh!==he.debounceRendering)&&((Mh=he.debounceRendering)||Xh)(Aa)}function Aa(){var e,t,n,r=[],o=[];for(vr.sort(Bl);e=vr.shift();)e.__d&&(n=vr.length,t=tA(e,r,o)||t,n===0||vr.length>n?(Fl(r,t,o),o.length=r.length=0,t=void 0,vr.sort(Bl)):t&&he.__c&&he.__c(t,Wl));t&&Fl(r,t,o),Aa.__r=0}function e_(e,t,n,r,o,i,s,a,c,u,d){var l,f,p,m,_,g=r&&r.__k||Wl,S=t.length;for(n.__d=c,nA(n,t,g),c=n.__d,l=0;l<S;l++)(p=n.__k[l])!=null&&typeof p!="boolean"&&typeof p!="function"&&(f=p.__i===-1?Ui:g[p.__i]||Ui,p.__i=l,zl(e,p,f,o,i,s,a,c,u,d),m=p.__e,p.ref&&f.ref!=p.ref&&(f.ref&&ql(f.ref,null,p),d.push(p.ref,p.__c||m,p)),_==null&&m!=null&&(_=m),65536&p.__u||f.__k===p.__k?c=t_(p,c,e):typeof p.type=="function"&&p.__d!==void 0?c=p.__d:m&&(c=m.nextSibling),p.__d=void 0,p.__u&=-196609);n.__d=c,n.__e=_}function nA(e,t,n){var r,o,i,s,a,c=t.length,u=n.length,d=u,l=0;for(e.__k=[],r=0;r<c;r++)(o=e.__k[r]=(o=t[r])==null||typeof o=="boolean"||typeof o=="function"?null:typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Ta(null,o,null,null,o):jl(o)?Ta(Di,{children:o},null,null,null):o.constructor===void 0&&o.__b>0?Ta(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o)!=null?(o.__=e,o.__b=e.__b+1,a=rA(o,n,s=r+l,d),o.__i=a,i=null,a!==-1&&(d--,(i=n[a])&&(i.__u|=131072)),i==null||i.__v===null?(a==-1&&l--,typeof o.type!="function"&&(o.__u|=65536)):a!==s&&(a===s+1?l++:a>s?d>c-s?l+=a-s:l--:l=a<s&&a==s-1?a-s:0,a!==r+l&&(o.__u|=65536))):(i=n[r])&&i.key==null&&i.__e&&(i.__e==e.__d&&(e.__d=po(i)),Hl(i,i,!1),n[r]=null,d--);if(d)for(r=0;r<u;r++)(i=n[r])!=null&&(131072&i.__u)==0&&(i.__e==e.__d&&(e.__d=po(i)),Hl(i,i))}function t_(e,t,n){var r,o;if(typeof e.type=="function"){for(r=e.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=e,t=t_(r[o],t,n));return t}e.__e!=t&&(n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function rA(e,t,n,r){var o=e.key,i=e.type,s=n-1,a=n+1,c=t[n];if(c===null||c&&o==c.key&&i===c.type)return n;if(r>(c!=null&&(131072&c.__u)==0?1:0))for(;s>=0||a<t.length;){if(s>=0){if((c=t[s])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return s;s--}if(a<t.length){if((c=t[a])&&(131072&c.__u)==0&&o==c.key&&i===c.type)return a;a++}}return-1}function Ph(e,t,n){t[0]==="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||eA.test(t)?n:n+"px"}function ga(e,t,n,r,o){var i;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Ph(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Ph(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?r?n.u=r.u:(n.u=Date.now(),e.addEventListener(t,i?Dh:Uh,i)):e.removeEventListener(t,i?Dh:Uh,i);else{if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,n))}}function Uh(e){if(this.l){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(he.event?he.event(e):e)}}function Dh(e){if(this.l)return this.l[e.type+!0](he.event?he.event(e):e)}function zl(e,t,n,r,o,i,s,a,c,u){var d,l,f,p,m,_,g,S,b,D,M,z,B,E,k,G=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),i=[a=t.__e=n.__e]),(d=he.__b)&&d(t);e:if(typeof G=="function")try{if(S=t.props,b=(d=G.contextType)&&r[d.__c],D=d?b?b.props.value:d.__:r,n.__c?g=(l=t.__c=n.__c).__=l.__E:("prototype"in G&&G.prototype.render?t.__c=l=new G(S,D):(t.__c=l=new ya(S,D),l.constructor=G,l.render=iA),b&&b.sub(l),l.props=S,l.state||(l.state={}),l.context=D,l.__n=r,f=l.__d=!0,l.__h=[],l._sb=[]),l.__s==null&&(l.__s=l.state),G.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=tr({},l.__s)),tr(l.__s,G.getDerivedStateFromProps(S,l.__s))),p=l.props,m=l.state,l.__v=t,f)G.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(G.getDerivedStateFromProps==null&&S!==p&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(S,D),!l.__e&&(l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(S,l.__s,D)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(l.props=S,l.state=l.__s,l.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.forEach(function(A){A&&(A.__=t)}),M=0;M<l._sb.length;M++)l.__h.push(l._sb[M]);l._sb=[],l.__h.length&&s.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(S,l.__s,D),l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(p,m,_)})}if(l.context=D,l.props=S,l.__P=e,l.__e=!1,z=he.__r,B=0,"prototype"in G&&G.prototype.render){for(l.state=l.__s,l.__d=!1,z&&z(t),d=l.render(l.props,l.state,l.context),E=0;E<l._sb.length;E++)l.__h.push(l._sb[E]);l._sb=[]}else do l.__d=!1,z&&z(t),d=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++B<25);l.state=l.__s,l.getChildContext!=null&&(r=tr(tr({},r),l.getChildContext())),f||l.getSnapshotBeforeUpdate==null||(_=l.getSnapshotBeforeUpdate(p,m)),e_(e,jl(k=d!=null&&d.type===Di&&d.key==null?d.props.children:d)?k:[k],t,n,r,o,i,s,a,c,u),l.base=t.__e,t.__u&=-161,l.__h.length&&s.push(l),g&&(l.__E=l.__=null)}catch(A){t.__v=null,c||i!=null?(t.__e=a,t.__u|=c?160:32,i[i.indexOf(a)]=null):(t.__e=n.__e,t.__k=n.__k),he.__e(A,t,n)}else i==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=oA(n.__e,t,n,r,o,i,s,c,u);(d=he.diffed)&&d(t)}function Fl(e,t,n){for(var r=0;r<n.length;r++)ql(n[r],n[++r],n[++r]);he.__c&&he.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){he.__e(i,o.__v)}})}function oA(e,t,n,r,o,i,s,a,c){var u,d,l,f,p,m,_,g=n.props,S=t.props,b=t.type;if(b==="svg"&&(o=!0),i!=null){for(u=0;u<i.length;u++)if((p=i[u])&&"setAttribute"in p==!!b&&(b?p.localName===b:p.nodeType===3)){e=p,i[u]=null;break}}if(e==null){if(b===null)return document.createTextNode(S);e=o?document.createElementNS("http://www.w3.org/2000/svg",b):document.createElement(b,S.is&&S),i=null,a=!1}if(b===null)g===S||a&&e.data===S||(e.data=S);else{if(i=i&&va.call(e.childNodes),g=n.props||Ui,!a&&i!=null)for(g={},u=0;u<e.attributes.length;u++)g[(p=e.attributes[u]).name]=p.value;for(u in g)p=g[u],u=="children"||(u=="dangerouslySetInnerHTML"?l=p:u==="key"||u in S||ga(e,u,null,p,o));for(u in S)p=S[u],u=="children"?f=p:u=="dangerouslySetInnerHTML"?d=p:u=="value"?m=p:u=="checked"?_=p:u==="key"||a&&typeof p!="function"||g[u]===p||ga(e,u,p,g[u],o);if(d)a||l&&(d.__html===l.__html||d.__html===e.innerHTML)||(e.innerHTML=d.__html),t.__k=[];else if(l&&(e.innerHTML=""),e_(e,jl(f)?f:[f],t,n,r,o&&b!=="foreignObject",i,s,i?i[0]:n.__k&&po(n,0),a,c),i!=null)for(u=i.length;u--;)i[u]!=null&&Qh(i[u]);a||(u="value",m!==void 0&&(m!==e[u]||b==="progress"&&!m||b==="option"&&m!==g[u])&&ga(e,u,m,g[u],!1),u="checked",_!==void 0&&_!==e[u]&&ga(e,u,_,g[u],!1))}return e}function ql(e,t,n){try{typeof e=="function"?e(t):e.current=t}catch(r){he.__e(r,n)}}function Hl(e,t,n){var r,o;if(he.unmount&&he.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||ql(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){he.__e(i,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Hl(r[o],t,n||typeof e.type!="function");n||e.__e==null||Qh(e.__e),e.__=e.__e=e.__d=void 0}function iA(e,t,n){return this.constructor(e,n)}function sA(e,t,n){var r,o,i,s;he.__&&he.__(e,t),o=(r=!1)?null:t.__k,i=[],s=[],zl(t,e=t.__k=V(Di,null,[e]),o||Ui,Ui,t.ownerSVGElement!==void 0,o?null:t.firstChild?va.call(t.childNodes):null,i,o?o.__e:t.firstChild,r,s),e.__d=void 0,Fl(i,e,s)}va=Wl.slice,he={__e:function(e,t,n,r){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),s=o.__d),s)return o.__E=o}catch(a){e=a}throw e}},Jh=0,ya.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=tr({},this.state),typeof e=="function"&&(e=e(tr({},n),this.props)),e&&tr(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Lh(this))},ya.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Lh(this))},ya.prototype.render=Di,vr=[],Xh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Bl=function(e,t){return e.__v.__b-t.__v.__b},Aa.__r=0;var Nn,me,Ml,Bh,mo=0,n_=[],ba=[],Ae=he,Fh=Ae.__b,Hh=Ae.__r,Gh=Ae.diffed,$h=Ae.__c,Wh=Ae.unmount,jh=Ae.__;function Cr(e,t){Ae.__h&&Ae.__h(me,e,mo||t),mo=0;var n=me.__H||(me.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({__V:ba}),n.__[e]}function Nr(e){return mo=1,r_(i_,e)}function r_(e,t,n){var r=Cr(Nn++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):i_(void 0,t),function(a){var c=r.__N?r.__N[0]:r.__[0],u=r.t(c,a);c!==u&&(r.__N=[u,r.__[1]],r.__c.setState({}))}],r.__c=me,!me.u)){var o=function(a,c,u){if(!r.__c.__H)return!0;var d=r.__c.__H.__.filter(function(f){return!!f.__c});if(d.every(function(f){return!f.__N}))return!i||i.call(this,a,c,u);var l=!1;return d.forEach(function(f){if(f.__N){var p=f.__[0];f.__=f.__N,f.__N=void 0,p!==f.__[0]&&(l=!0)}}),!(!l&&r.__c.props===a)&&(!i||i.call(this,a,c,u))};me.u=!0;var i=me.shouldComponentUpdate,s=me.componentWillUpdate;me.componentWillUpdate=function(a,c,u){if(this.__e){var d=i;i=void 0,o(a,c,u),i=d}s&&s.call(this,a,c,u)},me.shouldComponentUpdate=o}return r.__N||r.__}function aA(e,t){var n=Cr(Nn++,3);!Ae.__s&&Yl(n.__H,t)&&(n.__=e,n.i=t,me.__H.__h.push(n))}function o_(e,t){var n=Cr(Nn++,4);!Ae.__s&&Yl(n.__H,t)&&(n.__=e,n.i=t,me.__h.push(n))}function cA(e){return mo=5,Bi(function(){return{current:e}},[])}function uA(e,t,n){mo=6,o_(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function Bi(e,t){var n=Cr(Nn++,7);return Yl(n.__H,t)?(n.__V=e(),n.i=t,n.__h=e,n.__V):n.__}function fo(e,t){return mo=8,Bi(function(){return e},t)}function lA(e){var t=me.context[e.__c],n=Cr(Nn++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(me)),t.props.value):e.__}function dA(e,t){Ae.useDebugValue&&Ae.useDebugValue(t?t(e):e)}function fA(e){var t=Cr(Nn++,10),n=Nr();return t.__=e,me.componentDidCatch||(me.componentDidCatch=function(r,o){t.__&&t.__(r,o),n[1](r)}),[n[0],function(){n[1](void 0)}]}function pA(){var e=Cr(Nn++,11);if(!e.__){for(var t=me.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function mA(){for(var e;e=n_.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Ia),e.__H.__h.forEach(Gl),e.__H.__h=[]}catch(t){e.__H.__h=[],Ae.__e(t,e.__v)}}Ae.__b=function(e){me=null,Fh&&Fh(e)},Ae.__=function(e,t){t.__k&&t.__k.__m&&(e.__m=t.__k.__m),jh&&jh(e,t)},Ae.__r=function(e){Hh&&Hh(e),Nn=0;var t=(me=e.__c).__H;t&&(Ml===me?(t.__h=[],me.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=ba,n.__N=n.i=void 0})):(t.__h.forEach(Ia),t.__h.forEach(Gl),t.__h=[],Nn=0)),Ml=me},Ae.diffed=function(e){Gh&&Gh(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(n_.push(t)!==1&&Bh===Ae.requestAnimationFrame||((Bh=Ae.requestAnimationFrame)||hA)(mA)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==ba&&(n.__=n.__V),n.i=void 0,n.__V=ba})),Ml=me=null},Ae.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Ia),n.__h=n.__h.filter(function(r){return!r.__||Gl(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],Ae.__e(r,n.__v)}}),$h&&$h(e,t)},Ae.unmount=function(e){Wh&&Wh(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Ia(r)}catch(o){t=o}}),n.__H=void 0,t&&Ae.__e(t,n.__v))};var zh=typeof requestAnimationFrame=="function";function hA(e){var t,n=function(){clearTimeout(r),zh&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);zh&&(t=requestAnimationFrame(n))}function Ia(e){var t=me,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),me=t}function Gl(e){var t=me;e.__c=e.__(),me=t}function Yl(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function i_(e,t){return typeof t=="function"?t(e):t}var _A=Object.defineProperty({__proto__:null,useCallback:fo,useContext:lA,useDebugValue:dA,useEffect:aA,useErrorBoundary:fA,useId:pA,useImperativeHandle:uA,useLayoutEffect:o_,useMemo:Bi,useReducer:r_,useRef:cA,useState:Nr},Symbol.toStringTag,{value:"Module"}),gA="http://www.w3.org/2000/svg";function SA(){let e=r=>pe.createElementNS(gA,r),t=Bt(e("svg"),{width:"32",height:"30",viewBox:"0 0 72 66",fill:"inherit"}),n=Bt(e("path"),{transform:"translate(11, 11)",d:"M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z"});return t.appendChild(n),t}function EA({options:e}){let t=Bi(()=>({__html:SA().outerHTML}),[]);return V("h2",{class:"dialog__header"},V("span",{class:"dialog__title"},e.formTitle),e.showBranding?V("a",{class:"brand-link",target:"_blank",href:"https://sentry.io/welcome/",title:"Powered by Sentry",rel:"noopener noreferrer",dangerouslySetInnerHTML:t}):null)}function TA(e,t){let n=[];return t.isNameRequired&&!e.name&&n.push(t.nameLabel),t.isEmailRequired&&!e.email&&n.push(t.emailLabel),e.message||n.push(t.messageLabel),n}function Ll(e,t){let n=e.get(t);return typeof n=="string"?n.trim():""}function yA({options:e,defaultEmail:t,defaultName:n,onFormClose:r,onSubmit:o,onSubmitSuccess:i,onSubmitError:s,showEmail:a,showName:c,screenshotInput:u}){let{tags:d,addScreenshotButtonLabel:l,removeScreenshotButtonLabel:f,cancelButtonLabel:p,emailLabel:m,emailPlaceholder:_,isEmailRequired:g,isNameRequired:S,messageLabel:b,messagePlaceholder:D,nameLabel:M,namePlaceholder:z,submitButtonLabel:B,isRequiredLabel:E}=e,[k,G]=Nr(!1),[A,x]=Nr(null),[C,P]=Nr(!1),F=u?.input,[te,ee]=Nr(null),ue=fo(N=>{ee(N),P(!1)},[]),R=fo(N=>{let Y=TA(N,{emailLabel:m,isEmailRequired:g,isNameRequired:S,messageLabel:b,nameLabel:M});return Y.length>0?x(`Please enter in the following required fields: ${Y.join(", ")}`):x(null),Y.length===0},[m,g,S,b,M]),q=fo(async N=>{G(!0);try{if(N.preventDefault(),!(N.target instanceof HTMLFormElement))return;let Y=new FormData(N.target),de=await(u&&C?u.value():void 0),se={name:Ll(Y,"name"),email:Ll(Y,"email"),message:Ll(Y,"message"),attachments:de?[de]:void 0};if(!R(se))return;try{let Ce=await o({name:se.name,email:se.email,message:se.message,source:jI,tags:d},{attachments:se.attachments});i(se,Ce)}catch(Ce){Ea&&h.error(Ce),x(Ce),s(Ce)}}finally{G(!1)}},[u&&C,i,s]);return V("form",{class:"form",onSubmit:q},F&&C?V(F,{onError:ue}):null,V("fieldset",{class:"form__right","data-sentry-feedback":!0,disabled:k},V("div",{class:"form__top"},A?V("div",{class:"form__error-container"},A):null,c?V("label",{for:"name",class:"form__label"},V(Pl,{label:M,isRequiredLabel:E,isRequired:S}),V("input",{class:"form__input",defaultValue:n,id:"name",name:"name",placeholder:z,required:S,type:"text"})):V("input",{"aria-hidden":!0,value:n,name:"name",type:"hidden"}),a?V("label",{for:"email",class:"form__label"},V(Pl,{label:m,isRequiredLabel:E,isRequired:g}),V("input",{class:"form__input",defaultValue:t,id:"email",name:"email",placeholder:_,required:g,type:"email"})):V("input",{"aria-hidden":!0,value:t,name:"email",type:"hidden"}),V("label",{for:"message",class:"form__label"},V(Pl,{label:b,isRequiredLabel:E,isRequired:!0}),V("textarea",{autoFocus:!0,class:"form__input form__input--textarea",id:"message",name:"message",placeholder:D,required:!0,rows:5})),F?V("label",{for:"screenshot",class:"form__label"},V("button",{class:"btn btn--default",disabled:k,type:"button",onClick:()=>{ee(null),P(N=>!N)}},C?f:l),te?V("div",{class:"form__error-container"},te.message):null):null),V("div",{class:"btn-group"},V("button",{class:"btn btn--primary",disabled:k,type:"submit"},B),V("button",{class:"btn btn--default",disabled:k,type:"button",onClick:r},p))))}function Pl({label:e,isRequired:t,isRequiredLabel:n}){return V("span",{class:"form__label__text"},e,t&&V("span",{class:"form__label__text--required"},n))}var Sa=16,qh=17,bA="http://www.w3.org/2000/svg";function IA(){let e=c=>nn.document.createElementNS(bA,c),t=Bt(e("svg"),{width:`${Sa}`,height:`${qh}`,viewBox:`0 0 ${Sa} ${qh}`,fill:"inherit"}),n=Bt(e("g"),{clipPath:"url(#clip0_57_156)"}),r=Bt(e("path"),{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3.55544 15.1518C4.87103 16.0308 6.41775 16.5 8 16.5C10.1217 16.5 12.1566 15.6571 13.6569 14.1569C15.1571 12.6566 16 10.6217 16 8.5C16 6.91775 15.5308 5.37103 14.6518 4.05544C13.7727 2.73985 12.5233 1.71447 11.0615 1.10897C9.59966 0.503466 7.99113 0.34504 6.43928 0.653721C4.88743 0.962403 3.46197 1.72433 2.34315 2.84315C1.22433 3.96197 0.462403 5.38743 0.153721 6.93928C-0.15496 8.49113 0.00346625 10.0997 0.608967 11.5615C1.21447 13.0233 2.23985 14.2727 3.55544 15.1518ZM4.40546 3.1204C5.46945 2.40946 6.72036 2.03 8 2.03C9.71595 2.03 11.3616 2.71166 12.575 3.92502C13.7883 5.13838 14.47 6.78405 14.47 8.5C14.47 9.77965 14.0905 11.0306 13.3796 12.0945C12.6687 13.1585 11.6582 13.9878 10.476 14.4775C9.29373 14.9672 7.99283 15.0953 6.73777 14.8457C5.48271 14.596 4.32987 13.9798 3.42502 13.075C2.52018 12.1701 1.90397 11.0173 1.65432 9.76224C1.40468 8.50718 1.5328 7.20628 2.0225 6.02404C2.5122 4.8418 3.34148 3.83133 4.40546 3.1204Z"}),o=Bt(e("path"),{d:"M6.68775 12.4297C6.78586 12.4745 6.89218 12.4984 7 12.5C7.11275 12.4955 7.22315 12.4664 7.32337 12.4145C7.4236 12.3627 7.51121 12.2894 7.58 12.2L12 5.63999C12.0848 5.47724 12.1071 5.28902 12.0625 5.11098C12.0178 4.93294 11.9095 4.77744 11.7579 4.67392C11.6064 4.57041 11.4221 4.52608 11.24 4.54931C11.0579 4.57254 10.8907 4.66173 10.77 4.79999L6.88 10.57L5.13 8.56999C5.06508 8.49566 4.98613 8.43488 4.89768 8.39111C4.80922 8.34735 4.713 8.32148 4.61453 8.31498C4.51605 8.30847 4.41727 8.32147 4.32382 8.35322C4.23038 8.38497 4.14413 8.43484 4.07 8.49999C3.92511 8.63217 3.83692 8.81523 3.82387 9.01092C3.81083 9.2066 3.87393 9.39976 4 9.54999L6.43 12.24C6.50187 12.3204 6.58964 12.385 6.68775 12.4297Z"});t.appendChild(n).append(o,r);let i=e("defs"),s=Bt(e("clipPath"),{id:"clip0_57_156"}),a=Bt(e("rect"),{width:`${Sa}`,height:`${Sa}`,fill:"white",transform:"translate(0 0.5)"});return s.appendChild(a),i.appendChild(s),t.appendChild(i).appendChild(s).appendChild(a),t}function AA({open:e,onFormSubmitted:t,...n}){let r=n.options,o=Bi(()=>({__html:IA().outerHTML}),[]),[i,s]=Nr(null),a=fo(()=>{i&&(clearTimeout(i),s(null)),t()},[i]),c=fo((u,d)=>{n.onSubmitSuccess(u,d),s(setTimeout(()=>{t(),s(null)},qI))},[t]);return V(Di,null,i?V("div",{class:"success__position",onClick:a},V("div",{class:"success__content"},r.successMessageText,V("span",{class:"success__icon",dangerouslySetInnerHTML:o}))):V("dialog",{class:"dialog",onClick:r.onFormClose,open:e},V("div",{class:"dialog__position"},V("div",{class:"dialog__content",onClick:u=>{u.stopPropagation()}},V(EA,{options:r}),V(yA,{...n,onSubmitSuccess:c})))))}var RA=`
.dialog {
  position: fixed;
  z-index: var(--z-index);
  margin: 0;
  inset: 0;

  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  height: 100vh;
  width: 100vw;

  color: var(--dialog-color, var(--foreground));
  fill: var(--dialog-color, var(--foreground));
  line-height: 1.75em;

  background-color: rgba(0, 0, 0, 0.05);
  border: none;
  inset: 0;
  opacity: 1;
  transition: opacity 0.2s ease-in-out;
}

.dialog__position {
  position: fixed;
  z-index: var(--z-index);
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  display: flex;
  max-height: calc(100vh - (2 * var(--page-margin)));
}
@media (max-width: 600px) {
  .dialog__position {
    inset: var(--page-margin);
    padding: 0;
  }
}

.dialog__position:has(.editor) {
  inset: var(--page-margin);
  padding: 0;
}

.dialog:not([open]) {
  opacity: 0;
  pointer-events: none;
  visibility: hidden;
}
.dialog:not([open]) .dialog__content {
  transform: translate(0, -16px) scale(0.98);
}

.dialog__content {
  display: flex;
  flex-direction: column;
  gap: 16px;
  padding: var(--dialog-padding, 24px);
  max-width: 100%;
  width: 100%;
  max-height: 100%;
  overflow: auto;

  background: var(--dialog-background, var(--background));
  border-radius: var(--dialog-border-radius, 20px);
  border: var(--dialog-border, var(--border));
  box-shadow: var(--dialog-box-shadow, var(--box-shadow));
  transform: translate(0, 0) scale(1);
  transition: transform 0.2s ease-in-out;
}

`,vA=`
.dialog__header {
  display: flex;
  gap: 4px;
  justify-content: space-between;
  font-weight: var(--dialog-header-weight, 600);
  margin: 0;
}
.dialog__title {
  align-self: center;
  width: var(--form-width, 272px);
}

@media (max-width: 600px) {
  .dialog__title {
    width: auto;
  }
}

.dialog__position:has(.editor) .dialog__title {
  width: auto;
}


.brand-link {
  display: inline-flex;
}
.brand-link:focus-visible {
  outline: var(--outline);
}
`,NA=`
.form {
  display: flex;
  overflow: auto;
  flex-direction: row;
  gap: 16px;
  flex: 1 0;
}

.form fieldset {
  border: none;
  margin: 0;
  padding: 0;
}

.form__right {
  flex: 0 0 auto;
  display: flex;
  overflow: auto;
  flex-direction: column;
  justify-content: space-between;
  gap: 20px;
  width: var(--form-width, 100%);
}

.dialog__position:has(.editor) .form__right {
  width: var(--form-width, 272px);
}

.form__top {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.form__error-container {
  color: var(--error-color);
  fill: var(--error-color);
}

.form__label {
  display: flex;
  flex-direction: column;
  gap: 4px;
  margin: 0px;
}

.form__label__text {
  display: flex;
  gap: 4px;
  align-items: center;
}

.form__label__text--required {
  font-size: 0.85em;
}

.form__input {
  font-family: inherit;
  line-height: inherit;
  background: transparent;
  box-sizing: border-box;
  border: var(--input-border, var(--border));
  border-radius: var(--input-border-radius, 6px);
  color: var(--input-color, inherit);
  fill: var(--input-color, inherit);
  font-size: var(--input-font-size, inherit);
  font-weight: var(--input-font-weight, 500);
  padding: 6px 12px;
}

.form__input::placeholder {
  opacity: 0.65;
  color: var(--input-placeholder-color, inherit);
  filter: var(--interactive-filter);
}

.form__input:focus-visible {
  outline: var(--input-focus-outline, var(--outline));
}

.form__input--textarea {
  font-family: inherit;
  resize: vertical;
}

.error {
  color: var(--error-color);
  fill: var(--error-color);
}
`,CA=`
.btn-group {
  display: grid;
  gap: 8px;
}

.btn {
  line-height: inherit;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  cursor: pointer;
  font-family: inherit;
  font-size: var(--button-font-size, inherit);
  font-weight: var(--button-font-weight, 600);
  padding: var(--button-padding, 6px 16px);
}
.btn[disabled] {
  opacity: 0.6;
  pointer-events: none;
}

.btn--primary {
  color: var(--button-primary-color, var(--accent-foreground));
  fill: var(--button-primary-color, var(--accent-foreground));
  background: var(--button-primary-background, var(--accent-background));
  border: var(--button-primary-border, var(--border));
  border-radius: var(--button-primary-border-radius, 6px);
  font-weight: var(--button-primary-font-weight, 500);
}
.btn--primary:hover {
  color: var(--button-primary-hover-color, var(--accent-foreground));
  fill: var(--button-primary-hover-color, var(--accent-foreground));
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
}
.btn--primary:focus-visible {
  background: var(--button-primary-hover-background, var(--accent-background));
  filter: var(--interactive-filter);
  outline: var(--button-primary-focus-outline, var(--outline));
}

.btn--default {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-background, var(--background));
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  font-weight: var(--button-font-weight, 500);
}
.btn--default:hover {
  color: var(--button-color, var(--foreground));
  fill: var(--button-color, var(--foreground));
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
}
.btn--default:focus-visible {
  background: var(--button-hover-background, var(--background));
  filter: var(--interactive-filter);
  outline: var(--button-focus-outline, var(--outline));
}
`,wA=`
.success__position {
  position: fixed;
  inset: var(--dialog-inset);
  padding: var(--page-margin);
  z-index: var(--z-index);
}
.success__content {
  background: var(--success-background, var(--background));
  border: var(--success-border, var(--border));
  border-radius: var(--success-border-radius, 1.7em/50%);
  box-shadow: var(--success-box-shadow, var(--box-shadow));
  font-weight: var(--success-font-weight, 600);
  color: var(--success-color);
  fill: var(--success-color);
  padding: 12px 24px;
  line-height: 1.75em;

  display: grid;
  align-items: center;
  grid-auto-flow: column;
  gap: 6px;
  cursor: default;
}

.success__icon {
  display: flex;
}
`;function kA(e){let t=pe.createElement("style");return t.textContent=`
:host {
  --dialog-inset: var(--inset);
}

${RA}
${vA}
${NA}
${CA}
${wA}
`,e&&t.setAttribute("nonce",e),t}function xA(){let e=O().getUser(),t=ce().getUser(),n=ct().getUser();return e&&Object.keys(e).length?e:t&&Object.keys(t).length?t:n}var s_=(()=>({name:"FeedbackModal",setupOnce(){},createDialog:({options:e,screenshotIntegration:t,sendFeedback:n,shadow:r})=>{let o=r,i=e.useSentryUser,s=xA(),a=pe.createElement("div"),c=kA(e.styleNonce),u="",d={get el(){return a},appendToDom(){!o.contains(c)&&!o.contains(a)&&(o.appendChild(c),o.appendChild(a))},removeFromDom(){a.remove(),c.remove(),pe.body.style.overflow=u},open(){f(!0),e.onFormOpen?.(),T()?.emit("openFeedbackWidget"),u=pe.body.style.overflow,pe.body.style.overflow="hidden"},close(){f(!1),pe.body.style.overflow=u}},l=t?.createInput({h:V,hooks:_A,dialog:d,options:e}),f=p=>{sA(V(AA,{options:e,screenshotInput:l,showName:e.showName||e.isNameRequired,showEmail:e.showEmail||e.isEmailRequired,defaultName:i&&s?.[i.name]||"",defaultEmail:i&&s?.[i.email]||"",onFormClose:()=>{f(!1),e.onFormClose?.()},onSubmit:n,onSubmitSuccess:(m,_)=>{f(!1),e.onSubmitSuccess?.(m,_)},onSubmitError:m=>{e.onSubmitError?.(m)},onFormSubmitted:()=>{e.onFormSubmitted?.()},open:p}),a)};return d}}));function OA({h:e}){return function(){return e("svg",{"data-test-id":"icon-close",viewBox:"0 0 16 16",fill:"#2B2233",height:"25px",width:"25px"},e("circle",{r:"7",cx:"8",cy:"8",fill:"white"}),e("path",{strokeWidth:"1.5",d:"M8,16a8,8,0,1,1,8-8A8,8,0,0,1,8,16ZM8,1.53A6.47,6.47,0,1,0,14.47,8,6.47,6.47,0,0,0,8,1.53Z"}),e("path",{strokeWidth:"1.5",d:"M5.34,11.41a.71.71,0,0,1-.53-.22.74.74,0,0,1,0-1.06l5.32-5.32a.75.75,0,0,1,1.06,1.06L5.87,11.19A.74.74,0,0,1,5.34,11.41Z"}),e("path",{strokeWidth:"1.5",d:"M10.66,11.41a.74.74,0,0,1-.53-.22L4.81,5.87A.75.75,0,0,1,5.87,4.81l5.32,5.32a.74.74,0,0,1,0,1.06A.71.71,0,0,1,10.66,11.41Z"}))}}function MA(e){let t=pe.createElement("style"),n="#1A141F",r="#302735";return t.textContent=`
.editor {
  display: flex;
  flex-grow: 1;
  flex-direction: column;
}

.editor__image-container {
  justify-items: center;
  padding: 15px;
  position: relative;
  height: 100%;
  border-radius: var(--menu-border-radius, 6px);

  background-color: ${n};
  background-image: repeating-linear-gradient(
      -145deg,
      transparent,
      transparent 8px,
      ${n} 8px,
      ${n} 11px
    ),
    repeating-linear-gradient(
      -45deg,
      transparent,
      transparent 15px,
      ${r} 15px,
      ${r} 16px
    );
}

.editor__canvas-container {
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.editor__canvas-container > * {
  object-fit: contain;
  position: absolute;
}

.editor__tool-container {
  padding-top: 8px;
  display: flex;
  justify-content: center;
}

.editor__tool-bar {
  display: flex;
  gap: 8px;
}

.editor__tool {
  display: flex;
  padding: 8px 12px;
  justify-content: center;
  align-items: center;
  border: var(--button-border, var(--border));
  border-radius: var(--button-border-radius, 6px);
  background: var(--button-background, var(--background));
  color: var(--button-color, var(--foreground));
}

.editor__tool--active {
  background: var(--button-primary-background, var(--accent-background));
  color: var(--button-primary-color, var(--accent-foreground));
}

.editor__rect {
  position: absolute;
  z-index: 2;
}

.editor__rect button {
  opacity: 0;
  position: absolute;
  top: -12px;
  right: -12px;
  cursor: pointer;
  padding: 0;
  z-index: 3;
  border: none;
  background: none;
}

.editor__rect:hover button {
  opacity: 1;
}
`,e&&t.setAttribute("nonce",e),t}function LA({h:e}){return function({action:n,setAction:r,options:o}){return e("div",{class:"editor__tool-container"},e("div",{class:"editor__tool-bar"},e("button",{type:"button",class:`editor__tool ${n==="highlight"?"editor__tool--active":""}`,onClick:()=>{r(n==="highlight"?"":"highlight")}},o.highlightToolText),e("button",{type:"button",class:`editor__tool ${n==="hide"?"editor__tool--active":""}`,onClick:()=>{r(n==="hide"?"":"hide")}},o.hideToolText)))}}function PA({hooks:e}){function t(){let[n,r]=e.useState(nn.devicePixelRatio??1);return e.useEffect(()=>{let o=()=>{r(nn.devicePixelRatio)},i=matchMedia(`(resolution: ${nn.devicePixelRatio}dppx)`);return i.addEventListener("change",o),()=>{i.removeEventListener("change",o)}},[]),n}return function({onBeforeScreenshot:r,onScreenshot:o,onAfterScreenshot:i,onError:s}){let a=t();e.useEffect(()=>{(async()=>{r();let u=await Pi.mediaDevices.getDisplayMedia({video:{width:nn.innerWidth*a,height:nn.innerHeight*a},audio:!1,monitorTypeSurfaces:"exclude",preferCurrentTab:!0,selfBrowserSurface:"include",surfaceSwitching:"exclude"}),d=pe.createElement("video");await new Promise((l,f)=>{d.srcObject=u,d.onloadedmetadata=()=>{o(d,a),u.getTracks().forEach(p=>p.stop()),l()},d.play().catch(f)}),i()})().catch(s)},[])}}function UA(e,t,n){switch(e.type){case"highlight":{t.shadowColor="rgba(0, 0, 0, 0.7)",t.shadowBlur=50,t.fillStyle=n,t.fillRect(e.x-1,e.y-1,e.w+2,e.h+2),t.clearRect(e.x,e.y,e.w,e.h);break}case"hide":t.fillStyle="rgb(0, 0, 0)",t.fillRect(e.x,e.y,e.w,e.h);break}}function er(e,t,n){if(!e)return;let r=e.getContext("2d",t);r&&n(e,r)}function Ul(e,t){er(e,{alpha:!0},(n,r)=>{r.drawImage(t,0,0,t.width,t.height,0,0,n.width,n.height)})}function Dl(e,t,n){er(e,{alpha:!0},(r,o)=>{n.length&&(o.fillStyle="rgba(0, 0, 0, 0.25)",o.fillRect(0,0,r.width,r.height)),n.forEach(i=>{UA(i,o,t)})})}function DA({h:e,hooks:t,outputBuffer:n,dialog:r,options:o}){let i=PA({hooks:t}),s=LA({h:e}),a=OA({h:e}),c={__html:MA(o.styleNonce).innerText},u=r.el.style,d=({screenshot:l})=>{let[f,p]=t.useState("highlight"),[m,_]=t.useState([]),g=t.useRef(null),S=t.useRef(null),b=t.useRef(null),D=t.useRef(null),[M,z]=t.useState(1),B=t.useMemo(()=>{let C=pe.getElementById(o.id);if(!C)return"white";let P=getComputedStyle(C);return P.getPropertyValue("--button-primary-background")||P.getPropertyValue("--accent-background")},[o.id]);t.useLayoutEffect(()=>{let C=()=>{let P=g.current;P&&(er(l.canvas,{alpha:!1},F=>{let te=Math.min(P.clientWidth/F.width,P.clientHeight/F.height);z(te)}),(P.clientHeight===0||P.clientWidth===0)&&setTimeout(C,0))};return C(),nn.addEventListener("resize",C),()=>{nn.removeEventListener("resize",C)}},[l]);let E=t.useCallback((C,P)=>{er(C,{alpha:!0},(F,te)=>{te.scale(P,P),F.width=l.canvas.width,F.height=l.canvas.height})},[l]);t.useEffect(()=>{E(S.current,l.dpi),Ul(S.current,l.canvas)},[l]),t.useEffect(()=>{E(b.current,l.dpi),er(b.current,{alpha:!0},(C,P)=>{P.clearRect(0,0,C.width,C.height)}),Dl(b.current,B,m)},[m,B]),t.useEffect(()=>{E(n,l.dpi),Ul(n,l.canvas),er(pe.createElement("canvas"),{alpha:!0},(C,P)=>{P.scale(l.dpi,l.dpi),C.width=l.canvas.width,C.height=l.canvas.height,Dl(C,B,m),Ul(n,C)})},[m,l,B]);let k=C=>{if(!f||!D.current)return;let P=D.current.getBoundingClientRect(),F={type:f,x:C.offsetX/M,y:C.offsetY/M},te=(R,q)=>{let N=(q.clientX-P.x)/M,Y=(q.clientY-P.y)/M;return{type:R.type,x:Math.min(R.x,N),y:Math.min(R.y,Y),w:Math.abs(N-R.x),h:Math.abs(Y-R.y)}},ee=R=>{er(b.current,{alpha:!0},(q,N)=>{N.clearRect(0,0,q.width,q.height)}),Dl(b.current,B,[...m,te(F,R)])},ue=R=>{let q=te(F,R);q.w*M>=1&&q.h*M>=1&&_(N=>[...N,q]),pe.removeEventListener("mousemove",ee),pe.removeEventListener("mouseup",ue)};pe.addEventListener("mousemove",ee),pe.addEventListener("mouseup",ue)},G=t.useCallback(C=>P=>{P.preventDefault(),P.stopPropagation(),_(F=>{let te=[...F];return te.splice(C,1),te})},[]),A={width:`${l.canvas.width*M}px`,height:`${l.canvas.height*M}px`},x=C=>{C.stopPropagation()};return e("div",{class:"editor"},e("style",{nonce:o.styleNonce,dangerouslySetInnerHTML:c}),e("div",{class:"editor__image-container"},e("div",{class:"editor__canvas-container",ref:g},e("canvas",{ref:S,id:"background",style:A}),e("canvas",{ref:b,id:"foreground",style:A}),e("div",{ref:D,onMouseDown:k,style:A},m.map((C,P)=>e("div",{key:P,class:"editor__rect",style:{top:`${C.y*M}px`,left:`${C.x*M}px`,width:`${C.w*M}px`,height:`${C.h*M}px`}},e("button",{"aria-label":o.removeHighlightText,onClick:G(P),onMouseDown:x,onMouseUp:x,type:"button"},e(a,null))))))),e(s,{options:o,action:f,setAction:p}))};return function({onError:f}){let[p,m]=t.useState();return i({onBeforeScreenshot:t.useCallback(()=>{u.display="none"},[]),onScreenshot:t.useCallback((_,g)=>{er(pe.createElement("canvas"),{alpha:!1},(S,b)=>{b.scale(g,g),S.width=_.videoWidth,S.height=_.videoHeight,b.drawImage(_,0,0,S.width,S.height),m({canvas:S,dpi:g})}),n.width=_.videoWidth,n.height=_.videoHeight},[]),onAfterScreenshot:t.useCallback(()=>{u.display="block"},[]),onError:t.useCallback(_=>{u.display="block",f(_)},[])}),p?e(d,{screenshot:p}):e("div",null)}}var a_=(()=>({name:"FeedbackScreenshot",setupOnce(){},createInput:({h:e,hooks:t,dialog:n,options:r})=>{let o=pe.createElement("canvas");return{input:DA({h:e,hooks:t,outputBuffer:o,dialog:n,options:r}),value:async()=>{let i=await new Promise(s=>{o.toBlob(s,"image/png")});if(i)return{data:new Uint8Array(await i.arrayBuffer()),filename:"screenshot.png",contentType:"application/png"}}}}}));var w=v,Vl=0;function Kl(){return Vl>0}function BA(){Vl++,setTimeout(()=>{Vl--})}function wr(e,t={}){function n(o){return typeof o=="function"}if(!n(e))return e;try{let o=e.__sentry_wrapped__;if(o)return typeof o=="function"?o:e;if(ur(e))return e}catch{return e}let r=function(...o){try{let i=o.map(s=>wr(s,t));return e.apply(this,i)}catch(i){throw BA(),Pe(s=>{s.addEventProcessor(a=>(t.mechanism&&($r(a,void 0,void 0),Xe(a,t.mechanism)),a.extra={...a.extra,arguments:o},a)),X(i)}),i}};try{for(let o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch{}Ss(r,e),ye(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Fi(){let e=st(),{referrer:t}=w.document||{},{userAgent:n}=w.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}var FA={replayIntegration:"replay",replayCanvasIntegration:"replay-canvas",feedbackIntegration:"feedback",feedbackModalIntegration:"feedback-modal",feedbackScreenshotIntegration:"feedback-screenshot",captureConsoleIntegration:"captureconsole",contextLinesIntegration:"contextlines",linkedErrorsIntegration:"linkederrors",dedupeIntegration:"dedupe",extraErrorDataIntegration:"extraerrordata",graphqlClientIntegration:"graphqlclient",httpClientIntegration:"httpclient",reportingObserverIntegration:"reportingobserver",rewriteFramesIntegration:"rewriteframes",browserProfilingIntegration:"browserprofiling",moduleMetadataIntegration:"modulemetadata",instrumentAnthropicAiClient:"instrumentanthropicaiclient",instrumentOpenAiClient:"instrumentopenaiclient",instrumentGoogleGenAIClient:"instrumentgooglegenaiclient",instrumentLangGraph:"instrumentlanggraph",createLangChainCallbackHandler:"createlangchaincallbackhandler"},c_=w;async function Na(e,t){let n=FA[e],r=c_.Sentry=c_.Sentry||{};if(!n)throw new Error(`Cannot lazy load integration: ${e}`);let o=r[e];if(typeof o=="function"&&!("_isShim"in o))return o;let i=HA(n),s=w.document.createElement("script");s.src=i,s.crossOrigin="anonymous",s.referrerPolicy="strict-origin",t&&s.setAttribute("nonce",t);let a=new Promise((l,f)=>{s.addEventListener("load",()=>l()),s.addEventListener("error",f)}),c=w.document.currentScript,u=w.document.body||w.document.head||c?.parentElement;if(u)u.appendChild(s);else throw new Error(`Could not find parent element to insert lazy-loaded ${e} script`);try{await a}catch{throw new Error(`Error when loading integration: ${e}`)}let d=r[e];if(typeof d!="function")throw new Error(`Could not load integration: ${e}`);return d}function HA(e){let n=T()?.getOptions()?.cdnBaseUrl||"https://browser.sentry-cdn.com";return new URL(`/${_t}/${e}.min.js`,n).toString()}var u_=Ra({lazyLoadIntegration:Na});var Jl=Ra({getModalIntegration:()=>s_,getScreenshotIntegration:()=>a_});function ho(e,t){let n=Zl(e,t),r={type:zA(t),value:qA(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function GA(e,t,n,r){let i=T()?.getOptions().normalizeDepth,s=KA(t),a={__serialized__:Ps(t,i)};if(s)return{exception:{values:[ho(e,s)]},extra:a};let c={exception:{values:[{type:cr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:YA(t,{isUnhandledRejection:r})}]},extra:a};if(n){let u=Zl(e,n);u.length&&(c.exception.values[0].stacktrace={frames:u})}return c}function Xl(e,t){return{exception:{values:[ho(e,t)]}}}function Zl(e,t){let n=t.stacktrace||t.stack||"",r=WA(t),o=jA(t);try{return e(n,r,o)}catch{}return[]}var $A=/Minified React error #\d+;/i;function WA(e){return e&&$A.test(e.message)?1:0}function jA(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function l_(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function zA(e){let t=e?.name;return!t&&l_(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function qA(e){let t=e?.message;return l_(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Ca(e,t,n,r){let o=n?.syntheticException||void 0,i=_o(e,t,o,r);return Xe(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),jn(i)}function wa(e,t,n="info",r,o){let i=r?.syntheticException||void 0,s=Ql(e,t,i,o);return s.level=n,r?.event_id&&(s.event_id=r.event_id),jn(s)}function _o(e,t,n,r,o){let i;if(hs(t)&&t.error)return Xl(e,t.error);if(_s(t)||jc(t)){let s=t;if("stack"in t)i=Xl(e,t);else{let a=s.name||(_s(s)?"DOMError":"DOMException"),c=s.message?`${a}: ${s.message}`:a;i=Ql(e,c,n,r),$r(i,c)}return"code"in s&&(i.tags={...i.tags,"DOMException.code":`${s.code}`}),i}return St(t)?Xl(e,t):We(t)||cr(t)?(i=GA(e,t,n,o),Xe(i,{synthetic:!0}),i):(i=Ql(e,t,n,r),$r(i,`${t}`,void 0),Xe(i,{synthetic:!0}),i)}function Ql(e,t,n,r){let o={};if(r&&n){let i=Zl(e,n);i.length&&(o.exception={values:[{value:t,stacktrace:{frames:i}}]}),Xe(o,{synthetic:!0})}if(Dn(t)){let{__sentry_template_string__:i,__sentry_template_values__:s}=t;return o.logentry={message:i,params:s},o}return o.message=t,o}function YA(e,{isUnhandledRejection:t}){let n=Kc(e),r=t?"promise rejection":"exception";return hs(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:cr(e)?`Event \`${VA(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function VA(e){try{let t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function KA(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t)){let n=e[t];if(n instanceof Error)return n}}var go=class extends yi{constructor(t){let n=JA(t),r=w.SENTRY_SDK_SOURCE||Ol();Vu(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);let{sendDefaultPii:o,sendClientReports:i,enableLogs:s,_experiments:a,enableMetrics:c}=this._options,u=c??a?.enableMetrics??!0;w.document&&(i||s||u)&&w.document.addEventListener("visibilitychange",()=>{w.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),s&&Qr(this),u&&Zr(this))}),o&&this.on("beforeSendSession",Yu)}eventFromException(t,n){return Ca(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return wa(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,o){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,o)}};function JA(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:w.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}var zt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;var U=v;var XA=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",_n=(e,t,n,r)=>{let o,i;return s=>{t.value>=0&&(s||r)&&(i=t.value-(o??0),(i||o===void 0)&&(o=t.value,t.delta=i,t.rating=XA(t.value,n),e(t)))}};var Cn=(e=!0)=>{let t=U.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t};var qt=()=>Cn()?.activationStart??0;function rn(e,t,n){U.document&&U.addEventListener(e,t,n)}function So(e,t,n){U.document&&U.removeEventListener(e,t,n)}var Eo=-1,d_=new Set,QA=()=>U.document?.visibilityState==="hidden"&&!U.document?.prerendering?0:1/0,ka=e=>{if(ZA(e)&&Eo>-1){if(e.type==="visibilitychange"||e.type==="pagehide")for(let t of d_)t();isFinite(Eo)||(Eo=e.type==="visibilitychange"?e.timeStamp:0,So("prerenderingchange",ka,!0))}},gn=()=>{if(U.document&&Eo<0){let e=qt();Eo=(U.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??QA(),rn("visibilitychange",ka,!0),rn("pagehide",ka,!0),rn("prerenderingchange",ka,!0)}return{get firstHiddenTime(){return Eo},onHidden(e){d_.add(e)}}};function ZA(e){return e.type==="pagehide"||U.document?.visibilityState==="hidden"}var f_=()=>`v5-${Date.now()}-${Math.floor(Math.random()*8999999999999)+1e12}`;var Sn=(e,t=-1)=>{let n=Cn(),r="navigate";return n&&(U.document?.prerendering||qt()>0?r="prerender":U.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:f_(),navigationType:r}};var ed=new WeakMap;function To(e,t){return ed.get(e)||ed.set(e,new t),ed.get(e)}var xa=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;let n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}};var Yt=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){let r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{t(o.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}};var yo=e=>{let t=!1;return()=>{t||(e(),t=!0)}};var nr=e=>{U.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()};var eR=[1800,3e3],p_=(e,t={})=>{nr(()=>{let n=gn(),r=Sn("FCP"),o,s=Yt("paint",a=>{for(let c of a)c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-qt(),0),r.entries.push(c),o(!0)))});s&&(o=_n(e,r,eR,t.reportAllChanges))})};var tR=[.1,.25],m_=(e,t={})=>{p_(yo(()=>{let n=Sn("CLS",0),r,o=gn(),i=To(t,xa),s=c=>{for(let u of c)i._processEntry(u);i._sessionValue>n.value&&(n.value=i._sessionValue,n.entries=i._sessionEntries,r())},a=Yt("layout-shift",s);a&&(r=_n(e,n,tR,t.reportAllChanges),o.onHidden(()=>{s(a.takeRecords()),r(!0)}),U?.setTimeout?.(r))}))};var h_=0,td=1/0,Oa=0,nR=e=>{e.forEach(t=>{t.interactionId&&(td=Math.min(td,t.interactionId),Oa=Math.max(Oa,t.interactionId),h_=Oa?(Oa-td)/7+1:0)})},nd,rd=()=>nd?h_:performance.interactionCount||0,__=()=>{"interactionCount"in performance||nd||(nd=Yt("event",nR,{type:"event",buffered:!0,durationThreshold:0}))};var od=10,g_=0,rR=()=>rd()-g_,Ma=class e{constructor(){e.prototype.__init.call(this),e.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){g_=rd(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){let t=Math.min(this._longestInteractionList.length-1,Math.floor(rR()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;let n=this._longestInteractionList.at(-1),r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<od||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((o,i)=>i._latency-o._latency),this._longestInteractionList.length>od){let o=this._longestInteractionList.splice(od);for(let i of o)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}};var La=e=>{let t=n=>{(n.type==="pagehide"||U.document?.visibilityState==="hidden")&&e(n)};rn("visibilitychange",t,!0),rn("pagehide",t,!0)};var Pa=e=>{let t=U.requestIdleCallback||U.setTimeout;U.document?.visibilityState==="hidden"?e():(e=yo(e),rn("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),So("visibilitychange",e,{capture:!0})}),La(e))};var oR=[200,500],iR=40,S_=(e,t={})=>{if(!(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype))return;let n=gn();nr(()=>{__();let r=Sn("INP"),o,i=To(t,Ma),s=c=>{Pa(()=>{for(let d of c)i._processEntry(d);let u=i._estimateP98LongestInteraction();u&&u._latency!==r.value&&(r.value=u._latency,r.entries=u.entries,o())})},a=Yt("event",s,{durationThreshold:t.durationThreshold??iR});o=_n(e,r,oR,t.reportAllChanges),a&&(a.observe({type:"first-input",buffered:!0}),n.onHidden(()=>{s(a.takeRecords()),o(!0)}))})};var Ua=class{_processEntry(t){this._onBeforeProcessingEntry?.(t)}};var sR=[2500,4e3],E_=(e,t={})=>{nr(()=>{let n=gn(),r=Sn("LCP"),o,i=To(t,Ua),s=c=>{t.reportAllChanges||(c=c.slice(-1));for(let u of c)i._processEntry(u),u.startTime<n.firstHiddenTime&&(r.value=Math.max(u.startTime-qt(),0),r.entries=[u],o())},a=Yt("largest-contentful-paint",s);if(a){o=_n(e,r,sR,t.reportAllChanges);let c=yo(()=>{s(a.takeRecords()),a.disconnect(),o(!0)}),u=d=>{d.isTrusted&&(Pa(c),So(d.type,u,{capture:!0}))};for(let d of["keydown","click","visibilitychange"])rn(d,u,{capture:!0})}})};var aR=[800,1800],id=e=>{U.document?.prerendering?nr(()=>id(e)):U.document?.readyState!=="complete"?addEventListener("load",()=>id(e),!0):setTimeout(e)},T_=(e,t={})=>{let n=Sn("TTFB"),r=_n(e,n,aR,t.reportAllChanges);id(()=>{let o=Cn();o&&(n.value=Math.max(o.responseStart-qt(),0),n.entries=[o],r(!0))})};var Hi={},Da={},y_,b_,I_,A_;function kr(e,t=!1){return Ba("cls",e,cR,y_,t)}function xr(e,t=!1){return Ba("lcp",e,uR,b_,t)}function sd(e){return Ba("ttfb",e,lR,I_)}function Gi(e){return Ba("inp",e,dR,A_)}function Ft(e,t){return R_(e,t),Da[e]||(fR(e),Da[e]=!0),v_(e,t)}function $i(e,t){let n=Hi[e];if(n?.length)for(let r of n)try{r(t)}catch(o){zt&&h.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${gt(r)}
Error:`,o)}}function cR(){return m_(e=>{$i("cls",{metric:e}),y_=e},{reportAllChanges:!0})}function uR(){return E_(e=>{$i("lcp",{metric:e}),b_=e},{reportAllChanges:!0})}function lR(){return T_(e=>{$i("ttfb",{metric:e}),I_=e})}function dR(){return S_(e=>{$i("inp",{metric:e}),A_=e})}function Ba(e,t,n,r,o=!1){R_(e,t);let i;return Da[e]||(i=n(),Da[e]=!0),r&&t({metric:r}),v_(e,t,o?i:void 0)}function fR(e){let t={};e==="event"&&(t.durationThreshold=0),Yt(e,n=>{$i(e,{entries:n})},t)}function R_(e,t){Hi[e]=Hi[e]||[],Hi[e].push(t)}function v_(e,t,n){return()=>{n&&n();let r=Hi[e];if(!r)return;let o=r.indexOf(t);o!==-1&&r.splice(o,1)}}function N_(e){return"duration"in e}function Fa(e){return typeof e=="number"&&isFinite(e)}function wn(e,t,n,{...r}){let o=L(e).start_timestamp;return o&&o>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Wn(e,()=>{let i=Et({startTime:t,...r});return i&&i.end(n),i})}function bo(e){let t=T();if(!t)return;let{name:n,transaction:r,attributes:o,startTime:i}=e,{release:s,environment:a,sendDefaultPii:c}=t.getOptions(),d=t.getIntegrationByName("Replay")?.getReplayId(),l=O(),f=l.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0,m;try{m=l.getScopeData().contexts.profile.profile_id}catch{}let _={release:s,environment:a,user:p||void 0,profile_id:m||void 0,replay_id:d||void 0,transaction:r,"user_agent.original":U.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...o};return Et({name:n,attributes:_,startTime:i,experimental:{standalone:!0}})}function kn(){return U.addEventListener&&U.performance}function _e(e){return e/1e3}function C_(e){let t="unknown",n="unknown",r="";for(let o of e){if(o==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}function Ha(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function Ga(e,t){let n,r=!1;function o(a){!r&&n&&t(a,n),r=!0}La(()=>{o("pagehide")});let i=e.on("beforeStartNavigationSpan",(a,c)=>{c?.isRedirect||(o("navigation"),i(),s())}),s=e.on("afterStartPageLoadSpan",a=>{n=a.spanContext().spanId,s()})}function w_(e){let t=0,n;if(!Ha("layout-shift"))return;let r=kr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);Ga(e,(o,i)=>{pR(t,n,i,o),r()})}function pR(e,t,n,r){zt&&h.log(`Sending CLS span (${e})`);let o=t?_e((Se()||0)+t.startTime):Q(),i=O().getScopeData().transactionName,s=t?Re(t.sources[0]?.node):"Layout shift",a={[H]:"auto.http.browser.cls",[ie]:"ui.webvital.cls",[jt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((u,d)=>{a[`cls.source.${d+1}`]=Re(u.node)});let c=bo({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("cls",{[dn]:"",[fn]:e}),c.end(o))}function k_(e){let t=0,n;if(!Ha("largest-contentful-paint"))return;let r=xr(({metric:o})=>{let i=o.entries[o.entries.length-1];i&&(t=o.value,n=i)},!0);Ga(e,(o,i)=>{mR(t,n,i,o),r()})}function mR(e,t,n,r){zt&&h.log(`Sending LCP span (${e})`);let o=_e((Se()||0)+(t?.startTime||0)),i=O().getScopeData().transactionName,s=t?Re(t.element):"Largest contentful paint",a={[H]:"auto.http.browser.lcp",[ie]:"ui.webvital.lcp",[jt]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(a["lcp.element"]=Re(t.element)),t.id&&(a["lcp.id"]=t.id),t.url&&(a["lcp.url"]=t.url),t.loadTime!=null&&(a["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(a["lcp.renderTime"]=t.renderTime),t.size!=null&&(a["lcp.size"]=t.size));let c=bo({name:s,transaction:i,attributes:a,startTime:o});c&&(c.addEvent("lcp",{[dn]:"millisecond",[fn]:e}),c.end(o))}function Vt(e){return e&&((Se()||performance.timeOrigin)+e)/1e3}function Wi(e){let t={};if(e.nextHopProtocol!=null){let{name:n,version:r}=C_(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return Se()||kn()?.timeOrigin?hR({...t,"http.request.redirect_start":Vt(e.redirectStart),"http.request.redirect_end":Vt(e.redirectEnd),"http.request.worker_start":Vt(e.workerStart),"http.request.fetch_start":Vt(e.fetchStart),"http.request.domain_lookup_start":Vt(e.domainLookupStart),"http.request.domain_lookup_end":Vt(e.domainLookupEnd),"http.request.connect_start":Vt(e.connectStart),"http.request.secure_connection_start":Vt(e.secureConnectionStart),"http.request.connection_end":Vt(e.connectEnd),"http.request.request_start":Vt(e.requestStart),"http.request.response_start":Vt(e.responseStart),"http.request.response_end":Vt(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function hR(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}var _R=2147483647,x_=0,on={},vt,Wa;function ad({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){let r=kn();if(r&&Se()){r.mark&&U.performance.mark("sentry-tracing-init");let o=t?k_(n):SR(),i=ER(),s=e?w_(n):gR();return()=>{o?.(),i(),s?.()}}return()=>{}}function cd(){Ft("longtask",({entries:e})=>{let t=J();if(!t)return;let{op:n,start_timestamp:r}=L(t);for(let o of e){let i=_e(Se()+o.startTime),s=_e(o.duration);n==="navigation"&&r&&i<r||wn(t,i,i+s,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[H]:"auto.ui.browser.metrics"}})}})}function ud(){new PerformanceObserver(t=>{let n=J();if(n)for(let r of t.getEntries()){if(!r.scripts[0])continue;let o=_e(Se()+r.startTime),{start_timestamp:i,op:s}=L(n);if(s==="navigation"&&i&&o<i)continue;let a=_e(r.duration),c={[H]:"auto.ui.browser.metrics"},u=r.scripts[0],{invoker:d,invokerType:l,sourceURL:f,sourceFunctionName:p,sourceCharPosition:m}=u;c["browser.script.invoker"]=d,c["browser.script.invoker_type"]=l,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),m!==-1&&(c["browser.script.source_char_position"]=m),wn(n,o,o+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function ld(){Ft("event",({entries:e})=>{let t=J();if(t){for(let n of e)if(n.name==="click"){let r=_e(Se()+n.startTime),o=_e(n.duration),i={name:Re(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[H]:"auto.ui.browser.metrics"}},s=Vo(n.target);s&&(i.attributes["ui.component_name"]=s),wn(t,r,r+o,i)}}})}function gR(){return kr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(on.cls={value:e.value,unit:""},Wa=t)},!0)}function SR(){return xr(({metric:e})=>{let t=e.entries[e.entries.length-1];t&&(on.lcp={value:e.value,unit:"millisecond"},vt=t)},!0)}function ER(){return sd(({metric:e})=>{e.entries[e.entries.length-1]&&(on.ttfb={value:e.value,unit:"millisecond"})})}function dd(e,t){let n=kn(),r=Se();if(!n?.getEntries||!r)return;let o=_e(r),i=n.getEntries(),{op:s,start_timestamp:a}=L(e);i.slice(x_).forEach(c=>{let u=_e(c.startTime),d=_e(Math.max(0,c.duration));if(!(s==="navigation"&&a&&o+u<a))switch(c.entryType){case"navigation":{IR(e,c,o);break}case"mark":case"paint":case"measure":{yR(e,c,u,d,o,t.ignorePerformanceApiSpans);let l=gn(),f=c.startTime<l.firstHiddenTime;c.name==="first-paint"&&f&&(on.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(on.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{vR(e,c,c.name,u,d,o,t.ignoreResourceSpans);break}}}),x_=Math.max(i.length-1,0),NR(e),s==="pageload"&&(kR(on),t.recordClsOnPageloadSpan||delete on.cls,t.recordLcpOnPageloadSpan||delete on.lcp,Object.entries(on).forEach(([c,u])=>{si(c,u.value,u.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",qt()),CR(e,t)),vt=void 0,Wa=void 0,on={}}function TR(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components \u269B"}catch{return}}function yR(e,t,n,r,o,i){if(TR(t)||["mark","measure"].includes(t.entryType)&&je(t.name,i))return;let s=Cn(!1),a=_e(s?s.requestStart:0),c=o+Math.max(n,a),u=o+n,d=u+r,l={[H]:"auto.resource.browser.metrics"};c!==u&&(l["sentry.browser.measure_happened_before_request"]=!0,l["sentry.browser.measure_start_time"]=c),bR(l,t),c<=d&&wn(e,c,d,{name:t.name,op:t.entryType,attributes:l})}function bR(e,t){try{let n=t.detail;if(!n)return;if(typeof n=="object"){for(let[r,o]of Object.entries(n))if(o&&it(o))e[`sentry.browser.measure.detail.${r}`]=o;else if(o!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(o)}catch{}return}if(it(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function IR(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{$a(e,t,r,n)}),$a(e,t,"secureConnection",n,"TLS/SSL"),$a(e,t,"fetch",n,"cache"),$a(e,t,"domainLookup",n,"DNS"),RR(e,t,n)}function $a(e,t,n,r,o=n){let i=AR(n),s=t[i],a=t[`${n}Start`];!a||!s||wn(e,r+_e(a),r+_e(s),{op:`browser.${o}`,name:t.name,attributes:{[H]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function AR(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function RR(e,t,n){let r=n+_e(t.requestStart),o=n+_e(t.responseEnd),i=n+_e(t.responseStart);t.responseEnd&&(wn(e,r,o,{op:"browser.request",name:t.name,attributes:{[H]:"auto.ui.browser.metrics"}}),wn(e,i,o,{op:"browser.response",name:t.name,attributes:{[H]:"auto.ui.browser.metrics"}}))}function vR(e,t,n,r,o,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;let a=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(s?.includes(a))return;let c={[H]:"auto.resource.browser.metrics"},u=Zt(n);u.protocol&&(c["url.scheme"]=u.protocol.split(":").pop()),u.host&&(c["server.address"]=u.host),c["url.same_origin"]=n.includes(U.location.origin),wR(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);let d={...c,...Wi(t)},l=i+r,f=l+o;wn(e,l,f,{name:n.replace(U.location.origin,""),op:a,attributes:d})}function NR(e){let t=U.navigator;if(!t)return;let n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Fa(n.rtt)&&(on["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Fa(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),Fa(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function CR(e,t){vt&&t.recordLcpOnPageloadSpan&&(vt.element&&e.setAttribute("lcp.element",Re(vt.element)),vt.id&&e.setAttribute("lcp.id",vt.id),vt.url&&e.setAttribute("lcp.url",vt.url.trim().slice(0,200)),vt.loadTime!=null&&e.setAttribute("lcp.loadTime",vt.loadTime),vt.renderTime!=null&&e.setAttribute("lcp.renderTime",vt.renderTime),e.setAttribute("lcp.size",vt.size)),Wa?.sources&&t.recordClsOnPageloadSpan&&Wa.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,Re(n.node)))}function wR(e,t,n){n.forEach(([r,o])=>{let i=e[r];i!=null&&(typeof i=="number"&&i<_R||typeof i=="string")&&(t[o]=i)})}function kR(e){let t=Cn(!1);if(!t)return;let{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function fd(){return kn()&&Se()?Ft("element",xR):()=>{}}var xR=({entries:e})=>{let t=J(),n=t?Z(t):void 0,r=n?L(n).description:O().getScopeData().transactionName;e.forEach(o=>{let i=o;if(!i.identifier)return;let s=i.name,a=i.renderTime,c=i.loadTime,[u,d]=c?[_e(c),"load-time"]:a?[_e(a),"render-time"]:[Q(),"entry-emission"],l=s==="image-paint"?_e(Math.max(0,(a??0)-(c??0))):0,f={[H]:"auto.ui.browser.elementtiming",[ie]:"ui.elementtiming",[ve]:"component","sentry.span_start_time_source":d,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":s};qe({name:`element[${i.identifier}]`,attributes:f,startTime:u,onlyIfParent:!0},p=>{p.end(u+l)})})};var OR=1e3,O_,pd,md;function ji(e){Ke("dom",e),Je("dom",MR)}function MR(){if(!U.document)return;let e=Oe.bind(null,"dom"),t=M_(e,!0);U.document.addEventListener("click",t,!1),U.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{let o=U[n]?.prototype;o?.hasOwnProperty?.("addEventListener")&&(ge(o,"addEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},d=u[s]=u[s]||{refCount:0};if(!d.handler){let l=M_(e);d.handler=l,i.call(this,s,l,c)}d.refCount++}catch{}return i.call(this,s,a,c)}}),ge(o,"removeEventListener",function(i){return function(s,a,c){if(s==="click"||s=="keypress")try{let u=this.__sentry_instrumentation_handlers__||{},d=u[s];d&&(d.refCount--,d.refCount<=0&&(i.call(this,s,d.handler,c),d.handler=void 0,delete u[s]),Object.keys(u).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,a,c)}}))})}function LR(e){if(e.type!==pd)return!1;try{if(!e.target||e.target._sentryId!==md)return!1}catch{}return!0}function PR(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function M_(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;let r=UR(n);if(PR(n.type,r))return;ye(n,"_sentryCaptured",!0),r&&!r._sentryId&&ye(r,"_sentryId",le());let o=n.type==="keypress"?"input":n.type;LR(n)||(e({event:n,name:o,global:t}),pd=n.type,md=r?r._sentryId:void 0),clearTimeout(O_),O_=U.setTimeout(()=>{md=void 0,pd=void 0},OR)}}function UR(e){try{return e.target}catch{return null}}var ja;function xn(e){let t="history";Ke(t,e),Je(t,DR)}function DR(){if(U.addEventListener("popstate",()=>{let t=U.location.href,n=ja;if(ja=t,n===t)return;Oe("history",{from:n,to:t})}),!Nl())return;function e(t){return function(...n){let r=n.length>2?n[2]:void 0;if(r){let o=ja,i=BR(String(r));if(ja=i,o===i)return t.apply(this,n);Oe("history",{from:o,to:i})}return t.apply(this,n)}}ge(U.history,"pushState",e),ge(U.history,"replaceState",e)}function BR(e){try{return new URL(e,U.location.origin).toString()}catch{return e}}var za={};function Io(e){let t=za[e];if(t)return t;let n=U[e];if(Mi(n))return za[e]=n.bind(U);let r=U.document;if(r&&typeof r.createElement=="function")try{let o=r.createElement("iframe");o.hidden=!0,r.head.appendChild(o);let i=o.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(o)}catch(o){zt&&h.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,o)}return n&&(za[e]=n.bind(U))}function hd(e){za[e]=void 0}function Or(...e){return Io("setTimeout")(...e)}var ft="__sentry_xhr_v3__";function Mr(e){Ke("xhr",e),Je("xhr",FR)}function FR(){if(!U.XMLHttpRequest)return;let e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){let o=new Error,i=Q()*1e3,s=Be(r[0])?r[0].toUpperCase():void 0,a=HR(r[1]);if(!s||!a)return t.apply(n,r);n[ft]={method:s,url:a,request_headers:{}},s==="POST"&&a.match(/sentry_key/)&&(n.__sentry_own_request__=!0);let c=()=>{let u=n[ft];if(u&&n.readyState===4){try{u.status_code=n.status}catch{}let d={endTimestamp:Q()*1e3,startTimestamp:i,xhr:n,virtualError:o};Oe("xhr",d)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(u,d,l){return c(),u.apply(d,l)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(u,d,l){let[f,p]=l,m=d[ft];return m&&Be(f)&&Be(p)&&(m.request_headers[f.toLowerCase()]=p),u.apply(d,l)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){let o=n[ft];if(!o)return t.apply(n,r);r[0]!==void 0&&(o.body=r[0]);let i={startTimestamp:Q()*1e3,xhr:n};return Oe("xhr",i),t.apply(n,r)}})}function HR(e){if(Be(e))return e;try{return e.toString()}catch{}}function qa(e){return new URLSearchParams(e).toString()}function Lr(e,t=h){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[qa(e)];if(!e)return[void 0]}catch(n){return zt&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return zt&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Ao(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function zi(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return zt&&h.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return i&&(n[o.toLowerCase()]=i),n},{}):{}}var _d=[],Ya=new Map,Ro=new Map,GR=60;function Sd(){if(kn()&&Se()){let t=$R();return()=>{t()}}return()=>{}}var gd={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function $R(){return Gi(WR)}var WR=({metric:e})=>{if(e.value==null)return;let t=_e(e.value);if(t>GR)return;let n=e.entries.find(m=>m.duration===e.value&&gd[m.name]);if(!n)return;let{interactionId:r}=n,o=gd[n.name],i=_e(Se()+n.startTime),s=J(),a=s?Z(s):void 0,c=r!=null?Ya.get(r):void 0,u=c?.span||a,d=u?L(u).description:O().getScopeData().transactionName,l=c?.elementName||Re(n.target),f={[H]:"auto.http.browser.inp",[ie]:`ui.interaction.${o}`,[jt]:n.duration},p=bo({name:l,transaction:d,attributes:f,startTime:i});p&&(p.addEvent("inp",{[dn]:"millisecond",[fn]:e.value}),p.end(i+t))};function Ed(){let e=Object.keys(gd);Zn()&&e.forEach(o=>{U.addEventListener(o,t,{capture:!0,passive:!0})});function t(o){let i=o.target;if(!i)return;let s=Re(i),a=Math.round(o.timeStamp);if(Ro.set(a,s),Ro.size>50){let c=Ro.keys().next().value;c!==void 0&&Ro.delete(c)}}function n(o){let i=Math.round(o.startTime),s=Ro.get(i);if(!s)for(let a=-5;a<=5;a++){let c=Ro.get(i+a);if(c){s=c;break}}return s||"<unknown>"}let r=({entries:o})=>{let i=J(),s=i&&Z(i);o.forEach(a=>{if(!N_(a))return;let c=a.interactionId;if(c==null||Ya.has(c))return;let u=a.target?Re(a.target):n(a);if(_d.length>10){let d=_d.shift();Ya.delete(d)}_d.push(c),Ya.set(c,{span:s,elementName:u})})};Ft("event",r),Ft("first-input",r)}var jR=40;function vo(e,t=Io("fetch")){let n=0,r=0;async function o(i){let s=i.body.length;n+=s,r++;let a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{let c=await t(e.url,a);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw hd("fetch"),c}finally{n-=s,r--}}return Ti(e,o,Sr(e.bufferSize||jR))}var I=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function zR(){let e=T();if(!e){I&&h.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){I&&h.warn("BrowserProfiling integration is not available");return}e.emit("startUIProfiler")}function qR(){let e=T();if(!e){I&&h.warn("No Sentry client available, profiling is not started");return}if(!e.getIntegrationByName("BrowserProfiling")){I&&h.warn("ProfilingIntegration is not available");return}e.emit("stopUIProfiler")}var L_={startProfiler:zR,stopProfiler:qR};var YR=10,VR=20,KR=30,JR=40,XR=50;function No(e,t,n,r){let o={filename:e,function:t==="<anonymous>"?"?":t,in_app:!0};return n!==void 0&&(o.lineno=n),r!==void 0&&(o.colno=r),o}var QR=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,ZR=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,ev=/\((\S*)(?::(\d+))(?::(\d+))\)/,tv=/at (.+?) ?\(data:(.+?),/,nv=e=>{let t=e.match(tv);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};let n=QR.exec(e);if(n){let[,o,i,s]=n;return No(o,"?",+i,+s)}let r=ZR.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){let a=ev.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}let[i,s]=B_(r[1]||"?",r[2]);return No(s,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Td=[KR,nv],rv=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ov=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,iv=e=>{let t=rv.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){let i=ov.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],o=t[1]||"?";return[o,r]=B_(o,r),No(r,o,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},yd=[XR,iv],sv=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,av=e=>{let t=sv.exec(e);return t?No(t[2],t[1]||"?",+t[3],t[4]?+t[4]:void 0):void 0},P_=[JR,av],cv=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,uv=e=>{let t=cv.exec(e);return t?No(t[2],t[3]||"?",+t[1]):void 0},U_=[YR,uv],lv=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\(.*\))? in (.*):\s*$/i,dv=e=>{let t=lv.exec(e);return t?No(t[5],t[3]||t[4]||"?",+t[1],+t[2]):void 0},D_=[VR,dv],bd=[Td,yd],Va=fs(...bd),B_=(e,t)=>{let n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:"?",n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]};function F_(e,{metadata:t,tunnel:n,dsn:r}){let o={event_id:e.event_id,sent_at:new Date().toISOString(),...t?.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Fe(r)}},i=fv(e);return xe(o,[i])}function fv(e){return[{type:"user_report"},e]}var Ka=1024,pv="Breadcrumbs",mv=((e={})=>{let t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:pv,setup(n){t.console&&yr(gv(n)),t.dom&&ji(_v(n,t.dom)),t.xhr&&Mr(Sv(n)),t.fetch&&Rr(Ev(n)),t.history&&xn(Tv(n)),t.sentry&&n.on("beforeSendEvent",hv(n))}}}),Ja=mv;function hv(e){return function(n){T()===e&&lt({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:ln(n)},{event:n})}}function _v(e,t){return function(r){if(T()!==e)return;let o,i,s=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>Ka&&(I&&h.warn(`\`dom.maxStringLength\` cannot exceed ${Ka}, but a value of ${a} was configured. Sentry will use ${Ka} instead.`),a=Ka),typeof s=="string"&&(s=[s]);try{let u=r.event,d=yv(u)?u.target:u;o=Re(d,{keyAttrs:s,maxStringLength:a}),i=Vo(d)}catch{o="<unknown>"}if(o.length===0)return;let c={category:`ui.${r.name}`,message:o};i&&(c.data={"ui.component_name":i}),lt(c,{event:r.event,name:r.name,global:r.global})}}function gv(e){return function(n){if(T()!==e)return;let r={category:"console",data:{arguments:n.args,logger:"console"},level:Yn(n.level),message:lr(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${lr(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;lt(r,{input:n.args,level:n.level})}}function Sv(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n,i=n.xhr[ft];if(!r||!o||!i)return;let{method:s,url:a,status_code:c,body:u}=i,d={method:s,url:a,status_code:c},l={xhr:n.xhr,input:u,startTimestamp:r,endTimestamp:o},f={category:"xhr",data:d,type:"http",level:ha(c)};e.emit("beforeOutgoingRequestBreadcrumb",f,l),lt(f,l)}}function Ev(e){return function(n){if(T()!==e)return;let{startTimestamp:r,endTimestamp:o}=n;if(o&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){let i=n.fetchData,s={data:n.error,input:n.args,startTimestamp:r,endTimestamp:o},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,s),lt(a,s)}else{let i=n.response,s={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;let a={input:n.args,response:i,startTimestamp:r,endTimestamp:o},c={category:"fetch",data:s,type:"http",level:ha(s.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),lt(c,a)}}}function Tv(e){return function(n){if(T()!==e)return;let r=n.from,o=n.to,i=Zt(w.location.href),s=r?Zt(r):void 0,a=Zt(o);s?.path||(s=i),i.protocol===a.protocol&&i.host===a.host&&(o=a.relative),i.protocol===s.protocol&&i.host===s.host&&(r=s.relative),lt({category:"navigation",data:{from:r,to:o}})}}function yv(e){return!!e&&!!e.target}var bv=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Iv="BrowserApiErrors",Av=((e={})=>{let t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:Iv,setupOnce(){t.setTimeout&&ge(w,"setTimeout",H_),t.setInterval&&ge(w,"setInterval",H_),t.requestAnimationFrame&&ge(w,"requestAnimationFrame",Rv),t.XMLHttpRequest&&"XMLHttpRequest"in w&&ge(XMLHttpRequest.prototype,"send",vv);let n=t.eventTarget;n&&(Array.isArray(n)?n:bv).forEach(o=>Nv(o,t))}}}),Xa=Av;function H_(e){return function(...t){let n=t[0];return t[0]=wr(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${gt(e)}`}}),e.apply(this,t)}}function Rv(e){return function(t){return e.apply(this,[wr(t,{mechanism:{data:{handler:gt(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function vv(e){return function(...t){let n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(o=>{o in n&&typeof n[o]=="function"&&ge(n,o,function(i){let s={mechanism:{data:{handler:gt(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${o}`}},a=ur(i);return a&&(s.mechanism.data.handler=gt(a)),wr(i,s)})}),e.apply(this,t)}}function Nv(e,t){let r=w[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(ge(r,"addEventListener",function(o){return function(i,s,a){try{Cv(s)&&(s.handleEvent=wr(s.handleEvent,{mechanism:{data:{handler:gt(s),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&wv(this,i,s),o.apply(this,[i,wr(s,{mechanism:{data:{handler:gt(s),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),a])}}),ge(r,"removeEventListener",function(o){return function(i,s,a){try{let c=s.__sentry_wrapped__;c&&o.call(this,i,c,a)}catch{}return o.call(this,i,s,a)}}))}function Cv(e){return typeof e.handleEvent=="function"}function wv(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}var Qa=()=>({name:"BrowserSession",setupOnce(){if(typeof w.document>"u"){I&&h.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Kr({ignoreDuration:!0}),Jr(),xn(({from:e,to:t})=>{e!==void 0&&e!==t&&(Kr({ignoreDuration:!0}),Jr())})}});var kv="GlobalHandlers",xv=((e={})=>{let t={onerror:!0,onunhandledrejection:!0,...e};return{name:kv,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Ov(n),G_("onerror")),t.onunhandledrejection&&(Mv(n),G_("onunhandledrejection"))}}}),Za=xv;function Ov(e){zo(t=>{let{stackParser:n,attachStacktrace:r}=$_();if(T()!==e||Kl())return;let{msg:o,url:i,line:s,column:a,error:c}=t,u=Lv(_o(n,c||o,void 0,r,!1),i,s,a);u.level="error",Qt(u,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function Mv(e){qo(t=>{let{stackParser:n,attachStacktrace:r}=$_();if(T()!==e||Kl())return;let o=Id(t),i=it(o)?Ad(o):_o(n,o,void 0,r,!0);i.level="error",Qt(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Id(e){if(it(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Ad(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function Lv(e,t,n,r){let o=e.exception=e.exception||{},i=o.values=o.values||[],s=i[0]=i[0]||{},a=s.stacktrace=s.stacktrace||{},c=a.frames=a.frames||[],u=r,d=n,l=Pv(t)??st();return c.length===0&&c.push({colno:u,filename:l,function:"?",in_app:!0,lineno:d}),e}function G_(e){I&&h.log(`Global Handler attached: ${e}`)}function $_(){return T()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function Pv(e){if(!(!Be(e)||e.length===0)){if(e.startsWith("data:")){let t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e}}var ec=()=>({name:"HttpContext",preprocessEvent(e){if(!w.navigator&&!w.location&&!w.document)return;let t=Fi(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}});var Uv="cause",Dv=5,Bv="LinkedErrors",Fv=((e={})=>{let t=e.limit||Dv,n=e.key||Uv;return{name:Bv,preprocessEvent(r,o,i){let s=i.getOptions();Xu(ho,s.stackParser,n,t,r,o)}}}),tc=Fv;var Hv="SpotlightBrowser",Gv=((e={})=>{let t=e.sidecarUrl||"http://localhost:8969/stream";return{name:Hv,setup:()=>{I&&h.log("Using Sidecar URL",t)},processEvent:n=>Wv(n)?null:n,afterAllSetup:n=>{$v(n,t)}}});function $v(e,t){let n=Io("fetch"),r=0;e.on("beforeEnvelope",o=>{if(r>3){h.warn("[Spotlight] Disabled Sentry -> Spotlight integration due to too many failed requests:",r);return}n(t,{method:"POST",body:Hn(o),headers:{"Content-Type":"application/x-sentry-envelope"},mode:"cors"}).then(i=>{i.status>=200&&i.status<400&&(r=0)},i=>{r++,h.error("Sentry SDK can't connect to Sidecar is it running? See: https://spotlightjs.com/sidecar/npx/",i)})})}var W_=Gv;function Wv(e){return!!(e.type==="transaction"&&e.spans&&e.contexts?.trace&&e.contexts.trace.op==="ui.action.click"&&e.spans.some(({description:t})=>t?.includes("#sentry-spotlight")))}function j_(){return jv()?(I&&Ve(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function jv(){if(typeof w.window>"u")return!1;let e=w;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;let n=st(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(w===w.top&&r.some(i=>n.startsWith(`${i}://`)))}function Rd(e){return[Ri(),Ai(),Xa(),Ja(),Za(),tc(),vi(),ec(),Qa()]}function z_(e={}){let t=!e.skipBrowserExtensionCheck&&j_(),n=e.defaultIntegrations==null?Rd():e.defaultIntegrations,r={...e,enabled:t?!1:e.enabled,stackParser:Gc(e.stackParser||Va),integrations:xu({integrations:e.integrations,defaultIntegrations:n}),transport:e.transport||vo};return Hu(go,r)}function q_(){}function Y_(e){e()}function V_(e={}){let t=w.document,n=t?.head||t?.body;if(!n){I&&h.error("[showReportDialog] Global document not defined");return}let r=O(),i=T()?.getDsn();if(!i){I&&h.error("[showReportDialog] DSN not configured");return}let s={...e,user:{...r.getUser(),...e.user},eventId:e.eventId||pi()},a=w.document.createElement("script");a.async=!0,a.crossOrigin="anonymous",a.src=wu(i,s);let{onLoad:c,onClose:u}=s;if(c&&(a.onload=c),u){let d=l=>{if(l.data==="__sentry_reportdialog_closed__")try{u()}finally{w.removeEventListener("message",d)}};w.addEventListener("message",d)}n.appendChild(a)}var zv=v,qv="ReportingObserver",K_=new WeakMap,Yv=((e={})=>{let t=e.types||["crash","deprecation","intervention"];function n(r){if(K_.has(T()))for(let o of r)Pe(i=>{i.setExtra("url",o.url);let s=`ReportingObserver [${o.type}]`,a="No details available";if(o.body){let c={};for(let u in o.body)c[u]=o.body[u];if(i.setExtra("body",c),o.type==="crash"){let u=o.body;a=[u.crashId||"",u.reason||""].join(" ").trim()||a}else a=o.body.message||a}di(`${s}: ${a}`)})}return{name:qv,setupOnce(){if(!Cl())return;new zv.ReportingObserver(n,{buffered:!0,types:t}).observe()},setup(r){K_.set(r,!0)}}}),J_=Yv;var Vv="HttpClient",Kv=((e={})=>{let t={failedRequestStatusCodes:[[500,599]],failedRequestTargets:[/.*/],...e};return{name:Vv,setup(n){rN(n,t),oN(n,t)}}}),Q_=Kv;function Jv(e,t,n,r,o){if(eg(e,n.status,n.url)){let i=iN(t,r),s,a,c,u;ng()&&([s,c]=X_("Cookie",i),[a,u]=X_("Set-Cookie",n));let d=tg({url:i.url,method:i.method,status:n.status,requestHeaders:s,responseHeaders:a,requestCookies:c,responseCookies:u,error:o,type:"fetch"});Qt(d)}}function X_(e,t){let n=Zv(t.headers),r;try{let o=n[e]||n[e.toLowerCase()]||void 0;o&&(r=Z_(o))}catch{}return[n,r]}function Xv(e,t,n,r,o){if(eg(e,t.status,t.responseURL)){let i,s,a;if(ng()){try{let u=t.getResponseHeader("Set-Cookie")||t.getResponseHeader("set-cookie")||void 0;u&&(s=Z_(u))}catch{}try{a=eN(t)}catch{}i=r}let c=tg({url:t.responseURL,method:n,status:t.status,requestHeaders:i,responseHeaders:a,responseCookies:s,error:o,type:"xhr"});Qt(c)}}function Qv(e){if(e){let t=e["Content-Length"]||e["content-length"];if(t)return parseInt(t,10)}}function Z_(e){return e.split("; ").reduce((t,n)=>{let[r,o]=n.split("=");return r&&o&&(t[r]=o),t},{})}function Zv(e){let t={};return e.forEach((n,r)=>{t[r]=n}),t}function eN(e){let t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{let[o,i]=r.split(": ");return o&&i&&(n[o]=i),n},{}):{}}function tN(e,t){return e.some(n=>typeof n=="string"?t.includes(n):n.test(t))}function nN(e,t){return e.some(n=>typeof n=="number"?n===t:t>=n[0]&&t<=n[1])}function rN(e,t){Li()&&Rr(n=>{if(T()!==e)return;let{response:r,args:o,error:i,virtualError:s}=n,[a,c]=o;r&&Jv(t,a,r,c,i||s)},!1)}function oN(e,t){"XMLHttpRequest"in v&&Mr(n=>{if(T()!==e)return;let{error:r,virtualError:o}=n,i=n.xhr,s=i[ft];if(!s)return;let{method:a,request_headers:c}=s;try{Xv(t,i,a,c,r||o)}catch(u){I&&h.warn("Error while extracting response event form XHR response",u)}})}function eg(e,t,n){return nN(e.failedRequestStatusCodes,t)&&tN(e.failedRequestTargets,n)&&!Ii(n,T())}function tg(e){let t=T(),n=t&&e.error&&e.error instanceof Error?e.error.stack:void 0,r=n&&t?t.getOptions().stackParser(n,0,1):void 0,o=`HTTP Client Error with status code: ${e.status}`,i={message:o,exception:{values:[{type:"Error",value:o,stacktrace:r?{frames:r}:void 0}]},request:{url:e.url,method:e.method,headers:e.requestHeaders,cookies:e.requestCookies},contexts:{response:{status_code:e.status,headers:e.responseHeaders,cookies:e.responseCookies,body_size:Qv(e.responseHeaders)}}};return Xe(i,{type:`auto.http.client.${e.type}`,handled:!1}),i}function iN(e,t){return!t&&e instanceof Request||e instanceof Request&&e.bodyUsed?e:new Request(e,t)}function ng(){let e=T();return e?!!e.getOptions().sendDefaultPii:!1}var vd=v,sN=7,aN="ContextLines",cN=((e={})=>{let t=e.frameContextLines!=null?e.frameContextLines:sN;return{name:aN,processEvent(n){return uN(n,t)}}}),rg=cN;function uN(e,t){let n=vd.document,r=vd.location&&bi(vd.location.href);if(!n||!r)return e;let o=e.exception?.values;if(!o?.length)return e;let i=n.documentElement.innerHTML;if(!i)return e;let s=["<!DOCTYPE html>","<html>",...i.split(`
`),"</html>"];return o.forEach(a=>{let c=a.stacktrace;c?.frames&&(c.frames=c.frames.map(u=>lN(u,s,r,t)))}),e}function lN(e,t,n,r){return e.filename!==n||!e.lineno||!t.length||Xc(t,e,r),e}var dN="GraphQLClient",fN=(e=>({name:dN,setup(t){pN(t,e),mN(t,e)}}));function pN(e,t){e.on("beforeOutgoingRequestSpan",(n,r)=>{let i=L(n).data||{};if(!(i[ie]==="http.client"))return;let c=i[nu]||i["http.url"],u=i[tu]||i["http.method"];if(!Be(c)||!Be(u))return;let{endpoints:d}=t,l=je(c,d),f=ig(r);if(l&&f){let p=sg(f);if(p){let m=og(p);n.updateName(`${u} ${c} (${m})`),n.setAttribute("graphql.document",f)}}})}function mN(e,t){e.on("beforeOutgoingRequestBreadcrumb",(n,r)=>{let{category:o,type:i,data:s}=n;if(i==="http"&&(o==="fetch"||o==="xhr")){let d=s?.url,{endpoints:l}=t,f=je(d,l),p=ig(r);if(f&&s&&p){let m=sg(p);if(!s.graphql&&m){let _=og(m);s["graphql.document"]=m.query,s["graphql.operation"]=_}}}})}function og(e){let{query:t,operationName:n}=e,{operationName:r=n,operationType:o}=hN(t);return r?`${o} ${r}`:`${o}`}function ig(e){let t="xhr"in e,n;if(t){let r=e.xhr[ft];n=r&&Lr(r.body)[0]}else{let r=Ao(e.input);n=Lr(r)[0]}return n}function hN(e){let t=/^(?:\s*)(query|mutation|subscription)(?:\s*)(\w+)(?:\s*)[{(]/,n=/^(?:\s*)(query|mutation|subscription)(?:\s*)[{(]/,r=e.match(t);if(r)return{operationType:r[1],operationName:r[2]};let o=e.match(n);return o?{operationType:o[1],operationName:void 0}:{operationType:void 0,operationName:void 0}}function sg(e){let t;try{let n=JSON.parse(e);!!n.query&&(t=n)}finally{return t}}var ag=fN;var Te=v,tf="sentryReplaySession",_N="replay_event",nf="Unable to send Replay",gN=3e5,SN=9e5,EN=5e3,TN=5500,yN=6e4,bN=5e3,IN=3,cg=15e4,nc=5e3,AN=3e3,RN=300,rf=2e7,vN=4999,NN=5e4,ug=36e5,CN=Object.defineProperty,wN=(e,t,n)=>t in e?CN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lg=(e,t,n)=>wN(e,typeof t!="symbol"?t+"":t,n),Le=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Le||{});function kN(e){return e.nodeType===e.ELEMENT_NODE}function Vi(e){return e?.host?.shadowRoot===e}function Ki(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function xN(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function ON(e){let{cssText:t}=e;if(t.split('"').length<3)return t;let n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function ac(e){try{let t=e.rules||e.cssRules;return t?xN(Array.from(t,Og).join("")):null}catch{return null}}function MN(e){let t="";for(let n=0;n<e.style.length;n++){let r=e.style,o=r[n],i=r.getPropertyPriority(o);t+=`${o}:${r.getPropertyValue(o)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function Og(e){let t;if(PN(e))try{t=ac(e.styleSheet)||ON(e)}catch{}else if(UN(e)){let n=e.cssText,r=e.selectorText.includes(":"),o=typeof e.style.all=="string"&&e.style.all;if(o&&(n=MN(e)),r&&(n=LN(n)),r||o)return n}return t||e.cssText}function LN(e){let t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function PN(e){return"styleSheet"in e}function UN(e){return"selectorText"in e}var cc=class{constructor(){lg(this,"idNodeMap",new Map),lg(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function DN(){return new cc}function Ec({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Xi({isMasked:e,element:t,value:n,maskInputFn:r}){let o=n||"";return e?(r&&(o=r(o,t)),"*".repeat(o.length)):o}function Po(e){return e.toLowerCase()}function Od(e){return e.toUpperCase()}var dg="__rrweb_original__";function BN(e){let t=e.getContext("2d");if(!t)return!0;let n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){let i=t.getImageData,s=dg in i?i[dg]:i;if(new Uint32Array(s.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(c=>c!==0))return!1}return!0}function of(e){let t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Po(t):null}function uc(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Mg(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}var fg={};function Lg(e){let t=fg[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return fg[e]=r.bind(window)}function Md(...e){return Lg("setTimeout")(...e)}function Pg(...e){return Lg("clearTimeout")(...e)}function Ug(e){try{return e.contentDocument}catch{}}var FN=1,HN=new RegExp("[^a-z0-9-_:]"),Qi=-2;function sf(){return FN++}function GN(e){if(e instanceof HTMLFormElement)return"form";let t=Po(e.tagName);return HN.test(t)?"div":t}function $N(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}var Co,pg,WN=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,jN=/^(?:[a-z+]+:)?\/\//i,zN=/^www\..*/i,qN=/^(data:)([^,]*),(.*)/i;function YN(e,t){if(!e||t.size===0)return e;try{let n=e.split(";"),r=[];for(let o of n){if(o=o.trim(),!o)continue;let i=o.indexOf(":");if(i===-1){r.push(o);continue}let s=o.slice(0,i).trim();t.has(s)||r.push(o)}return r.join("; ")+(r.length>0&&e.endsWith(";")?";":"")}catch(n){return console.warn("Error filtering CSS properties:",n),e}}function lc(e,t){return(e||"").replace(WN,(n,r,o,i,s,a)=>{let c=o||s||a,u=r||i||"";if(!c)return n;if(jN.test(c)||zN.test(c))return`url(${u}${c}${u})`;if(qN.test(c))return`url(${u}${c}${u})`;if(c[0]==="/")return`url(${u}${$N(t)+c}${u})`;let d=t.split("/"),l=c.split("/");d.pop();for(let f of l)f!=="."&&(f===".."?d.pop():d.push(f));return`url(${u}${d.join("/")}${u})`})}var VN=/^[^ \t\n\r\u000c]+/,KN=/^[, \t\n\r\u000c]+/;function JN(e,t){if(t.trim()==="")return t;let n=0;function r(i){let s,a=i.exec(t.substring(n));return a?(s=a[0],n+=s.length,s):""}let o=[];for(;r(KN),!(n>=t.length);){let i=r(VN);if(i.slice(-1)===",")i=xo(e,i.substring(0,i.length-1)),o.push(i);else{let s="";i=xo(e,i);let a=!1;for(;;){let c=t.charAt(n);if(c===""){o.push((i+s).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,o.push((i+s).trim());break}else c==="("&&(a=!0);s+=c,n+=1}}}return o.join(", ")}var mg=new WeakMap;function xo(e,t){return!t||t.trim()===""?t:Tc(e,t)}function XN(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Tc(e,t){let n=mg.get(e);if(n||(n=e.createElement("a"),mg.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function Dg(e,t,n,r,o,i,s){if(!r)return r;if(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#"))return xo(e,r);if(n==="xlink:href"&&r[0]!=="#")return xo(e,r);if(n==="background"&&(t==="table"||t==="td"||t==="th"))return xo(e,r);if(n==="srcset")return JN(e,r);if(n==="style"){let a=lc(r,Tc(e));return s&&s.size>0&&(a=YN(a,s)),a}else if(t==="object"&&n==="data")return xo(e,r);return typeof i=="function"?i(n,r,o):r}function Bg(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function QN(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let o=e.classList.length;o--;){let i=e.classList[o];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function ZN(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Pr(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Pr(e.parentNode,t,n,r+1)}function Oo(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(ZN(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Uo(e,t,n,r,o,i){try{let s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(s===null)return!1;if(s.tagName==="INPUT"){let u=s.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(u))return!0}let a=-1,c=-1;if(i){if(c=Pr(s,Oo(r,o)),c<0)return!0;a=Pr(s,Oo(t,n),c>=0?c:1/0)}else{if(a=Pr(s,Oo(t,n)),a<0)return!1;c=Pr(s,Oo(r,o),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!i}catch{}return!!i}function eC(e,t,n){let r=e.contentWindow;if(!r)return;let o=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){let a=Md(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{Pg(a),o=!0,t()});return}let s="about:blank";if(r.location.href!==s||e.src===s||e.src==="")return Md(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function tC(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;let i=Md(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Pg(i),r=!0,t()})}function nC(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskAttributeFn:c,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,inlineStylesheet:p,maskInputOptions:m={},maskTextFn:_,maskInputFn:g,dataURLOptions:S={},inlineImages:b,recordCanvas:D,keepIframeSrcFn:M,newlyAddedElement:z=!1,ignoreCSSAttributes:B}=t,E=rC(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Le.Document,childNodes:[],compatMode:e.compatMode}:{type:Le.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Le.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:E};case e.ELEMENT_NODE:return iC(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:s,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:m,maskInputFn:g,dataURLOptions:S,inlineImages:b,recordCanvas:D,keepIframeSrcFn:M,newlyAddedElement:z,rootId:E,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,ignoreCSSAttributes:B});case e.TEXT_NODE:return oC(e,{doc:n,maskAllText:a,maskTextClass:u,unmaskTextClass:d,maskTextSelector:l,unmaskTextSelector:f,maskTextFn:_,maskInputOptions:m,maskInputFn:g,rootId:E});case e.CDATA_SECTION_NODE:return{type:Le.CDATA,textContent:"",rootId:E};case e.COMMENT_NODE:return{type:Le.Comment,textContent:e.textContent||"",rootId:E};default:return!1}}function rC(e,t){if(!t.hasNode(e))return;let n=t.getId(e);return n===1?void 0:n}function oC(e,t){let{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:s,maskTextFn:a,maskInputOptions:c,maskInputFn:u,rootId:d}=t,l=e.parentNode&&e.parentNode.tagName,f=e.textContent,p=l==="STYLE"?!0:void 0,m=l==="SCRIPT"?!0:void 0,_=l==="TEXTAREA"?!0:void 0;if(p&&f){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(f=ac(e.parentNode.sheet))}catch(S){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${S}`,e)}f=lc(f,Tc(t.doc))}m&&(f="SCRIPT_PLACEHOLDER");let g=Uo(e,r,i,o,s,n);if(!p&&!m&&!_&&f&&g&&(f=a?a(f,e.parentElement):f.replace(/[\S]/g,"*")),_&&f&&(c.textarea||g)&&(f=u?u(f,e.parentNode):f.replace(/[\S]/g,"*")),l==="OPTION"&&f){let S=Ec({type:null,tagName:l,maskInputOptions:c});f=Xi({isMasked:Uo(e,r,i,o,s,S),element:e,value:f,maskInputFn:u})}return{type:Le.Text,textContent:f||"",isStyle:p,rootId:d}}function iC(e,t){let{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:s,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:u,dataURLOptions:d={},inlineImages:l,recordCanvas:f,keepIframeSrcFn:p,newlyAddedElement:m=!1,rootId:_,maskTextClass:g,unmaskTextClass:S,maskTextSelector:b,unmaskTextSelector:D,ignoreCSSAttributes:M}=t,z=QN(e,r,o,i),B=GN(e),E={},k=e.attributes.length;for(let A=0;A<k;A++){let x=e.attributes[A];x.name&&!Bg(B,x.name,x.value)&&(E[x.name]=Dg(n,B,Po(x.name),x.value,e,c,M))}if(B==="link"&&s){let A=Array.from(n.styleSheets).find(C=>C.href===e.href),x=null;A&&(x=ac(A)),x&&(E.rel=null,E.href=null,E.crossorigin=null,E._cssText=lc(x,A.href))}if(B==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){let A=ac(e.sheet);A&&(E._cssText=lc(A,Tc(n)))}if(B==="input"||B==="textarea"||B==="select"||B==="option"){let A=e,x=of(A),C=uc(A,Od(B),x),P=A.checked;if(x!=="submit"&&x!=="button"&&C){let F=Uo(A,g,b,S,D,Ec({type:x,tagName:Od(B),maskInputOptions:a}));E.value=Xi({isMasked:F,element:A,value:C,maskInputFn:u})}P&&(E.checked=P)}if(B==="option"&&(e.selected&&!a.select?E.selected=!0:delete E.selected),B==="canvas"&&f){if(e.__context==="2d")BN(e)||(E.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){let A=e.toDataURL(d.type,d.quality),x=n.createElement("canvas");x.width=e.width,x.height=e.height;let C=x.toDataURL(d.type,d.quality);A!==C&&(E.rr_dataURL=A)}}if(B==="img"&&l){Co||(Co=n.createElement("canvas"),pg=Co.getContext("2d"));let A=e,x=A.currentSrc||A.getAttribute("src")||"<unknown-src>",C=A.crossOrigin,P=()=>{A.removeEventListener("load",P);try{Co.width=A.naturalWidth,Co.height=A.naturalHeight,pg.drawImage(A,0,0),E.rr_dataURL=Co.toDataURL(d.type,d.quality)}catch(F){if(A.crossOrigin!=="anonymous"){A.crossOrigin="anonymous",A.complete&&A.naturalWidth!==0?P():A.addEventListener("load",P);return}else console.warn(`Cannot inline img src=${x}! Error: ${F}`)}A.crossOrigin==="anonymous"&&(C?E.crossOrigin=C:A.removeAttribute("crossorigin"))};A.complete&&A.naturalWidth!==0?P():A.addEventListener("load",P)}if((B==="audio"||B==="video")&&(E.rr_mediaState=e.paused?"paused":"played",E.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(E.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(E.rr_scrollTop=e.scrollTop)),z){let{width:A,height:x}=e.getBoundingClientRect();E={class:E.class,rr_width:`${A}px`,rr_height:`${x}px`}}B==="iframe"&&!p(E.src)&&(!z&&!Ug(e)&&(E.rr_src=E.src),delete E.src);let G;try{customElements.get(B)&&(G=!0)}catch{}return{type:Le.Element,tagName:B,attributes:E,childNodes:[],isSVG:XN(e)||void 0,needBlock:z,rootId:_,isCustom:G}}function Ee(e){return e==null?"":e.toLowerCase()}function sC(e,t){if(t.comment&&e.type===Le.Comment)return!0;if(e.type===Le.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Mg(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Ee(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Ee(e.attributes.name)==="application-name"||Ee(e.attributes.rel)==="icon"||Ee(e.attributes.rel)==="apple-touch-icon"||Ee(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Ee(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Ee(e.attributes.property).match(/^(og|twitter|fb):/)||Ee(e.attributes.name).match(/^(og|twitter):/)||Ee(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Ee(e.attributes.name)==="robots"||Ee(e.attributes.name)==="googlebot"||Ee(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Ee(e.attributes.name)==="author"||Ee(e.attributes.name)==="generator"||Ee(e.attributes.name)==="framework"||Ee(e.attributes.name)==="publisher"||Ee(e.attributes.name)==="progid"||Ee(e.attributes.property).match(/^article:/)||Ee(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Ee(e.attributes.name)==="google-site-verification"||Ee(e.attributes.name)==="yandex-verification"||Ee(e.attributes.name)==="csrf-token"||Ee(e.attributes.name)==="p:domain_verify"||Ee(e.attributes.name)==="verify-v1"||Ee(e.attributes.name)==="verification"||Ee(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Mo(e,t){let{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f=!1,inlineStylesheet:p=!0,maskInputOptions:m={},maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:b,dataURLOptions:D={},inlineImages:M=!1,recordCanvas:z=!1,onSerialize:B,onIframeLoad:E,iframeLoadTimeout:k=5e3,onBlockedImageLoad:G,onStylesheetLoad:A,stylesheetLoadTimeout:x=5e3,keepIframeSrcFn:C=()=>!1,newlyAddedElement:P=!1,ignoreCSSAttributes:F}=t,{preserveWhiteSpace:te=!0}=t,ee=nC(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,dataURLOptions:D,inlineImages:M,recordCanvas:z,keepIframeSrcFn:C,newlyAddedElement:P,ignoreCSSAttributes:F});if(!ee)return console.warn(e,"not serialized"),null;let ue;r.hasNode(e)?ue=r.getId(e):sC(ee,b)||!te&&ee.type===Le.Text&&!ee.isStyle&&!ee.textContent.replace(/^\s+|\s+$/gm,"").length?ue=Qi:ue=sf();let R=Object.assign(ee,{id:ue});if(r.add(e,R),ue===Qi)return null;B&&B(e);let q=!f;if(R.type===Le.Element){q=q&&!R.needBlock;let N=e.shadowRoot;N&&Ki(N)&&(R.isShadowHost=!0)}if((R.type===Le.Document||R.type===Le.Element)&&q){b.headWhitespace&&R.type===Le.Element&&R.tagName==="head"&&(te=!1);let N={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:a,unblockSelector:s,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:f,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:b,dataURLOptions:D,inlineImages:M,recordCanvas:z,preserveWhiteSpace:te,onSerialize:B,onIframeLoad:E,iframeLoadTimeout:k,onBlockedImageLoad:G,onStylesheetLoad:A,stylesheetLoadTimeout:x,keepIframeSrcFn:C,ignoreCSSAttributes:F},Y=e.childNodes?Array.from(e.childNodes):[];for(let de of Y){let se=Mo(de,N);se&&R.childNodes.push(se)}if(kN(e)&&e.shadowRoot)for(let de of Array.from(e.shadowRoot.childNodes)){let se=Mo(de,N);se&&(Ki(e.shadowRoot)&&(se.isShadow=!0),R.childNodes.push(se))}}if(e.parentNode&&Vi(e.parentNode)&&Ki(e.parentNode)&&(R.isShadow=!0),R.type===Le.Element&&R.tagName==="iframe"&&!R.needBlock&&eC(e,()=>{let N=Ug(e);if(N&&E){let Y=Mo(N,{doc:N,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:b,dataURLOptions:D,inlineImages:M,recordCanvas:z,preserveWhiteSpace:te,onSerialize:B,onIframeLoad:E,iframeLoadTimeout:k,onStylesheetLoad:A,stylesheetLoadTimeout:x,keepIframeSrcFn:C,ignoreCSSAttributes:F});Y&&E(e,Y)}},k),R.type===Le.Element&&R.tagName==="img"&&!e.complete&&R.needBlock){let N=e,Y=()=>{if(N.isConnected&&!N.complete&&G)try{let de=N.getBoundingClientRect();de.width>0&&de.height>0&&G(N,R,de)}catch{}N.removeEventListener("load",Y)};N.isConnected&&N.addEventListener("load",Y)}return R.type===Le.Element&&R.tagName==="link"&&typeof R.attributes.rel=="string"&&(R.attributes.rel==="stylesheet"||R.attributes.rel==="preload"&&typeof R.attributes.href=="string"&&Mg(R.attributes.href)==="css")&&tC(e,()=>{if(A){let N=Mo(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:a,maskTextClass:c,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:l,skipChild:!1,inlineStylesheet:p,maskInputOptions:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:b,dataURLOptions:D,inlineImages:M,recordCanvas:z,preserveWhiteSpace:te,onSerialize:B,onIframeLoad:E,iframeLoadTimeout:k,onStylesheetLoad:A,stylesheetLoadTimeout:x,keepIframeSrcFn:C,ignoreCSSAttributes:F});N&&A(e,N)}},x),R.type===Le.Element&&delete R.needBlock,R}function aC(e,t){let{mirror:n=new cc,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:s=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:u=null,unmaskTextSelector:d=null,inlineStylesheet:l=!0,inlineImages:f=!1,recordCanvas:p=!1,maskAllInputs:m=!1,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOM:b=!1,dataURLOptions:D,preserveWhiteSpace:M,onSerialize:z,onIframeLoad:B,iframeLoadTimeout:E,onBlockedImageLoad:k,onStylesheetLoad:G,stylesheetLoadTimeout:A,keepIframeSrcFn:x=()=>!1,ignoreCSSAttributes:C=new Set([])}=t||{};return Mo(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:s,maskTextClass:a,unmaskTextClass:c,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:l,maskInputOptions:m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:m===!1?{}:m,maskAttributeFn:_,maskTextFn:g,maskInputFn:S,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:D,inlineImages:f,recordCanvas:p,preserveWhiteSpace:M,onSerialize:z,onIframeLoad:B,iframeLoadTimeout:E,onBlockedImageLoad:k,onStylesheetLoad:G,stylesheetLoadTimeout:A,keepIframeSrcFn:x,newlyAddedElement:!1,ignoreCSSAttributes:C})}function mt(e,t,n=document){let r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}var wo=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,hg={map:{},getId(){return console.error(wo),-1},getNode(){return console.error(wo),null},removeNodeFromMap(){console.error(wo)},has(){return console.error(wo),!1},reset(){console.error(wo)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(hg=new Proxy(hg,{get(e,t,n){return t==="map"&&console.error(wo),Reflect.get(e,t,n)}}));function Zi(e,t,n={}){let r=null,o=0;return function(...i){let s=Date.now();!o&&n.leading===!1&&(o=s);let a=t-(s-o),c=this;a<=0||a>t?(r&&(pC(r),r=null),o=s,e.apply(c,i)):!r&&n.trailing!==!1&&(r=yc(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},a))}}function Fg(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){yc(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Fg(e,t,i||{},!0)}function af(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}var dc=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(dc=()=>new Date().getTime());function Hg(e){let t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function Gg(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function $g(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Wg(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Ht(e,t,n,r,o){if(!e)return!1;let i=Wg(e);if(!i)return!1;let s=Oo(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Pr(i,s),c=-1;return a<0?!1:(r&&(c=Pr(i,Oo(null,r))),a>-1&&c<0?!0:a<c)}function cC(e,t){return t.getId(e)!==-1}function Nd(e,t){return t.getId(e)===Qi}function jg(e,t){if(Vi(e))return!1;let n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?jg(e.parentNode,t):!0:!0}function Ld(e){return!!e.changedTouches}function uC(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function zg(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function qg(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function Pd(e){return!!e?.shadowRoot}var Ud=class{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Yg(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function lC(e){let t=e,n;for(;n=Yg(t);)t=n;return t}function dC(e){let t=e.ownerDocument;if(!t)return!1;let n=lC(e);return t.contains(n)}function Vg(e){let t=e.ownerDocument;return t?t.contains(e)||dC(e):!1}var _g={};function cf(e){let t=_g[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return _g[e]=r.bind(window)}function fC(...e){return cf("requestAnimationFrame")(...e)}function yc(...e){return cf("setTimeout")(...e)}function pC(...e){return cf("clearTimeout")(...e)}var K=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(K||{}),j=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(j||{}),pt=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(pt||{}),On=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(On||{}),ko=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(ko||{});function uf(e){try{return e.contentDocument}catch{}}function mC(e){try{return e.contentWindow}catch{}}function gg(e){return"__ln"in e}var Dd=class{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){let n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&gg(t.previousSibling)){let r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&gg(t.nextSibling)&&t.nextSibling.__ln.previous){let r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){let n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}},Sg=(e,t)=>`${e}@${t}`,Bd=class{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let t=[],n=new Set,r=new Dd,o=c=>{let u=c,d=Qi;for(;d===Qi;)u=u&&u.nextSibling,d=u&&this.mirror.getId(u);return d},i=c=>{if(!c.parentNode||!Vg(c))return;let u=Vi(c.parentNode)?this.mirror.getId(Yg(c)):this.mirror.getId(c.parentNode),d=o(c);if(u===-1||d===-1)return r.addNode(c);let l=Mo(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{zg(f,this.mirror)&&!Ht(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(f),qg(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),Pd(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,p)=>{Ht(f,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(f,p),f.contentWindow&&this.canvasManager.addWindow(f.contentWindow),this.shadowDomManager.observeAttachShadow(f))},onStylesheetLoad:(f,p)=>{this.stylesheetManager.attachLinkElement(f,p)},onBlockedImageLoad:(f,p,{width:m,height:_})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${m}px`,height:`${_}px`}}}]})},ignoreCSSAttributes:this.ignoreCSSAttributes});l&&(t.push({parentId:u,nextId:d,node:l}),n.add(l.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let c of this.movedSet)Eg(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(let c of this.addedSet)!Tg(this.droppedSet,c)&&!Eg(this.removes,c,this.mirror)||Tg(this.movedSet,c)?i(c):this.droppedSet.add(c);let s=null;for(;r.length;){let c=null;if(s){let u=this.mirror.getId(s.value.parentNode),d=o(s.value);u!==-1&&d!==-1&&(c=s)}if(!c){let u=r.tail;for(;u;){let d=u;if(u=u.previous,d){let l=this.mirror.getId(d.value.parentNode);if(o(d.value)===-1)continue;if(l!==-1){c=d;break}else{let p=d.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let m=p.parentNode.host;if(this.mirror.getId(m)!==-1){c=d;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}s=c.previous,r.removeNode(c.value),i(c.value)}let a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{let{attributes:u}=c;if(typeof u.style=="string"){let d=JSON.stringify(c.styleDiff),l=JSON.stringify(c._unchangedStyles);d.length<u.style.length&&(d+l).split("var(").length===u.style.split("var(").length&&(u.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:u}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(!Nd(t.target,this.mirror))switch(t.type){case"characterData":{let n=t.target.textContent;!Ht(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Uo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,Wg(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{let n=t.target,r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){let s=of(n),a=n.tagName;o=uc(n,a,s);let c=Ec({maskInputOptions:this.maskInputOptions,tagName:a,type:s}),u=Uo(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);o=Xi({isMasked:u,element:n,value:o,maskInputFn:this.maskInputFn})}if(Ht(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!uf(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Bg(n.tagName,r)&&(i.attributes[r]=Dg(this.doc,Po(n.tagName),Po(r),o,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let s=this.unattachedDoc.createElement("span");t.oldValue&&s.setAttribute("style",t.oldValue);for(let a of Array.from(n.style)){let c=n.style.getPropertyValue(a),u=n.style.getPropertyPriority(a);c!==s.style.getPropertyValue(a)||u!==s.style.getPropertyPriority(a)?u===""?i.styleDiff[a]=c:i.styleDiff[a]=[c,u]:i._unchangedStyles[a]=[c,u]}for(let a of Array.from(s.style))n.style.getPropertyValue(a)===""&&(i.styleDiff[a]=!1)}break}case"childList":{if(Ht(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{let r=this.mirror.getId(n),o=Vi(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Ht(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Nd(n,this.mirror)||!cC(n,this.mirror)||(this.addedSet.has(n)?(Fd(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||jg(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Sg(r,o)]?Fd(this.movedSet,n):this.removes.push({parentId:o,id:r,isShadow:Vi(t.target)&&Ki(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(Nd(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Sg(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Ht(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),Pd(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","ignoreCSSAttributes"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function Fd(e,t){e.delete(t),t.childNodes?.forEach(n=>Fd(e,n))}function Eg(e,t,n){return e.length===0?!1:hC(e,t,n)}function hC(e,t,n){let r=t.parentNode;for(;r;){let o=n.getId(r);if(e.some(i=>i.id===o))return!0;r=r.parentNode}return!1}function Tg(e,t){return e.size===0?!1:Kg(e,t)}function Kg(e,t){let{parentNode:n}=t;return n?e.has(n)?!0:Kg(e,n):!1}var Ji;function _C(e){Ji=e}function gC(){Ji=void 0}var oe=e=>Ji?(...n)=>{try{return e(...n)}catch(r){if(Ji&&Ji(r)===!0)return()=>{};throw r}}:e,Lo=[];function os(e){try{if("composedPath"in e){let t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Jg(e,t){let n=new Bd;Lo.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver,o=window?.Zone?.__symbol__?.("MutationObserver");o&&window[o]&&(r=window[o]);let i=new r(oe(s=>{e.onMutation&&e.onMutation(s)===!1||n.processMutations.bind(n)(s)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function SC({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};let o=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500,s=[],a,c=Zi(oe(l=>{let f=Date.now()-a;e(s.map(p=>(p.timeOffset-=f,p)),l),s=[],a=null}),i),u=oe(Zi(oe(l=>{let f=os(l),{clientX:p,clientY:m}=Ld(l)?l.changedTouches[0]:l;a||(a=dc()),s.push({x:p,y:m,id:r.getId(f),timeOffset:dc()-a}),c(typeof DragEvent<"u"&&l instanceof DragEvent?j.Drag:l instanceof MouseEvent?j.MouseMove:j.TouchMove)}),o,{trailing:!1})),d=[mt("mousemove",u,n),mt("touchmove",u,n),mt("drag",u,n)];return oe(()=>{d.forEach(l=>l())})}function EC({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){if(s.mouseInteraction===!1)return()=>{};let a=s.mouseInteraction===!0||s.mouseInteraction===void 0?{}:s.mouseInteraction,c=[],u=null,d=l=>f=>{let p=os(f);if(Ht(p,r,o,i,!0))return;let m=null,_=l;if("pointerType"in f){switch(f.pointerType){case"mouse":m=On.Mouse;break;case"touch":m=On.Touch;break;case"pen":m=On.Pen;break}m===On.Touch?pt[l]===pt.MouseDown?_="TouchStart":pt[l]===pt.MouseUp&&(_="TouchEnd"):On.Pen}else Ld(f)&&(m=On.Touch);m!==null?(u=m,(_.startsWith("Touch")&&m===On.Touch||_.startsWith("Mouse")&&m===On.Mouse)&&(m=null)):pt[l]===pt.Click&&(m=u,u=null);let g=Ld(f)?f.changedTouches[0]:f;if(!g)return;let S=n.getId(p),{clientX:b,clientY:D}=g;oe(e)({type:pt[_],id:S,x:b,y:D,...m!==null&&{pointerType:m}})};return Object.keys(pt).filter(l=>Number.isNaN(Number(l))&&!l.endsWith("_Departed")&&a[l]!==!1).forEach(l=>{let f=Po(l),p=d(l);if(window.PointerEvent)switch(pt[l]){case pt.MouseDown:case pt.MouseUp:f=f.replace("mouse","pointer");break;case pt.TouchStart:case pt.TouchEnd:return}c.push(mt(f,p,t))}),oe(()=>{c.forEach(l=>l())})}function Xg({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,sampling:s}){let a=oe(Zi(oe(c=>{let u=os(c);if(!u||Ht(u,r,o,i,!0))return;let d=n.getId(u);if(u===t&&t.defaultView){let l=Hg(t.defaultView);e({id:d,x:l.left,y:l.top})}else e({id:d,x:u.scrollLeft,y:u.scrollTop})}),s.scroll||100));return mt("scroll",a,t)}function TC({viewportResizeCb:e},{win:t}){let n=-1,r=-1,o=oe(Zi(oe(()=>{let i=Gg(),s=$g();(n!==i||r!==s)&&(e({width:Number(s),height:Number(i)}),n=i,r=s)}),200));return mt("resize",o,t)}var yC=["INPUT","TEXTAREA","SELECT"],yg=new WeakMap;function bC({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,ignoreClass:s,ignoreSelector:a,maskInputOptions:c,maskInputFn:u,sampling:d,userTriggeredOnInput:l,maskTextClass:f,unmaskTextClass:p,maskTextSelector:m,unmaskTextSelector:_}){function g(E){let k=os(E),G=E.isTrusted,A=k&&Od(k.tagName);if(A==="OPTION"&&(k=k.parentElement),!k||!A||yC.indexOf(A)<0||Ht(k,r,o,i,!0))return;let x=k;if(x.classList.contains(s)||a&&x.matches(a))return;let C=of(k),P=uc(x,A,C),F=!1,te=Ec({maskInputOptions:c,tagName:A,type:C}),ee=Uo(k,f,m,p,_,te);(C==="radio"||C==="checkbox")&&(F=k.checked),P=Xi({isMasked:ee,element:k,value:P,maskInputFn:u}),S(k,l?{text:P,isChecked:F,userTriggered:G}:{text:P,isChecked:F});let ue=k.name;C==="radio"&&ue&&F&&t.querySelectorAll(`input[type="radio"][name="${ue}"]`).forEach(R=>{if(R!==k){let q=Xi({isMasked:ee,element:R,value:uc(R,A,C),maskInputFn:u});S(R,l?{text:q,isChecked:!F,userTriggered:!1}:{text:q,isChecked:!F})}})}function S(E,k){let G=yg.get(E);if(!G||G.text!==k.text||G.isChecked!==k.isChecked){yg.set(E,k);let A=n.getId(E);oe(e)({...k,id:A})}}let D=(d.input==="last"?["change"]:["input","change"]).map(E=>mt(E,oe(g),t)),M=t.defaultView;if(!M)return()=>{D.forEach(E=>E())};let z=M.Object.getOwnPropertyDescriptor(M.HTMLInputElement.prototype,"value"),B=[[M.HTMLInputElement.prototype,"value"],[M.HTMLInputElement.prototype,"checked"],[M.HTMLSelectElement.prototype,"value"],[M.HTMLTextAreaElement.prototype,"value"],[M.HTMLSelectElement.prototype,"selectedIndex"],[M.HTMLOptionElement.prototype,"selected"]];return z&&z.set&&D.push(...B.map(E=>Fg(E[0],E[1],{set(){oe(g)({target:this,isTrusted:!1})}},!1,M))),oe(()=>{D.forEach(E=>E())})}function fc(e){let t=[];function n(r,o){if(rc("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||rc("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||rc("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||rc("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){let s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function rr(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function IC({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:oe((d,l,f)=>{let[p,m]=f,{id:_,styleId:g}=rr(l,t,n.styleMirror);return(_&&_!==-1||g&&g!==-1)&&e({id:_,styleId:g,adds:[{rule:p,index:m}]}),d.apply(l,f)})});let i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=rr(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,removes:[{index:p}]}),d.apply(l,f)})});let s;r.CSSStyleSheet.prototype.replace&&(s=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(s,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=rr(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,replace:p}),d.apply(l,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:oe((d,l,f)=>{let[p]=f,{id:m,styleId:_}=rr(l,t,n.styleMirror);return(m&&m!==-1||_&&_!==-1)&&e({id:m,styleId:_,replaceSync:p}),d.apply(l,f)})}));let c={};oc("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(oc("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),oc("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),oc("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));let u={};return Object.entries(c).forEach(([d,l])=>{u[d]={insertRule:l.prototype.insertRule,deleteRule:l.prototype.deleteRule},l.prototype.insertRule=new Proxy(u[d].insertRule,{apply:oe((f,p,m)=>{let[_,g]=m,{id:S,styleId:b}=rr(p.parentStyleSheet,t,n.styleMirror);return(S&&S!==-1||b&&b!==-1)&&e({id:S,styleId:b,adds:[{rule:_,index:[...fc(p),g||0]}]}),f.apply(p,m)})}),l.prototype.deleteRule=new Proxy(u[d].deleteRule,{apply:oe((f,p,m)=>{let[_]=m,{id:g,styleId:S}=rr(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||S&&S!==-1)&&e({id:g,styleId:S,removes:[{index:[...fc(p),_]}]}),f.apply(p,m)})})}),oe(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,s&&(r.CSSStyleSheet.prototype.replace=s),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([d,l])=>{l.prototype.insertRule=u[d].insertRule,l.prototype.deleteRule=u[d].deleteRule})})}function Qg({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);let o=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=o?.prototype?Object.getOwnPropertyDescriptor(o?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!o||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(s){let a=i.set?.call(this,s);if(r!==null&&r!==-1)try{t.adoptStyleSheets(s,r)}catch{}return a}}),oe(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function AC({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){let i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:oe((a,c,u)=>{let[d,l,f]=u;if(n.has(d))return i.apply(c,[d,l,f]);let{id:p,styleId:m}=rr(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,set:{property:d,value:l,priority:f},index:fc(c.parentRule)}),a.apply(c,u)})});let s=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(s,{apply:oe((a,c,u)=>{let[d]=u;if(n.has(d))return s.apply(c,[d]);let{id:l,styleId:f}=rr(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(l&&l!==-1||f&&f!==-1)&&e({id:l,styleId:f,remove:{property:d},index:fc(c.parentRule)}),a.apply(c,u)})}),oe(()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=s})}function RC({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:o,sampling:i,doc:s}){let a=oe(u=>Zi(oe(d=>{let l=os(d);if(!l||Ht(l,t,n,r,!0))return;let{currentTime:f,volume:p,muted:m,playbackRate:_}=l;e({type:u,id:o.getId(l),currentTime:f,volume:p,muted:m,playbackRate:_})}),i.media||500)),c=[mt("play",a(ko.Play),s),mt("pause",a(ko.Pause),s),mt("seeked",a(ko.Seeked),s),mt("volumechange",a(ko.VolumeChange),s),mt("ratechange",a(ko.RateChange),s)];return oe(()=>{c.forEach(u=>u())})}function vC({fontCb:e,doc:t}){let n=t.defaultView;if(!n)return()=>{};let r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(c,u,d){let l=new i(c,u,d);return o.set(l,{family:c,buffer:typeof u!="string",descriptors:d,fontSource:typeof u=="string"?u:JSON.stringify(Array.from(new Uint8Array(u)))}),l};let s=af(t.fonts,"add",function(a){return function(c){return yc(oe(()=>{let u=o.get(c);u&&(e(u),o.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(s),oe(()=>{r.forEach(a=>a())})}function NC(e){let{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:s}=e,a=!0,c=oe(()=>{let u=t.getSelection();if(!u||a&&u?.isCollapsed)return;a=u.isCollapsed||!1;let d=[],l=u.rangeCount||0;for(let f=0;f<l;f++){let p=u.getRangeAt(f),{startContainer:m,startOffset:_,endContainer:g,endOffset:S}=p;Ht(m,r,o,i,!0)||Ht(g,r,o,i,!0)||d.push({start:n.getId(m),startOffset:_,end:n.getId(g),endOffset:S})}s({ranges:d})});return c(),mt("selectionchange",c)}function CC({doc:e,customElementCb:t}){let n=e.defaultView;return!n||!n.customElements?()=>{}:af(n.customElements,"define",function(o){return function(i,s,a){try{t({define:{name:i}})}catch{}return o.apply(this,[i,s,a])}})}function wC(e,t={}){let n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Jg(e,e.doc));let o=SC(e),i=EC(e),s=Xg(e),a=TC(e,{win:n}),c=bC(e),u=RC(e),d=()=>{},l=()=>{},f=()=>{},p=()=>{};e.recordDOM&&(d=IC(e,{win:n}),l=Qg(e,e.doc),f=AC(e,{win:n}),e.collectFonts&&(p=vC(e)));let m=NC(e),_=CC(e),g=[];for(let S of e.plugins)g.push(S.observer(S.callback,n,S.options));return oe(()=>{Lo.forEach(S=>S.reset()),r?.disconnect(),o(),i(),s(),a(),c(),u(),d(),l(),f(),p(),m(),_(),g.forEach(S=>S())})}function rc(e){return typeof window[e]<"u"}function oc(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}var es=class{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){let i=r||this.getIdToRemoteIdMap(t),s=o||this.getRemoteIdToIdMap(t),a=i.get(n);return a||(a=this.generateIdFn(),i.set(n,a),s.set(a,n)),a}getIds(t,n){let r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,o))}getRemoteId(t,n,r){let o=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;let i=o.get(n);return i||-1}getRemoteIds(t,n){let r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}},Hd=class{constructor(){this.crossOriginIframeMirror=new es(sf),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}},Gd=class{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new es(sf),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new es(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);let r=uf(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){let n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;let o=this.crossOriginIframeMap.get(t.source);if(!o)return;let i=this.transformCrossOriginEvent(o,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case K.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);let r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:K.IncrementalSnapshot,data:{source:j.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case K.Meta:case K.Load:case K.DomContentLoaded:return!1;case K.Plugin:return n;case K.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case K.IncrementalSnapshot:switch(n.data.source){case j.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);let o=this.crossOriginIframeRootIdMap.get(t);o&&this.patchRootIdOnNode(r.node,o)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case j.Drag:case j.TouchMove:case j.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case j.ViewportResize:return!1;case j.MediaInteraction:case j.MouseInteraction:case j.Scroll:case j.CanvasMutation:case j.Input:return this.replaceIds(n.data,t,["id"]),n;case j.StyleSheetRule:case j.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case j.Font:return n;case j.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case j.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(let i of o)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Le.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}},$d=class{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}},Wd=class{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Ki(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);let r=Jg({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Xg({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),yc(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Qg({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){let n=uf(t),r=mC(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){let r=this;this.restoreHandlers.push(af(t.prototype,"attachShadow",function(o){return function(i){let s=o.call(this,i);return this.shadowRoot&&Vg(this)&&r.addShadowRoot(this.shadowRoot,n),s}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}},bg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(qi=0;qi<bg.length;qi++)kC[bg.charCodeAt(qi)]=qi;var qi,pc=class{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}},jd=class{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Ud,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;let r={id:n,styleIds:[]},o=[];for(let i of t){let s;this.styleMirror.has(i)?s=this.styleMirror.getId(i):(s=this.styleMirror.add(i),o.push({styleId:s,rules:Array.from(i.rules||CSSRule,(a,c)=>({rule:Og(a),index:c}))})),r.styleIds.push(s)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}},zd=class{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){let r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.active||(this.active=!0,fC(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}},Ne,mc;try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}var sn=DN();function Mn(e={}){let{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:s=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:l=null,maskTextSelector:f=null,unmaskTextSelector:p=null,inlineStylesheet:m=!0,maskAllInputs:_,maskInputOptions:g,slimDOMOptions:S,maskAttributeFn:b,maskInputFn:D,maskTextFn:M,maxCanvasSize:z=null,packFn:B,sampling:E={},dataURLOptions:k={},mousemoveWait:G,recordDOM:A=!0,recordCanvas:x=!1,recordCrossOriginIframes:C=!1,recordAfter:P=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:F=!1,collectFonts:te=!1,inlineImages:ee=!1,plugins:ue,keepIframeSrcFn:R=()=>!1,ignoreCSSAttributes:q=new Set([]),errorHandler:N,onMutation:Y,getCanvasManager:de}=e;_C(N);let se=C?window.parent===window:!0,Ce=!1;if(!se)try{window.parent.document&&(Ce=!1)}catch{Ce=!0}if(se&&!t)throw new Error("emit function is required");if(!se&&!Ce)return()=>{};G!==void 0&&E.mousemove===void 0&&(E.mousemove=G),sn.reset();let nt=_===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:g!==void 0?g:{},Ln=S===!0||S==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:S==="all",headMetaDescKeywords:S==="all"}:S||{};uC();let rt,ht=0,an=ne=>{for(let Nt of ue||[])Nt.eventProcessor&&(ne=Nt.eventProcessor(ne));return B&&!Ce&&(ne=B(ne)),ne};Ne=(ne,Nt)=>{let re=ne;if(re.timestamp=dc(),Lo[0]?.isFrozen()&&re.type!==K.FullSnapshot&&!(re.type===K.IncrementalSnapshot&&re.data.source===j.Mutation)&&Lo.forEach($e=>$e.unfreeze()),se)t?.(an(re),Nt);else if(Ce){let $e={type:"rrweb",event:an(re),origin:window.location.origin,isCheckout:Nt};window.parent.postMessage($e,"*")}if(re.type===K.FullSnapshot)rt=re,ht=0;else if(re.type===K.IncrementalSnapshot){if(re.data.source===j.Mutation&&re.data.isAttachIframe)return;ht++;let $e=r&&ht>=r,ae=n&&rt&&re.timestamp-rt.timestamp>n;($e||ae)&&cn(!0)}};let Pn=ne=>{Ne({type:K.IncrementalSnapshot,data:{source:j.Mutation,...ne}})},$o=ne=>Ne({type:K.IncrementalSnapshot,data:{source:j.Scroll,...ne}}),ls=ne=>Ne({type:K.IncrementalSnapshot,data:{source:j.CanvasMutation,...ne}}),Wo=ne=>Ne({type:K.IncrementalSnapshot,data:{source:j.AdoptedStyleSheet,...ne}}),fe=new jd({mutationCb:Pn,adoptedStyleSheetCb:Wo}),Ie=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new Hd:new Gd({mirror:sn,mutationCb:Pn,stylesheetManager:fe,recordCrossOriginIframes:C,wrappedEmit:Ne});for(let ne of ue||[])ne.getMirror&&ne.getMirror({nodeMirror:sn,crossOriginIframeMirror:Ie.crossOriginIframeMirror,crossOriginIframeStyleMirror:Ie.crossOriginIframeStyleMirror});let Gt=new zd,Ge=OC(de,{mirror:sn,win:window,mutationCb:ne=>Ne({type:K.IncrementalSnapshot,data:{source:j.CanvasMutation,...ne}}),recordCanvas:x,blockClass:o,blockSelector:i,unblockSelector:s,maxCanvasSize:z,sampling:E.canvas,dataURLOptions:k,errorHandler:N}),Ye=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new $d:new Wd({mutationCb:Pn,scrollCb:$o,bypassOptions:{onMutation:Y,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskInputOptions:nt,dataURLOptions:k,maskAttributeFn:b,maskTextFn:M,maskInputFn:D,recordCanvas:x,inlineImages:ee,sampling:E,slimDOMOptions:Ln,iframeManager:Ie,stylesheetManager:fe,canvasManager:Ge,keepIframeSrcFn:R,processedNodeManager:Gt,ignoreCSSAttributes:q},mirror:sn}),cn=(ne=!1)=>{if(!A)return;Ne({type:K.Meta,data:{href:window.location.href,width:$g(),height:Gg()}},ne),fe.reset(),Ye.init(),Lo.forEach(re=>re.lock());let Nt=aC(document,{mirror:sn,blockClass:o,blockSelector:i,unblockSelector:s,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,inlineStylesheet:m,maskAllInputs:nt,maskAttributeFn:b,maskInputFn:D,maskTextFn:M,slimDOM:Ln,dataURLOptions:k,recordCanvas:x,inlineImages:ee,onSerialize:re=>{zg(re,sn)&&Ie.addIframe(re),qg(re,sn)&&fe.trackLinkElement(re),Pd(re)&&Ye.addShadowRoot(re.shadowRoot,document)},onIframeLoad:(re,$e)=>{Ie.attachIframe(re,$e),re.contentWindow&&Ge.addWindow(re.contentWindow),Ye.observeAttachShadow(re)},onStylesheetLoad:(re,$e)=>{fe.attachLinkElement(re,$e)},onBlockedImageLoad:(re,$e,{width:ae,height:jo})=>{Pn({adds:[],removes:[],texts:[],attributes:[{id:$e.id,attributes:{style:{width:`${ae}px`,height:`${jo}px`}}}]})},keepIframeSrcFn:R,ignoreCSSAttributes:q});if(!Nt)return console.warn("Failed to snapshot the document");Ne({type:K.FullSnapshot,data:{node:Nt,initialOffset:Hg(window)}}),Lo.forEach(re=>re.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&fe.adoptStyleSheets(document.adoptedStyleSheets,sn.getId(document))};mc=cn;try{let ne=[],Nt=$e=>oe(wC)({onMutation:Y,mutationCb:Pn,mousemoveCb:(ae,jo)=>Ne({type:K.IncrementalSnapshot,data:{source:jo,positions:ae}}),mouseInteractionCb:ae=>Ne({type:K.IncrementalSnapshot,data:{source:j.MouseInteraction,...ae}}),scrollCb:$o,viewportResizeCb:ae=>Ne({type:K.IncrementalSnapshot,data:{source:j.ViewportResize,...ae}}),inputCb:ae=>Ne({type:K.IncrementalSnapshot,data:{source:j.Input,...ae}}),mediaInteractionCb:ae=>Ne({type:K.IncrementalSnapshot,data:{source:j.MediaInteraction,...ae}}),styleSheetRuleCb:ae=>Ne({type:K.IncrementalSnapshot,data:{source:j.StyleSheetRule,...ae}}),styleDeclarationCb:ae=>Ne({type:K.IncrementalSnapshot,data:{source:j.StyleDeclaration,...ae}}),canvasMutationCb:ls,fontCb:ae=>Ne({type:K.IncrementalSnapshot,data:{source:j.Font,...ae}}),selectionCb:ae=>{Ne({type:K.IncrementalSnapshot,data:{source:j.Selection,...ae}})},customElementCb:ae=>{Ne({type:K.IncrementalSnapshot,data:{source:j.CustomElement,...ae}})},blockClass:o,ignoreClass:a,ignoreSelector:c,maskAllText:u,maskTextClass:d,unmaskTextClass:l,maskTextSelector:f,unmaskTextSelector:p,maskInputOptions:nt,inlineStylesheet:m,sampling:E,recordDOM:A,recordCanvas:x,inlineImages:ee,userTriggeredOnInput:F,collectFonts:te,doc:$e,maskAttributeFn:b,maskInputFn:D,maskTextFn:M,keepIframeSrcFn:R,blockSelector:i,unblockSelector:s,slimDOMOptions:Ln,dataURLOptions:k,mirror:sn,iframeManager:Ie,stylesheetManager:fe,shadowDomManager:Ye,processedNodeManager:Gt,canvasManager:Ge,ignoreCSSAttributes:q,plugins:ue?.filter(ae=>ae.observer)?.map(ae=>({observer:ae.observer,options:ae.options,callback:jo=>Ne({type:K.Plugin,data:{plugin:ae.name,payload:jo}})}))||[]},{});Ie.addLoadListener($e=>{try{ne.push(Nt($e.contentDocument))}catch(ae){console.warn(ae)}});let re=()=>{cn(),ne.push(Nt(document))};return document.readyState==="interactive"||document.readyState==="complete"?re():(ne.push(mt("DOMContentLoaded",()=>{Ne({type:K.DomContentLoaded,data:{}}),P==="DOMContentLoaded"&&re()})),ne.push(mt("load",()=>{Ne({type:K.Load,data:{}}),P==="load"&&re()},window))),()=>{ne.forEach($e=>$e()),Gt.destroy(),mc=void 0,gC()}}catch(ne){console.warn(ne)}}function xC(e){if(!mc)throw new Error("please take full snapshot after start recording");mc(e)}Mn.mirror=sn;Mn.takeFullSnapshot=xC;function OC(e,t){try{return e?e(t):new pc}catch{return console.warn("Unable to initialize CanvasManager"),new pc}}var Ig;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Ig||(Ig={}));var MC=3,LC=5;function lf(e){return e>9999999999?e:e*1e3}function Cd(e){return e>9999999999?e/1e3:e}function is(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:K.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Ue(t,10,1e3)}}),t.category==="console")))}var PC="button,a";function Zg(e){return e.closest(PC)||e}function eS(e){let t=tS(e);return!t||!(t instanceof Element)?t:Zg(t)}function tS(e){return UC(e)?e.target:e}function UC(e){return typeof e=="object"&&!!e&&"target"in e}var or;function DC(e){return or||(or=[],BC()),or.push(e),()=>{let t=or?or.indexOf(e):-1;t>-1&&or.splice(t,1)}}function BC(){ge(Te,"open",function(e){return function(...t){if(or)try{or.forEach(n=>n())}catch{}return e.apply(Te,t)}})}var FC=new Set([j.Mutation,j.StyleSheetRule,j.StyleDeclaration,j.AdoptedStyleSheet,j.CanvasMutation,j.Selection,j.MediaInteraction]);function HC(e,t,n){e.handleClick(t,n)}var qd=class{constructor(t,n,r=is){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){let t=DC(()=>{this._lastMutation=Ag()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if($C(n,this._ignoreSelector)||!WC(t))return;let r={timestamp:Cd(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(o=>o.node===r.node&&Math.abs(o.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Cd(t)}registerScroll(t=Date.now()){this._lastScroll=Cd(t)}registerClick(t){let n=Zg(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){let t=[],n=Ag();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(let r of t){let o=this._clicks.indexOf(r);o>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(o,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){let n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,o=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!o,{clickCount:s,clickBreadcrumb:a}=t;if(i){let c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,u=c<this._timeout*1e3?"mutation":"timeout",d={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Te.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:u,clickCount:s||1}};this._addBreadcrumbEvent(n,d);return}if(s>1){let c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Te.location.href,route:n.getCurrentRoute(),clickCount:s,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Or(()=>this._checkClicks(),1e3)}},GC=["A","BUTTON","INPUT"];function $C(e,t){return!!(!GC.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function WC(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Ag(){return Date.now()/1e3}function jC(e,t){try{if(!zC(t))return;let{source:n}=t.data;if(FC.has(n)&&e.registerMutation(t.timestamp),n===j.Scroll&&e.registerScroll(t.timestamp),qC(t)){let{type:r,id:o}=t.data,i=Mn.mirror.getNode(o);i instanceof HTMLElement&&r===pt.Click&&e.registerClick(i)}}catch{}}function zC(e){return e.type===MC}function qC(e){return e.data.source===j.MouseInteraction}function En(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var df=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(df||{}),YC=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function VC(e){let t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(let n in e)if(YC.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}var KC=e=>t=>{if(!e.isEnabled())return;let n=JC(t);if(!n)return;let r=t.name==="click",o=r?t.event:void 0;r&&e.clickDetector&&o?.target&&!o.altKey&&!o.metaKey&&!o.ctrlKey&&!o.shiftKey&&HC(e.clickDetector,n,eS(t.event)),is(e,n)};function nS(e,t){let n=Mn.mirror.getId(e),r=n&&Mn.mirror.getNode(n),o=r&&Mn.mirror.getMeta(r),i=o&&QC(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(s=>s.type===df.Text&&s.textContent).filter(Boolean).map(s=>s.trim()).join(""),attributes:VC(i.attributes)}}:{}}}function JC(e){let{target:t,message:n}=XC(e);return En({category:`ui.${e.name}`,...nS(t,n)})}function XC(e){let t=e.name==="click",n,r=null;try{r=t?eS(e.event):tS(e.event),n=Re(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function QC(e){return e.type===df.Element}function ZC(e,t){if(!e.isEnabled())return;e.updateUserActivity();let n=e0(t);n&&is(e,n)}function e0(e){let{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:s}=e;if(!s||t0(s)||!i)return null;let a=t||r||o,c=i.length===1;if(!a&&c)return null;let u=Re(s,{maxStringLength:200})||"<unknown>",d=nS(s,u);return En({category:"ui.keyDown",message:u,data:{...d.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i}})}function t0(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}var n0={resource:a0,paint:i0,navigation:s0};function wd(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function r0(e){return e.map(o0).filter(Boolean)}function o0(e){let t=n0[e.entryType];return t?t(e):null}function Do(e){return((Se()||Te.performance.timeOrigin)+e)/1e3}function i0(e){let{duration:t,entryType:n,name:r,startTime:o}=e,i=Do(o);return{type:n,name:r,start:i,end:i+t,data:void 0}}function s0(e){let{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:s,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:u,loadEventStart:d,loadEventEnd:l,redirectCount:f,startTime:p,transferSize:m,type:_}=e;return o===0?null:{type:`${t}.${_}`,start:Do(p),end:Do(i),name:n,data:{size:m,decodedBodySize:r,encodedBodySize:s,duration:o,domInteractive:u,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:d,loadEventEnd:l,domComplete:i,redirectCount:f}}}function a0(e){let{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:s,encodedBodySize:a,responseStatus:c,transferSize:u}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Do(i),end:Do(o),name:r,data:{size:u,statusCode:c,decodedBodySize:s,encodedBodySize:a}}}function c0(e){let t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return ff(e,"largest-contentful-paint",n)}function u0(e){return e.sources!==void 0}function l0(e){let t=[],n=[];for(let r of e.entries)if(u0(r)){let o=[];for(let i of r.sources)if(i.node){n.push(i.node);let s=Mn.mirror.getId(i.node);s&&o.push(s)}t.push({value:r.value,nodeIds:o.length?o:void 0})}return ff(e,"cumulative-layout-shift",n,t)}function d0(e){let t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return ff(e,"interaction-to-next-paint",n)}function ff(e,t,n,r){let o=e.value,i=e.rating,s=Do(o);return{type:"web-vital",name:t,start:s,end:s,data:{value:o,size:o,rating:i,nodeIds:n?n.map(a=>Mn.mirror.getId(a)):void 0,attributions:r}}}function f0(e){function t(o){e.performanceEntries.includes(o)||e.performanceEntries.push(o)}function n({entries:o}){o.forEach(t)}let r=[];return["navigation","paint","resource"].forEach(o=>{r.push(Ft(o,n))}),r.push(xr(wd(c0,e)),kr(wd(l0,e)),Gi(wd(d0,e))),()=>{r.forEach(o=>o())}}var $=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,p0='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function m0(){let e=new Blob([p0]);return URL.createObjectURL(e)}var Rg=["log","warn","error"],sc="[Replay] ";function kd(e,t="info"){lt({category:"console",data:{logger:"replay"},level:t,message:`${sc}${e}`},{level:t})}function h0(){let e=!1,t=!1,n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return $?(Rg.forEach(r=>{n[r]=(...o)=>{h[r](sc,...o),t&&kd(o.join(""),Yn(r))}}),n.exception=(r,...o)=>{o.length&&n.error&&n.error(...o),h.error(sc,r),e?X(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&kd(r,"error")},n.infoTick=(...r)=>{h.log(sc,...r),t&&setTimeout(()=>kd(r[0]),0)}):Rg.forEach(r=>{n[r]=()=>{}}),n}var W=h0(),ts=class extends Error{constructor(){super(`Event buffer exceeded maximum size of ${rf}.`)}},hc=class{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){let n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>rf)throw new ts;this.events.push(t)}finish(){return new Promise(t=>{let n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let t=this.events.map(n=>n.timestamp).sort()[0];return t?lf(t):null}},Yd=class{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){$&&W.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){let r=this._getAndIncrementId();return new Promise((o,i)=>{let s=({data:a})=>{let c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",s),!c.success){$&&W.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}o(c.response)}};this._worker.addEventListener("message",s),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}},Vd=class{constructor(t){this._worker=new Yd(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){let n=lf(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);let r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>rf?Promise.reject(new ts):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{$&&W.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){let t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}},Kd=class{constructor(t){this._fallback=new hc,this._compression=new Vd(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){$&&W.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,o=[];for(let i of t)o.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(o),this._fallback.clear()}catch(i){$&&W.exception(i,"Failed to add events when switching buffers.")}}};function _0({useCompression:e,workerUrl:t}){if(e&&window.Worker){let n=g0(t);if(n)return n}return $&&W.log("Using simple buffer"),new hc}function g0(e){try{let t=e||S0();if(!t)return;$&&W.log(`Using compression worker${e?` from ${e}`:""}`);let n=new Worker(t);return new Kd(n)}catch(t){$&&W.exception(t,"Failed to create compression worker")}}function S0(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?m0():""}function pf(){try{return"sessionStorage"in Te&&!!Te.sessionStorage}catch{return!1}}function E0(e){T0(),e.session=void 0}function T0(){if(pf())try{Te.sessionStorage.removeItem(tf)}catch{}}function rS(e){return e===void 0?!1:Math.random()<e}function bc(e){if(pf())try{Te.sessionStorage.setItem(tf,JSON.stringify(e))}catch{}}function oS(e){let t=Date.now(),n=e.id||le(),r=e.started||t,o=e.lastActivity||t,i=e.segmentId||0,s=e.sampled,a=e.previousSessionId,c=e.dirty||!1;return{id:n,started:r,lastActivity:o,segmentId:i,sampled:s,previousSessionId:a,dirty:c}}function y0(e,t){return rS(e)?"session":t?"buffer":!1}function vg({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){let o=y0(e,t),i=oS({sampled:o,previousSessionId:r});return n&&bc(i),i}function b0(){if(!pf())return null;try{let e=Te.sessionStorage.getItem(tf);if(!e)return null;let t=JSON.parse(e);return $&&W.infoTick("Loading existing session"),oS(t)}catch{return null}}function Jd(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function iS(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return Jd(e.started,t,r)||Jd(e.lastActivity,n,r)}function sS(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!iS(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function xd({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){let o=r.stickySession&&b0();return o?sS(o,{sessionIdleExpire:e,maxReplayDuration:t})?($&&W.infoTick("Session in sessionStorage is expired, creating new one..."),vg(r,{previousSessionId:o.id})):o:($&&W.infoTick("Creating new session"),vg(r,{previousSessionId:n}))}function I0(e){return e.type===K.Custom}function mf(e,t,n){return cS(e,t)?(aS(e,t,n),!0):!1}function A0(e,t,n){return cS(e,t)?aS(e,t,n):Promise.resolve(null)}async function aS(e,t,n){let{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;let o=e.recordingMode==="buffer";try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);let i=e.getOptions(),s=R0(t,i.beforeAddRecordingEvent);return s?await r.addEvent(s):void 0}catch(i){let s=i&&i instanceof ts,a=s?"addEventSizeExceeded":"addEvent",c=T();if(c){let u=s?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(u,"replay")}if(s&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:a})}}function cS(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;let n=lf(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?($&&W.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function R0(e,t){try{if(typeof t=="function"&&I0(e))return t(e)}catch(n){return $&&W.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function hf(e){return!e.type}function Xd(e){return e.type==="transaction"}function v0(e){return e.type==="replay_event"}function Ng(e){return e.type==="feedback"}function N0(e){return(t,n)=>{if(!e.isEnabled()||!hf(t)&&!Xd(t))return;let r=n.statusCode;if(!(!r||r<200||r>=300)){if(Xd(t)){C0(e,t);return}w0(e,t)}}}function C0(e,t){let n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function w0(e,t){let n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;let{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||Or(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(o){e.handleException(o)}})}function k0(e){return t=>{!e.isEnabled()||!hf(t)||x0(e,t)}}function x0(e,t){let n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let r=En({category:"replay.hydrate-error",data:{url:st()}});is(e,r)}}function O0(e){let t=T();t&&t.on("beforeAddBreadcrumb",n=>M0(e,n))}function M0(e,t){if(!e.isEnabled()||!uS(t))return;let n=L0(t);n&&is(e,n)}function L0(e){return!uS(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?P0(e):En(e)}function P0(e){let t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return En(e);let n=!1,r=t.map(o=>{if(!o)return o;if(typeof o=="string")return o.length>nc?(n=!0,`${o.slice(0,nc)}\u2026`):o;if(typeof o=="object")try{let i=Ue(o,7);return JSON.stringify(i).length>nc?(n=!0,`${JSON.stringify(i,null,2).slice(0,nc)}\u2026`):i}catch{}return o});return En({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function uS(e){return!!e.category}function U0(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function lS(){let e=O().getPropagationContext().dsc;e&&delete e.replay_id;let t=J();if(t){let n=ke(t);delete n.replay_id}}function D0(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:K.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function B0(e,t){return e.recordingMode!=="buffer"||t.message===nf||!t.exception||t.type?!1:rS(e.getOptions().errorSampleRate)}function F0(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(v0(t))return delete t.breadcrumbs,t;if(!hf(t)&&!Xd(t)&&!Ng(t))return t;if(!e.checkAndHandleExpiredSession())return lS(),t;if(Ng(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),D0(e,t),t;if(U0(t,n)&&!e.getOptions()._experiments.captureExceptions)return $&&W.log("Ignoring error from rrweb internals",t),null;let o=B0(e,t);if((o||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),o&&e.recordingMode==="buffer"&&e.session?.sampled==="buffer"){let s=e.session;s.dirty=!0,e.getOptions().stickySession&&bc(s)}return t},{id:"Replay"})}function Ic(e,t){return t.map(({type:n,start:r,end:o,name:i,data:s})=>{let a=e.throttledAddEvent({type:K.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:s}}});return typeof a=="string"?Promise.resolve(null):a})}function H0(e){let{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function G0(e){return t=>{if(!e.isEnabled())return;let n=H0(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Ic(e,[n]),!1)))}}function $0(e,t){return $&&e.getOptions()._experiments.traceInternals?!1:Ii(t,T())}function dS(e,t){e.isEnabled()&&t!==null&&($0(e,t.name)||e.addUpdate(()=>(Ic(e,[t]),!0)))}function Ac(e){if(!e)return;let t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){let n=qa(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function fS(e){if(!e)return;let t=parseInt(e,10);return isNaN(t)?void 0:t}function _c(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};let n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function pS(e,t){if(!t)return null;let{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:s,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:i,statusCode:s,request:a,response:c}}}function ns(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function ir(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};let r={headers:e,size:t},{body:o,warnings:i}=W0(n);return r.body=o,i?.length&&(r._meta={warnings:i}),r}function Qd(e,t){return Object.entries(e).reduce((n,[r,o])=>{let i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=o),n},{})}function W0(e){if(!e||typeof e!="string")return{body:e};let t=e.length>cg,n=j0(e);if(t){let r=e.slice(0,cg);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}\u2026`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function j0(e){let t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function gc(e,t){let n=z0(e);return je(n,t)}function z0(e,t=Te.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Te.location.origin))return e;let n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;let r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function q0(e,t,n){try{let r=await V0(e,t,n),o=pS("resource.fetch",r);dS(n.replay,o)}catch(r){$&&W.exception(r,"Failed to capture fetch breadcrumb")}}function Y0(e,t){let{input:n,response:r}=t,o=n?Ao(n):void 0,i=Ac(o),s=r?fS(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),s!==void 0&&(e.data.response_body_size=s)}async function V0(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:s,method:a,status_code:c=0,request_body_size:u,response_body_size:d}=e.data,l=gc(s,n.networkDetailAllowUrls)&&!gc(s,n.networkDetailDenyUrls),f=l?K0(n,t.input,u):ns(u),p=await J0(l,n,t.response,d);return{startTimestamp:o,endTimestamp:i,url:s,method:a,statusCode:c,request:f,response:p}}function K0({networkCaptureBodies:e,networkRequestHeaders:t},n,r){let o=n?Z0(n,t):{};if(!e)return ir(o,r,void 0);let i=Ao(n),[s,a]=Lr(i,W),c=ir(o,r,s);return a?_c(c,a):c}async function J0(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,o){if(!e&&o!==void 0)return ns(o);let i=r?mS(r.headers,n):{};if(!r||!t&&o!==void 0)return ir(i,o,void 0);let[s,a]=await Q0(r),c=X0(s,{networkCaptureBodies:t,responseBodySize:o,captureDetails:e,headers:i});return a?_c(c,a):c}function X0(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:o}){try{let i=e?.length&&n===void 0?Ac(e):n;return r?t?ir(o,i,e):ir(o,i,void 0):ns(i)}catch(i){return $&&W.exception(i,"Failed to serialize response body"),ir(o,n,void 0)}}async function Q0(e){let t=ew(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await tw(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?($&&W.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):($&&W.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function mS(e,t){let n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function Z0(e,t){return e.length===1&&typeof e[0]!="string"?Cg(e[0],t):e.length===2?Cg(e[1],t):{}}function Cg(e,t){if(!e)return{};let n=e.headers;return n?n instanceof Headers?mS(n,t):Array.isArray(n)?{}:Qd(n,t):{}}function ew(e){try{return e.clone()}catch(t){$&&W.exception(t,"Failed to clone response body")}}function tw(e){return new Promise((t,n)=>{let r=Or(()=>n(new Error("Timeout while trying to read response body")),500);nw(e).then(o=>t(o),o=>n(o)).finally(()=>clearTimeout(r))})}async function nw(e){return await e.text()}async function rw(e,t,n){try{let r=iw(e,t,n),o=pS("resource.xhr",r);dS(n.replay,o)}catch(r){$&&W.exception(r,"Failed to capture xhr breadcrumb")}}function ow(e,t){let{xhr:n,input:r}=t;if(!n)return;let o=Ac(r),i=n.getResponseHeader("content-length")?fS(n.getResponseHeader("content-length")):cw(n.response,n.responseType);o!==void 0&&(e.data.request_body_size=o),i!==void 0&&(e.data.response_body_size=i)}function iw(e,t,n){let r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:s,xhr:a}=t,{url:c,method:u,status_code:d=0,request_body_size:l,response_body_size:f}=e.data;if(!c)return null;if(!a||!gc(c,n.networkDetailAllowUrls)||gc(c,n.networkDetailDenyUrls)){let B=ns(l),E=ns(f);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:B,response:E}}let p=a[ft],m=p?Qd(p.request_headers,n.networkRequestHeaders):{},_=Qd(zi(a),n.networkResponseHeaders),[g,S]=n.networkCaptureBodies?Lr(s,W):[void 0],[b,D]=n.networkCaptureBodies?sw(a):[void 0],M=ir(m,l,g),z=ir(_,f,b);return{startTimestamp:o,endTimestamp:i,url:c,method:u,statusCode:d,request:S?_c(M,S):M,response:D?_c(z,D):z}}function sw(e){let t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return aw(e.response,e.responseType)}catch(n){t.push(n)}return $&&W.warn("Failed to get xhr response body",...t),[void 0]}function aw(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return $&&W.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return $&&W.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function cw(e,t){try{let n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return Ac(n)}catch{return}}function uw(e){let t=T();try{let{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s}=e.getOptions(),a={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:s};t&&t.on("beforeAddBreadcrumb",(c,u)=>lw(a,c,u))}catch{}}function lw(e,t,n){if(t.data)try{dw(t)&&pw(n)&&(ow(t,n),rw(t,n,e)),fw(t)&&mw(n)&&(Y0(t,n),q0(t,n,e))}catch(r){$&&W.exception(r,"Error when enriching network breadcrumb")}}function dw(e){return e.category==="xhr"}function fw(e){return e.category==="fetch"}function pw(e){return e?.xhr}function mw(e){return e?.response}function hw(e){let t=T();ji(KC(e)),xn(G0(e)),O0(e),uw(e);let n=F0(e);hi(n),t&&(t.on("beforeSendEvent",k0(e)),t.on("afterSendEvent",N0(e)),t.on("createDsc",r=>{let o=e.getSessionId();o&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=o)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,o)=>{let i=e.getSessionId();o?.includeReplay&&e.isEnabled()&&i&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function _w(e){try{return Promise.all(Ic(e,[gw(Te.performance.memory)]))}catch{return[]}}function gw(e){let{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Sw(e,t,n){return Ku(e,t,{...n,setTimeoutImpl:Or})}var ic=v.navigator;function Ew(){return/iPhone|iPad|iPod/i.test(ic?.userAgent??"")||/Macintosh/i.test(ic?.userAgent??"")&&ic?.maxTouchPoints&&ic?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function Tw(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){$&&W.warn("Received replay event after session expired.");return}let o=r||!t;t=!0,e.clickDetector&&jC(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&o&&e.setInitialState(),!mf(e,n,o))return!0;if(!o)return!1;let i=e.session;if(bw(e,o),e.recordingMode==="buffer"&&i&&e.eventBuffer&&!i.dirty){let s=e.eventBuffer.getEarliestTimestamp();s&&($&&W.log(`Updating session start time to earliest event in buffer to ${new Date(s)}`),i.started=s,e.getOptions().stickySession&&bc(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function yw(e){let t=e.getOptions();return{type:K.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function bw(e,t){!t||!e.session||e.session.segmentId!==0||mf(e,yw(e),!1)}function Iw(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Aw(e,t,n,r){return xe(ii(e,Gn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function Rw({recordingData:e,headers:t}){let n,r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{let i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function vw({client:e,scope:t,replayId:n,event:r}){let o=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:o};e.emit("preprocessEvent",r,i);let s=await li(e.getOptions(),r,i,t,e,ce());if(!s)return null;e.emit("postprocessEvent",s,i),s.platform=s.platform||"javascript";let a=e.getSdkMetadata(),{name:c,version:u,settings:d}=a?.sdk||{};return s.sdk={...s.sdk,name:c||"sentry.javascript.unknown",version:u||"0.0.0",settings:d},s}async function Nw({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:o,session:i}){let s=Rw({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:u,initialTimestamp:d}=r,l=T(),f=O(),p=l?.getTransport(),m=l?.getDsn();if(!l||!p||!m||!i.sampled)return Promise.resolve({});let _={type:_N,replay_start_timestamp:d/1e3,timestamp:o/1e3,error_ids:c,trace_ids:u,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await vw({scope:f,client:l,replayId:t,event:_});if(!g)return l.recordDroppedEvent("event_processor","replay"),$&&W.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete g.sdkProcessingMetadata;let S=Aw(g,s,m,l.getOptions().tunnel),b;try{b=await p.send(S)}catch(M){let z=new Error(nf);try{z.cause=M}catch{}throw z}if(typeof b.statusCode=="number"&&(b.statusCode<200||b.statusCode>=300))throw new Sc(b.statusCode);let D=Ei({},b);if(Si(D,"replay"))throw new rs(D);return b}var Sc=class extends Error{constructor(t){super(`Transport returned status code ${t}`)}},rs=class extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}};async function hS(e,t={count:0,interval:bN}){let{recordingData:n,onError:r}=e;if(n.length)try{return await Nw(e),!0}catch(o){if(o instanceof Sc||o instanceof rs)throw o;if(fi("Replays",{_retryCount:t.count}),r&&r(o),t.count>=IN){let i=new Error(`${nf} - max retries exceeded`);try{i.cause=o}catch{}throw i}return t.interval*=++t.count,new Promise((i,s)=>{Or(async()=>{try{await hS(e,t),i(!0)}catch(a){s(a)}},t.interval)})}}var _S="__THROTTLED",Cw="__SKIPPED";function ww(e,t,n){let r=new Map,o=a=>{let c=a-n;r.forEach((u,d)=>{d<c&&r.delete(d)})},i=()=>[...r.values()].reduce((a,c)=>a+c,0),s=!1;return(...a)=>{let c=Math.floor(Date.now()/1e3);if(o(c),i()>=t){let d=s;return s=!0,d?Cw:_S}s=!1;let u=r.get(c)||0;return r.set(c,u+1),e(...a)}}var Zd=class{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:gN,sessionIdleExpire:SN},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Sw(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=ww((s,a)=>A0(this,s,a),300,5);let{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(AN,r),timeout:r,scrollTimeout:RN,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new qd(this,i)),$){let s=t._experiments;W.setConfig({captureExceptions:!!s.captureExceptions,traceInternals:!!s.traceInternals})}this._handleVisibilityChange=()=>{Te.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{let s=En({category:"ui.blur"});this._doChangeToBackgroundTasks(s)},this._handleWindowFocus=()=>{let s=En({category:"ui.focus"});this._doChangeToForegroundTasks(s)},this._handleKeyboardEvent=s=>{ZC(this,s)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){$&&W.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){let{errorSampleRate:n,sessionSampleRate:r}=this._options,o=n<=0&&r<=0;if(this._requiresManualStart=o,!o){if(this._initializeSessionForSampling(t),!this.session){$&&W.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",$&&W.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){$&&W.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){$&&W.log("Buffering is in progress, call `flush()` to save the replay");return}$&&W.infoTick("Starting replay in session mode"),this._updateUserActivity();let t=xd({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){$&&W.log("Buffering is in progress, call `flush()` to save the replay");return}$&&W.infoTick("Starting replay in buffer mode");let t=xd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{let t=this._canvas;this._stopRecording=Mn({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:yN}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Tw(this),...Ew(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{$&&W.log(`Stopping Replay${n?` triggered by ${n}`:""}`),lS(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,E0(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),$&&W.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),$&&W.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();let n=Date.now();$&&W.log("Converting buffer to session"),await this.flushImmediate();let r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this.session.dirty=!1,this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){let n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&Jd(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){let t=`${Te.location.pathname}${Te.location.hash}${Te.location.search}`,n=`${Te.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){let r=this._throttledAddEvent(t,n);if(r===_S){let o=En({category:"replay.throttled"});this.addUpdate(()=>!mf(this,{type:LC,timestamp:o.timestamp||0,data:{tag:"breadcrumb",payload:o,metric:!0}}))}return r}getCurrentRoute(){let t=this.lastActiveSpan||J(),n=t&&Z(t),o=(n&&L(n).data||{})[ve];if(!(!n||!o||!["route","custom"].includes(o)))return L(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=_0({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){let n=this._options.errorSampleRate>0,r=xd({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;let t=this.session;return sS(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Te.document.addEventListener("visibilitychange",this._handleVisibilityChange),Te.addEventListener("blur",this._handleWindowBlur),Te.addEventListener("focus",this._handleWindowFocus),Te.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(hw(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=f0(this)}_removeListeners(){try{Te.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Te.removeEventListener("blur",this._handleWindowBlur),Te.removeEventListener("focus",this._handleWindowFocus),Te.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||iS(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){$&&W.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:K.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=r0(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){let n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Ic(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;let r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){let t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){let t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){$&&W.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await _w(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");let r=this._popEventContext(),o=this.session.segmentId++;this._maybeSaveSession();let i=await this.eventBuffer.finish();await hS({replayId:t,recordingData:i,segmentId:o,eventContext:r,session:this.session,timestamp:n,onError:s=>this.handleException(s)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});let r=T();if(r){let o=n instanceof rs?"ratelimit_backoff":"send_error";r.recordDroppedEvent(o,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){$&&W.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;let n=this.session.started,o=Date.now()-n;this._debouncedFlush.cancel();let i=o<this._options.minReplayDuration,s=o>this._options.maxReplayDuration+5e3;if(i||s){$&&W.log(`Session duration (${Math.floor(o/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}let a=this.eventBuffer;a&&this.session.segmentId===0&&!a.hasCheckout&&$&&W.log("Flushing initial segment without checkout.");let c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(u){this.handleException(u)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&bc(this.session)}_onMutationHandler(t){let{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(a=>{let c=Iw(a.target),u=n.join(",");return c?.matches(u)}))return!1;let r=t.length,o=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=o&&r>o;if(r>i||s){let a=En({category:"replay.mutations",data:{count:r,limit:s}});this._createCustomBreadcrumb(a)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}};function Yi(e,t){return[...e,...t].join(",")}function kw({mask:e,unmask:t,block:n,unblock:r,ignore:o}){let i=["base","iframe[srcdoc]:not([src])"],s=Yi(e,[".sentry-mask","[data-sentry-mask]"]),a=Yi(t,[]);return{maskTextSelector:s,unmaskTextSelector:a,blockSelector:Yi(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Yi(r,[]),ignoreSelector:Yi(o,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function xw({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:o,value:i}){return!r||o.unmaskTextSelector&&e.matches(o.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}var wg='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Ow=["content-length","content-type","accept"],kg=!1,gS=(e=>new ef(e)),ef=class{constructor({flushMinDelay:t=EN,flushMaxDelay:n=TN,minReplayDuration:r=vN,maxReplayDuration:o=ug,stickySession:i=!0,useCompression:s=!0,workerUrl:a,_experiments:c={},maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:l=!0,mutationBreadcrumbLimit:f=750,mutationLimit:p=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:_=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:S=[],networkCaptureBodies:b=!0,networkRequestHeaders:D=[],networkResponseHeaders:M=[],mask:z=[],maskAttributes:B=["title","placeholder","aria-label"],unmask:E=[],block:k=[],unblock:G=[],ignore:A=[],maskFn:x,beforeAddRecordingEvent:C,beforeErrorSampling:P,onError:F}={}){this.name="Replay";let te=kw({mask:z,unmask:E,block:k,unblock:G,ignore:A});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{password:!0},maskTextFn:x,maskInputFn:x,maskAttributeFn:(ee,ue,R)=>xw({maskAttributes:B,maskAllText:u,privacyOptions:te,key:ee,value:ue,el:R}),...te,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ee=>{try{ee.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,NN),maxReplayDuration:Math.min(o,ug),stickySession:i,useCompression:s,workerUrl:a,blockAllMedia:l,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:f,mutationLimit:p,slowClickTimeout:m,slowClickIgnoreSelectors:_,networkDetailAllowUrls:g,networkDetailDenyUrls:S,networkCaptureBodies:b,networkRequestHeaders:xg(D),networkResponseHeaders:xg(M),beforeAddRecordingEvent:C,beforeErrorSampling:P,onError:F,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${wg}`:wg,this._recordingOptions.ignoreCSSAttributes=new Set(["background-image"])),this._isInitialized&&Zn())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return kg}set _isInitialized(t){kg=t}afterAllSetup(t){!Zn()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){let n=Mw(this._initialOptions,t);this._replay=new Zd({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{let n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}};function Mw(e,t){let n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},o=kt(n.replaysSessionSampleRate),i=kt(n.replaysOnErrorSampleRate);return o==null&&i==null&&Ve(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),o!=null&&(r.sessionSampleRate=o),i!=null&&(r.errorSampleRate=i),r}function xg(e){return[...Ow,...e.map(t=>t.toLowerCase())]}function SS(){return T()?.getIntegrationByName("Replay")}var Lw=Object.defineProperty,Pw=(e,t,n)=>t in e?Lw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ES=(e,t,n)=>Pw(e,typeof t!="symbol"?t+"":t,n),gf=class{constructor(){ES(this,"idNodeMap",new Map),ES(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){let n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){let r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){let r=this.getNode(t);if(r){let o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Uw(){return new gf}function Dw(e,t){for(let n=e.classList.length;n--;){let r=e.classList[n];if(t.test(r))return!0}return!1}function Sf(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:Sf(e.parentNode,t,n,r+1)}function TS(e,t){return n=>{let r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Dw(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}var Bo=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,yS={map:{},getId(){return console.error(Bo),-1},getNode(){return console.error(Bo),null},removeNodeFromMap(){console.error(Bo)},has(){return console.error(Bo),!1},reset(){console.error(Bo)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(yS=new Proxy(yS,{get(e,t,n){return t==="map"&&console.error(Bo),Reflect.get(e,t,n)}}));function Tf(e,t,n,r,o=window){let i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(s){wS(()=>{n.set.call(this,s)},0),i&&i.set&&i.set.call(this,s)}}),()=>Tf(e,t,i||{},!0)}function yf(e,t,n){try{if(!(t in e))return()=>{};let r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}Date.now().toString();function Bw(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Cc(e,t,n,r,o){if(!e)return!1;let i=Bw(e);if(!i)return!1;let s=TS(t,n);if(!o){let u=r&&i.matches(r);return s(i)&&!u}let a=Sf(i,s),c=-1;return a<0?!1:(r&&(c=Sf(i,TS(null,r))),a>-1&&c<0?!0:a<c)}var bS={};function CS(e){let t=bS[e];if(t)return t;let n=window.document,r=window[e];if(n&&typeof n.createElement=="function")try{let o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o);let i=o.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(o)}catch{}return bS[e]=r.bind(window)}function Ur(...e){return CS("requestAnimationFrame")(...e)}function wS(...e){return CS("setTimeout")(...e)}var Ho=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Ho||{}),vc;function Fw(e){vc=e}var _f=e=>vc?(...n)=>{try{return e(...n)}catch(r){if(vc&&vc(r)===!0)return()=>{};throw r}}:e,Fo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Hw=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(ss=0;ss<Fo.length;ss++)Hw[Fo.charCodeAt(ss)]=ss;var ss,Gw=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=Fo[t[n]>>2],o+=Fo[(t[n]&3)<<4|t[n+1]>>4],o+=Fo[(t[n+1]&15)<<2|t[n+2]>>6],o+=Fo[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o},IS=new Map;function $w(e,t){let n=IS.get(e);return n||(n=new Map,IS.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}var kS=(e,t,n)=>{if(!e||!(OS(e,t)||typeof e=="object"))return;let r=e.constructor.name,o=$w(n,r),i=o.indexOf(e);return i===-1&&(i=o.length,o.push(e)),i};function Nc(e,t,n){if(e instanceof Array)return e.map(r=>Nc(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){let r=e.constructor.name,o=Gw(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Nc(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){let r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){let r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Nc(e.data,t,n),e.width,e.height]};if(OS(e,t)||typeof e=="object"){let r=e.constructor.name,o=kS(e,t,n);return{rr_type:r,index:o}}}}return e}var xS=(e,t,n)=>e.map(r=>Nc(r,t,n)),OS=(e,t)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(o=>typeof t[o]=="function").find(o=>e instanceof t[o]);function Ww(e,t,n,r,o){let i=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(let a of s)try{if(typeof t.CanvasRenderingContext2D.prototype[a]!="function")continue;let c=yf(t.CanvasRenderingContext2D.prototype,a,function(u){return function(...d){return Cc(this.canvas,n,r,o,!0)||wS(()=>{let l=xS(d,t,this);e(this.canvas,{type:Ho["2D"],property:a,args:l})},0),u.apply(this,d)}});i.push(c)}catch{let c=Tf(t.CanvasRenderingContext2D.prototype,a,{set(u){e(this.canvas,{type:Ho["2D"],property:a,args:[u],setter:!0})}});i.push(c)}return()=>{i.forEach(a=>a())}}function jw(e){return e==="experimental-webgl"?"webgl":e}function AS(e,t,n,r,o){let i=[];try{let s=yf(e.HTMLCanvasElement.prototype,"getContext",function(a){return function(c,...u){if(!Cc(this,t,n,r,!0)){let d=jw(c);if("__context"in this||(this.__context=d),o&&["webgl","webgl2"].includes(d))if(u[0]&&typeof u[0]=="object"){let l=u[0];l.preserveDrawingBuffer||(l.preserveDrawingBuffer=!0)}else u.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[c,...u])}});i.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(s=>s())}}function RS(e,t,n,r,o,i,s,a){let c=[],u=Object.getOwnPropertyNames(e);for(let d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof e[d]!="function")continue;let l=yf(e,d,function(f){return function(...p){let m=f.apply(this,p);if(kS(m,a,this),"tagName"in this.canvas&&!Cc(this.canvas,r,o,i,!0)){let _=xS(p,a,this),g={type:t,property:d,args:_};n(this.canvas,g)}return m}});c.push(l)}catch{let l=Tf(e,d,{set(f){n(this.canvas,{type:t,property:d,args:[f],setter:!0})}});c.push(l)}return c}function zw(e,t,n,r,o,i){let s=[];return s.push(...RS(t.WebGLRenderingContext.prototype,Ho.WebGL,e,n,r,o,i,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...RS(t.WebGL2RenderingContext.prototype,Ho.WebGL2,e,n,r,o,i,t)),()=>{s.forEach(a=>a())}}var qw='for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="undefined"==typeof Uint8Array?[]:new Uint8Array(256),a=0;a<64;a++)t[e.charCodeAt(a)]=a;var n=function(t){var a,n=new Uint8Array(t),r=n.length,s="";for(a=0;a<r;a+=3)s+=e[n[a]>>2],s+=e[(3&n[a])<<4|n[a+1]>>4],s+=e[(15&n[a+1])<<2|n[a+2]>>6],s+=e[63&n[a+2]];return r%3==2?s=s.substring(0,s.length-1)+"=":r%3==1&&(s=s.substring(0,s.length-2)+"=="),s};const r=new Map,s=new Map;const i=self;i.onmessage=async function(e){if(!("OffscreenCanvas"in globalThis))return i.postMessage({id:e.data.id});{const{id:t,bitmap:a,width:o,height:f,maxCanvasSize:c,dataURLOptions:g}=e.data,u=async function(e,t,a){const r=e+"-"+t;if("OffscreenCanvas"in globalThis){if(s.has(r))return s.get(r);const i=new OffscreenCanvas(e,t);i.getContext("2d");const o=await i.convertToBlob(a),f=await o.arrayBuffer(),c=n(f);return s.set(r,c),c}return""}(o,f,g),[h,d]=function(e,t,a){if(!a)return[e,t];const[n,r]=a;if(e<=n&&t<=r)return[e,t];let s=e,i=t;return s>n&&(i=Math.floor(n*t/e),s=n),i>r&&(s=Math.floor(r*e/t),i=r),[s,i]}(o,f,c),l=new OffscreenCanvas(h,d),w=l.getContext("bitmaprenderer"),p=h===o&&d===f?a:await createImageBitmap(a,{resizeWidth:h,resizeHeight:d,resizeQuality:"low"});w?.transferFromImageBitmap(p),a.close();const y=await l.convertToBlob(g),v=y.type,b=await y.arrayBuffer(),m=n(b);if(p.close(),!r.has(t)&&await u===m)return r.set(t,m),i.postMessage({id:t});if(r.get(t)===m)return i.postMessage({id:t});i.postMessage({id:t,type:v,base64:m,width:o,height:f}),r.set(t,m)}};';function Yw(){let e=new Blob([qw]);return URL.createObjectURL(e)}var Ef=class{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.shadowDoms=new Set,this.windowsSet=new WeakSet,this.windows=[],this.restoreHandlers=[],this.frozen=!1,this.locked=!1,this.snapshotInProgressMap=new Map,this.worker=null,this.lastSnapshotTime=0,this.processMutation=(a,c)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(a)||this.pendingCanvasMutations.set(a,[]),this.pendingCanvasMutations.get(a).push(c)};let{enableManualSnapshot:n,sampling:r="all",win:o,recordCanvas:i,errorHandler:s}=t;t.sampling=r,this.mutationCb=t.mutationCb,this.mirror=t.mirror,this.options=t,s&&Fw(s),(i&&typeof r=="number"||n)&&(this.worker=this.initFPSWorker()),this.addWindow(o),!n&&_f(()=>{i&&r==="all"&&(this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher()),i&&typeof r=="number"&&this.initCanvasFPSObserver()})()}reset(){this.pendingCanvasMutations.clear(),this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.windowsSet=new WeakSet,this.windows=[],this.shadowDoms=new Set,this.worker?.terminate(),this.worker=null,this.snapshotInProgressMap=new Map}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}addWindow(t){let{sampling:n="all",blockClass:r,blockSelector:o,unblockSelector:i,recordCanvas:s,enableManualSnapshot:a}=this.options;if(!this.windowsSet.has(t)){if(a){this.windowsSet.add(t),this.windows.push(new WeakRef(t));return}_f(()=>{if(s&&n==="all"&&this.initCanvasMutationObserver(t,r,o,i),s&&typeof n=="number"){let c=AS(t,r,o,i,!0);this.restoreHandlers.push(()=>{c()})}})(),this.windowsSet.add(t),this.windows.push(new WeakRef(t))}}addShadowRoot(t){this.shadowDoms.add(new WeakRef(t))}resetShadowRoots(){this.shadowDoms=new Set}snapshot(t,n){if(n?.skipRequestAnimationFrame){this.takeSnapshot(performance.now(),!0,t);return}Ur(r=>this.takeSnapshot(r,!0,t))}initFPSWorker(){let t=new Worker(Yw());return t.onmessage=n=>{let r=n.data,{id:o}=r;if(this.snapshotInProgressMap.set(o,!1),!("base64"in r))return;let{base64:i,type:s,width:a,height:c}=r;this.mutationCb({id:o,type:Ho["2D"],commands:[{property:"clearRect",args:[0,0,a,c]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:i}],type:s}]},0,0,a,c]}]})},t}initCanvasFPSObserver(){let t;if(!this.windows.length&&!this.shadowDoms.size)return;let n=r=>{this.takeSnapshot(r,!1),t=Ur(n)};t=Ur(n),this.restoreHandlers.push(()=>{t&&cancelAnimationFrame(t)})}initCanvasMutationObserver(t,n,r,o){let i=AS(t,n,r,o,!1),s=Ww(this.processMutation.bind(this),t,n,r,o),a=zw(this.processMutation.bind(this),t,n,r,o,this.mirror);this.restoreHandlers.push(()=>{i(),s(),a()})}getCanvasElements(t,n,r){let o=[],i=s=>{s.querySelectorAll("canvas").forEach(a=>{Cc(a,t,n,r,!0)||o.push(a)})};for(let s of this.windows){let a=s.deref(),c;try{c=a&&a.document}catch{}c&&i(c)}for(let s of this.shadowDoms){let a=s.deref();a&&i(a)}return o}takeSnapshot(t,n,r){let{sampling:o,blockClass:i,blockSelector:s,unblockSelector:a,dataURLOptions:c,maxCanvasSize:u}=this.options,l=1e3/(o==="all"?2:o||2);return this.lastSnapshotTime&&t-this.lastSnapshotTime<l?!1:(this.lastSnapshotTime=t,(r?[r]:this.getCanvasElements(i,s,a)).forEach(m=>{let _=this.mirror.getId(m);if(!(!this.mirror.hasNode(m)||!m.width||!m.height||this.snapshotInProgressMap.get(_))){if(this.snapshotInProgressMap.set(_,!0),!n&&["webgl","webgl2"].includes(m.__context)){let g=m.getContext(m.__context);g?.getContextAttributes()?.preserveDrawingBuffer===!1&&g.clear(g.COLOR_BUFFER_BIT)}createImageBitmap(m).then(g=>{this.worker?.postMessage({id:_,bitmap:g,width:m.width,height:m.height,dataURLOptions:c,maxCanvasSize:u},[g])}).catch(g=>{_f(()=>{throw this.snapshotInProgressMap.delete(_),g})()})}}),!0)}startPendingCanvasMutationFlusher(){Ur(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let t=n=>{this.rafStamps.latestId=n,Ur(t)};Ur(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{let r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),Ur(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;let o=r.map(s=>{let{type:a,...c}=s;return c}),{type:i}=r[0];this.mutationCb({id:n,type:i,commands:o}),this.pendingCanvasMutations.delete(t)}};try{if(Array.from([1],e=>e*2)[0]!==2){let e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}Uw();var vS;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(vS||(vS={}));var NS={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}},Vw="ReplayCanvas",Rc=1280,Kw=((e={})=>{let[t,n]=e.maxCanvasSize||[],r={quality:e.quality||"medium",enableManualSnapshot:e.enableManualSnapshot,maxCanvasSize:[t?Math.min(t,Rc):Rc,n?Math.min(n,Rc):Rc]},o,i=new Promise(s=>o=s);return{name:Vw,getOptions(){let{quality:s,enableManualSnapshot:a,maxCanvasSize:c}=r;return{enableManualSnapshot:a,recordCanvas:!0,getCanvasManager:u=>{let d=new Ef({...u,enableManualSnapshot:a,maxCanvasSize:c,errorHandler:l=>{try{typeof l=="object"&&(l.__rrweb__=!0)}catch{}}});return o(d),d},...NS[s]||NS.medium}},async snapshot(s,a){(await i).snapshot(s,a)}}}),MS=Kw;function LS(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function bf(e){try{return new URL(e,w.location.origin).href}catch{return}}function PS(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function If(e){try{return new Headers(e)}catch{return}}var US=new WeakMap,Af=new Map,as={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function wc(e,t){let{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:s,tracePropagationTargets:a,onRequestSpanStart:c,onRequestSpanEnd:u}={...as,...t},d=typeof i=="function"?i:m=>!0,l=m=>Jw(m,a),f={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(m=>(m.type==="transaction"&&m.spans&&m.spans.forEach(_=>{if(_.op==="http.client"){let g=Af.get(_.span_id);g&&(_.timestamp=g/1e3,Af.delete(_.span_id))}}),m)),o&&kl(m=>{if(m.response){let _=US.get(m.response);_&&m.endTimestamp&&Af.set(_,m.endTimestamp)}}),Rr(m=>{let _=al(m,d,l,f,{propagateTraceparent:p,onRequestSpanEnd:u});if(m.response&&m.fetchData.__span&&US.set(m.response,m.fetchData.__span),_){let g=bf(m.fetchData.url),S=g?Zt(g).host:void 0;_.setAttributes({"http.url":g,"server.address":S}),s&&DS(_),c?.(_,{headers:m.headers})}})),r&&Mr(m=>{let _=Xw(m,d,l,f,p,u);_&&(s&&DS(_),c?.(_,{headers:If(m.xhr.__sentry_xhr_v3__?.request_headers)}))})}function DS(e){let{url:t}=L(e).data;if(!t||typeof t!="string")return;let n=Ft("resource",({entries:r})=>{r.forEach(o=>{PS(o)&&o.name.endsWith(t)&&(e.setAttributes(Wi(o)),setTimeout(n))})})}function Jw(e,t){let n=st();if(n){let r,o;try{r=new URL(e,n),o=new URL(n).origin}catch{return!1}let i=r.origin===o;return t?je(r.toString(),t)||i&&je(r.pathname,t):i}else{let r=!!e.match(/^\/(?!\/)/);return t?je(e,t):r}}function Xw(e,t,n,r,o,i){let s=e.xhr,a=s?.[ft];if(!s||s.__sentry_own_request__||!a)return;let{url:c,method:u}=a,d=we()&&t(c);if(e.endTimestamp&&d){let S=s.__sentry_xhr_span_id__;if(!S)return;let b=r[S];b&&a.status_code!==void 0&&(pn(b,a.status_code),b.end(),i?.(b,{headers:If(zi(s)),error:e.error}),delete r[S]);return}let l=bf(c),f=l?Zt(l):Zt(c),p=bi(c),m=!!J(),_=d&&m?Et({name:`${u} ${p}`,attributes:{url:c,type:"xhr","http.method":u,"http.url":l,"server.address":f?.host,[H]:"auto.http.browser",[ie]:"http.client",...f?.search&&{"http.query":f?.search},...f?.hash&&{"http.fragment":f?.hash}}}):new et;s.__sentry_xhr_span_id__=_.spanContext().spanId,r[s.__sentry_xhr_span_id__]=_,n(c)&&Qw(s,we()&&m?_:void 0,o);let g=T();return g&&g.emit("beforeOutgoingRequestSpan",_,e),_}function Qw(e,t,n){let{"sentry-trace":r,baggage:o,traceparent:i}=Tr({span:t,propagateTraceparent:n});r&&Zw(e,r,o,i)}function Zw(e,t,n,r){let o=e.__sentry_xhr_v3__?.request_headers;if(!(o?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!o?.traceparent&&e.setRequestHeader("traceparent",r),n){let i=o?.baggage;(!i||!LS(i))&&e.setRequestHeader("baggage",n)}}catch{}}function BS(){w.document?w.document.addEventListener("visibilitychange",()=>{let e=J();if(!e)return;let t=Z(e);if(w.document.hidden&&t){let n="cancelled",{op:r,status:o}=L(t);I&&h.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),o||t.setStatus({code:2,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):I&&h.warn("[Tracing] Could not set up background tab detection due to lack of global document")}var ek=3600,FS="sentry_previous_trace",tk="sentry.previous_trace";function HS(e,{linkPreviousTrace:t,consistentTraceSampling:n}){let r=t==="session-storage",o=r?ok():void 0;e.on("spanStart",s=>{if(Z(s)!==s)return;let a=O().getPropagationContext();o=nk(o,s,a),r&&rk(o)});let i=!0;n&&e.on("beforeSampling",s=>{if(!o)return;let a=O(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(o.sampleRate),sampled:String(Rf(o.spanContext))},sampleRand:o.sampleRand}),s.parentSampled=Rf(o.spanContext),s.parentSampleRate=o.sampleRate,s.spanAttributes={...s.spanAttributes,[Xo]:o.sampleRate}})}function nk(e,t,n){let r=L(t);function o(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[yn])}catch{return 0}}let i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return i;let s=e.spanContext;return s.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=ek&&(I&&h.log(`Adding previous_trace ${s} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:s,attributes:{[ru]:"previous_trace"}}),t.setAttribute(tk,`${s.traceId}-${s.spanId}-${Rf(s)?1:0}`)),i)}function rk(e){try{w.sessionStorage.setItem(FS,JSON.stringify(e))}catch(t){I&&h.warn("Could not store previous trace in sessionStorage",t)}}function ok(){try{let e=w.sessionStorage?.getItem(FS);return JSON.parse(e)}catch{return}}function Rf(e){return e.traceFlags===1}var ik="BrowserTracing",sk={...Vr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...as},jS=((e={})=>{let t={name:void 0,source:void 0},n=w.document,{enableInp:r,enableElementTiming:o,enableLongTask:i,enableLongAnimationFrame:s,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:u},beforeStartSpan:d,idleTimeout:l,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:m,traceFetch:_,traceXHR:g,trackFetchStreamPerformance:S,shouldCreateSpanForRequest:b,enableHTTPTimings:D,ignoreResourceSpans:M,ignorePerformanceApiSpans:z,instrumentPageLoad:B,instrumentNavigation:E,detectRedirects:k,linkPreviousTrace:G,consistentTraceSampling:A,enableReportPageLoaded:x,onRequestSpanStart:C,onRequestSpanEnd:P}={...sk,...e},F,te,ee;function ue(R,q,N=!0){let Y=q.op==="pageload",de=q.name,se=d?d(q):q,Ce=se.attributes||{};if(de!==se.name&&(Ce[ve]="custom",se.attributes=Ce),!N){let rt=wt();Et({...se,startTime:rt}).end(rt);return}t.name=se.name,t.source=Ce[ve];let nt=$s(se,{idleTimeout:l,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:Y,beforeSpanEnd:rt=>{F?.(),dd(rt,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!u,ignoreResourceSpans:M,ignorePerformanceApiSpans:z}),$S(R,void 0);let ht=O(),an=ht.getPropagationContext();ht.setPropagationContext({...an,traceId:nt.spanContext().traceId,sampled:xt(nt),dsc:ke(rt)}),Y&&(ee=void 0)},trimIdleSpanEndTimestamp:!x});Y&&x&&(ee=nt),$S(R,nt);function Ln(){n&&["interactive","complete"].includes(n.readyState)&&R.emit("idleSpanEnableAutoFinish",nt)}Y&&!x&&n&&(n.addEventListener("readystatechange",()=>{Ln()}),Ln())}return{name:ik,setup(R){if(oi(),F=ad({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:u||!1,client:R}),r&&Sd(),o&&fd(),s&&v.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?ud():i&&cd(),a&&ld(),k&&n){let N=()=>{te=Q()};addEventListener("click",N,{capture:!0}),addEventListener("keydown",N,{capture:!0,passive:!0})}function q(){let N=cs(R);N&&!L(N).timestamp&&(I&&h.log(`[Tracing] Finishing current active span with op: ${L(N).op}`),N.setAttribute(Fn,"cancelled"),N.end())}R.on("startNavigationSpan",(N,Y)=>{if(T()!==R)return;if(Y?.isRedirect){I&&h.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),ue(R,{op:"navigation.redirect",...N},!1);return}te=void 0,q(),ce().setPropagationContext({traceId:ze(),sampleRand:Math.random(),propagationSpanId:we()?void 0:Qe()});let de=O();de.setPropagationContext({traceId:ze(),sampleRand:Math.random(),propagationSpanId:we()?void 0:Qe()}),de.setSDKProcessingMetadata({normalizedRequest:void 0}),ue(R,{op:"navigation",...N,parentSpan:null,forceTransaction:!0})}),R.on("startPageLoadSpan",(N,Y={})=>{if(T()!==R)return;q();let de=Y.sentryTrace||GS("sentry-trace"),se=Y.baggage||GS("baggage"),Ce=Zo(de,se),nt=O();nt.setPropagationContext(Ce),we()||(nt.getPropagationContext().propagationSpanId=Qe()),nt.setSDKProcessingMetadata({normalizedRequest:Fi()}),ue(R,{op:"pageload",...N})}),R.on("endPageloadSpan",()=>{x&&ee&&(ee.setAttribute(Fn,"reportPageLoaded"),ee.end())})},afterAllSetup(R){let q=st();if(G!=="off"&&HS(R,{linkPreviousTrace:G,consistentTraceSampling:A}),w.location){if(B){let N=Se();vf(R,{name:w.location.pathname,startTime:N?N/1e3:void 0,attributes:{[ve]:"url",[H]:"auto.pageload.browser"}})}E&&xn(({to:N,from:Y})=>{if(Y===void 0&&q?.indexOf(N)!==-1){q=void 0;return}q=void 0;let de=Er(N),se=cs(R),Ce=se&&k&&ck(se,te);Nf(R,{name:de?.pathname||w.location.pathname,attributes:{[ve]:"url",[H]:"auto.navigation.browser"}},{url:N,isRedirect:Ce})})}m&&BS(),a&&ak(R,l,f,p,t),r&&Ed(),wc(R,{traceFetch:_,traceXHR:g,trackFetchStreamPerformance:S,tracePropagationTargets:R.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:b,enableHTTPTimings:D,onRequestSpanStart:C,onRequestSpanEnd:P})}}});function vf(e,t,n){e.emit("startPageLoadSpan",t,n),O().setTransactionName(t.name);let r=cs(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function Nf(e,t,n){let{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});let i=O();return i.setTransactionName(t.name),r&&!o&&i.setSDKProcessingMetadata({normalizedRequest:{...Fi(),url:r}}),cs(e)}function GS(e){return w.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function ak(e,t,n,r,o){let i=w.document,s,a=()=>{let c="ui.action.click",u=cs(e);if(u){let d=L(u).op;if(["navigation","pageload"].includes(d)){I&&h.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(s&&(s.setAttribute(Fn,"interactionInterrupted"),s.end(),s=void 0),!o.name){I&&h.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}s=$s({name:o.name,op:c,attributes:{[ve]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",a,{capture:!0})}var zS="_sentry_idleSpan";function cs(e){return e[zS]}function $S(e,t){ye(e,zS,t)}var WS=1.5;function ck(e,t){let n=L(e),r=wt(),o=n.start_timestamp;return!(r-o>WS||t&&r-t<=WS)}function qS(e=T()){e?.emit("endPageloadSpan")}function YS(e){let t=J();if(t===e)return;let n=O();e.end=new Proxy(e.end,{apply(r,o,i){return at(n,t),Reflect.apply(r,o,i)}}),at(n,e)}function Go(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function uk(e,t){let n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);let r=Go(n);return o=>r.then(i=>o(i.transaction(t,"readwrite").objectStore(t)))}function Cf(e){return Go(e.getAllKeys())}function lk(e,t,n){return e(r=>Cf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.max(...o,0)+1),Go(r.transaction)}))}function dk(e,t,n){return e(r=>Cf(r).then(o=>{if(!(o.length>=n))return r.put(t,Math.min(...o,0)-1),Go(r.transaction)}))}function fk(e){return e(t=>Cf(t).then(n=>{let r=n[0];if(r!=null)return Go(t.get(r)).then(o=>(t.delete(r),Go(t.transaction).then(()=>o)))}))}function pk(e){let t;function n(){return t==null&&(t=uk(e.dbName||"sentry-offline",e.storeName||"queue")),t}return{push:async r=>{try{let o=await Hn(r);await lk(n(),o,e.maxQueueSize||30)}catch{}},unshift:async r=>{try{let o=await Hn(r);await dk(n(),o,e.maxQueueSize||30)}catch{}},shift:async()=>{try{let r=await fk(n());if(r)return du(r)}catch{}}}}function mk(e){return t=>{let n=e({...t,createStore:pk});return w.addEventListener("online",async r=>{await n.flush()}),n}}function VS(e=vo){return mk(Wu(e))}var KS=1e6,hk="window"in v&&v.window===v&&typeof importScripts>"u",sr=String(0),kc=hk?"main":"worker",xc=w.navigator,XS="",QS="",ZS="",wf=xc?.userAgent||"",eE="",_k=xc?.language||xc?.languages?.[0]||"";function gk(e){return typeof e=="object"&&e!==null&&"getHighEntropyValues"in e}var JS=xc?.userAgentData;gk(JS)&&JS.getHighEntropyValues(["architecture","model","platform","platformVersion","fullVersionList"]).then(e=>{if(XS=e.platform||"",ZS=e.architecture||"",eE=e.model||"",QS=e.platformVersion||"",e.fullVersionList?.length){let t=e.fullVersionList[e.fullVersionList.length-1];wf=`${t.brand} ${t.version}`}}).catch(e=>{});function Sk(e){return!("thread_metadata"in e)}function Ek(e){return Sk(e)?Ik(e):e}function Tk(e){let t=e.contexts?.trace?.trace_id;return typeof t=="string"&&t.length!==32&&I&&h.log(`[Profiling] Invalid traceId: ${t} on profiled event`),typeof t!="string"?"":t}function yk(e,t,n,r){if(r.type!=="transaction")throw new TypeError("Profiling events may only be attached to transactions, this should never occur.");if(n==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${n} instead.`);let o=Tk(r),i=Ek(n),s=t||(typeof r.start_timestamp=="number"?r.start_timestamp*1e3:Q()*1e3),a=typeof r.timestamp=="number"?r.timestamp*1e3:Q()*1e3;return{event_id:e,timestamp:new Date(s).toISOString(),platform:"javascript",version:"1",release:r.release||"",environment:r.environment||In,runtime:{name:"javascript",version:w.navigator.userAgent},os:{name:XS,version:QS,build_number:wf},device:{locale:_k,model:eE,manufacturer:wf,architecture:ZS,is_emulator:!1},debug_meta:{images:iE(n.resources)},profile:i,transactions:[{name:r.transaction||"",id:r.event_id||le(),trace_id:o,active_thread_id:sr,relative_start_ns:"0",relative_end_ns:((a-s)*1e6).toFixed(0)}]}}function tE(e,t,n){if(e==null)throw new TypeError(`Cannot construct profiling event envelope without a valid profile. Got ${e} instead.`);let r=bk(e),o=t.getOptions(),i=t.getSdkMetadata?.()?.sdk;return{chunk_id:le(),client_sdk:{name:i?.name??"sentry.javascript.browser",version:i?.version??"0.0.0"},profiler_id:n||le(),platform:"javascript",version:"2",release:o.release??"",environment:o.environment??"production",debug_meta:{images:iE(e.resources)},profile:r}}function nE(e){try{if(!e||typeof e!="object")return{reason:"chunk is not an object"};let t=r=>typeof r=="string"&&/^[a-f0-9]{32}$/.test(r);if(!t(e.profiler_id))return{reason:"missing or invalid profiler_id"};if(!t(e.chunk_id))return{reason:"missing or invalid chunk_id"};if(!e.client_sdk)return{reason:"missing client_sdk metadata"};let n=e.profile;return n?!Array.isArray(n.frames)||!n.frames.length?{reason:"profile has no frames"}:!Array.isArray(n.stacks)||!n.stacks.length?{reason:"profile has no stacks"}:!Array.isArray(n.samples)||!n.samples.length?{reason:"profile has no samples"}:{valid:!0}:{reason:"missing profile data"}}catch(t){return{reason:`unknown validation error: ${t}`}}}function bk(e){let t=[];for(let a=0;a<e.frames.length;a++){let c=e.frames[a];c&&(t[a]={function:c.name,abs_path:typeof c.resourceId=="number"?e.resources[c.resourceId]:void 0,lineno:c.line,colno:c.column})}let n=[];for(let a=0;a<e.stacks.length;a++){let c=e.stacks[a];if(!c)continue;let u=[],d=c;for(;d;)u.push(d.frameId),d=d.parentId===void 0?void 0:e.stacks[d.parentId];n[a]=u}let r=Se(),o=typeof performance.timeOrigin=="number"?performance.timeOrigin:r||0,i=o-(r||o),s=[];for(let a=0;a<e.samples.length;a++){let c=e.samples[a];if(!c)continue;let u=(o+(c.timestamp-i))/1e3;s[a]={stack_id:c.stackId??0,thread_id:sr,timestamp:u}}return{frames:t,stacks:n,samples:s,thread_metadata:{[sr]:{name:kc}}}}function Oc(e){return L(e).op==="pageload"}function Ik(e){let t,n=0,r={samples:[],stacks:[],frames:[],thread_metadata:{[sr]:{name:kc}}},o=e.samples[0];if(!o)return r;let i=o.timestamp,s=Se(),a=typeof performance.timeOrigin=="number"?performance.timeOrigin:s||0,c=a-(s||a);return e.samples.forEach((u,d)=>{if(u.stackId===void 0){t===void 0&&(t=n,r.stacks[t]=[],n++),r.samples[d]={elapsed_since_start_ns:((u.timestamp+c-i)*KS).toFixed(0),stack_id:t,thread_id:sr};return}let l=e.stacks[u.stackId],f=[];for(;l;){f.push(l.frameId);let m=e.frames[l.frameId];m&&r.frames[l.frameId]===void 0&&(r.frames[l.frameId]={function:m.name,abs_path:typeof m.resourceId=="number"?e.resources[m.resourceId]:void 0,lineno:m.line,colno:m.column}),l=l.parentId===void 0?void 0:e.stacks[l.parentId]}let p={elapsed_since_start_ns:((u.timestamp+c-i)*KS).toFixed(0),stack_id:n,thread_id:sr};r.stacks[n]=f,r.samples[d]=p,n++}),r}function rE(e,t){if(!t.length)return e;for(let n of t)e[1].push([{type:"profile"},n]);return e}function oE(e){let t=[];return Ot(e,(n,r)=>{if(r==="transaction")for(let o=1;o<n.length;o++)n[o]?.contexts?.profile?.profile_id&&t.push(n[o])}),t}function iE(e){let r=T()?.getOptions()?.stackParser;return r?Tu(r,e):[]}function sE(e){return typeof e!="number"&&typeof e!="boolean"||typeof e=="number"&&isNaN(e)?(I&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e===!0||e===!1?!0:e<0||e>1?(I&&h.warn(`[Profiling] Invalid sample rate. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function Ak(e){return e.samples.length<2?(I&&h.log("[Profiling] Discarding profile because it contains less than 2 samples"),!1):e.frames.length?!0:(I&&h.log("[Profiling] Discarding profile because it contains no frames"),!1)}var kf=!1,xf=3e4;function Rk(e){return typeof e=="function"}function Mc(){let e=w.Profiler;if(!Rk(e)){I&&h.log("[Profiling] Profiling is not supported by this browser, Profiler interface missing on window object.");return}let t=10,n=Math.floor(xf/t);try{return new e({sampleInterval:t,maxBufferSize:n})}catch{I&&(h.log("[Profiling] Failed to initialize the Profiling constructor, this is likely due to a missing 'Document-Policy': 'js-profiling' header."),h.log("[Profiling] Disabling profiling for current user session.")),kf=!0}}function Of(e){if(kf)return I&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session."),!1;if(!e.isRecording())return I&&h.log("[Profiling] Discarding profile because root span was not sampled."),!1;let n=T()?.getOptions();if(!n)return I&&h.log("[Profiling] Profiling disabled, no options found."),!1;let r=n.profilesSampleRate;return sE(r)?r?(r===!0?!0:Math.random()<r)?!0:(I&&h.log(`[Profiling] Discarding profile because it's not included in the random sample (sampling rate = ${Number(r)})`),!1):(I&&h.log("[Profiling] Discarding profile because a negative sampling decision was inherited or profileSampleRate is set to 0"),!1):(I&&h.warn("[Profiling] Discarding profile because of invalid sample rate."),!1)}function aE(e){if(kf)return I&&h.log("[Profiling] Profiling has been disabled for the duration of the current user session as the JS Profiler could not be started."),!1;if(e.profileLifecycle!=="trace"&&e.profileLifecycle!=="manual")return I&&h.warn("[Profiling] Session not sampled. Invalid `profileLifecycle` option."),!1;let t=e.profileSessionSampleRate;return sE(t)?t?Math.random()<=t:(I&&h.log("[Profiling] Discarding profile because profileSessionSampleRate is not defined or set to 0"),!1):(I&&h.warn("[Profiling] Discarding profile because of invalid profileSessionSampleRate."),!1)}function us(e){return typeof e.profilesSampleRate<"u"}function cE(e,t,n,r){return Ak(n)?yk(e,t,n,r):null}var Dr=new Map;function uE(){return Dr.size}function lE(e){let t=Dr.get(e);return t&&Dr.delete(e),t}function dE(e,t){if(Dr.set(e,t),Dr.size>30){let n=Dr.keys().next().value;n!==void 0&&Dr.delete(n)}}function fE(e){return!e?.contexts?.profile||!e.contexts||(e.contexts.trace={...e.contexts?.trace??{},data:{...e.contexts?.trace?.data??{},"thread.id":sr,"thread.name":kc}},e.spans?.forEach(t=>{t.data={...t.data||{},"thread.id":sr,"thread.name":kc}})),e}function Mf(e){let t;Oc(e)&&(t=Q()*1e3);let n=Mc();if(!n)return;I&&h.log(`[Profiling] started profiling span: ${L(e).description}`);let r=le(),o=null;O().setContext("profile",{profile_id:r,start_timestamp:t});async function i(){if(e&&n){if(o){I&&h.log("[Profiling] profile for:",L(e).description,"already exists, returning early");return}return n.stop().then(u=>{if(s&&(w.clearTimeout(s),s=void 0),I&&h.log(`[Profiling] stopped profiling of span: ${L(e).description}`),!u){I&&h.log(`[Profiling] profiler returned null profile for: ${L(e).description}`,"this may indicate an overlapping span or a call to stopProfiling with a profile title that was never started");return}o=u,dE(r,u)}).catch(u=>{I&&h.log("[Profiling] error while stopping profiler:",u)})}}let s=w.setTimeout(()=>{I&&h.log("[Profiling] max profile duration elapsed, stopping profiling for:",L(e).description),i()},xf),a=e.end.bind(e);function c(){return e?(i().then(()=>{a()},()=>{a()}),e):a()}e.end=c}var vk=6e4,Nk=3e5,Lc=class{constructor(){this._client=void 0,this._profiler=void 0,this._chunkTimer=void 0,this._profilerId=void 0,this._isRunning=!1,this._sessionSampled=!1,this._lifecycleMode=void 0,this._activeRootSpanIds=new Set,this._rootSpanTimeouts=new Map}initialize(t){let n=t.getOptions().profileLifecycle,r=aE(t.getOptions());I&&h.log(`[Profiling] Initializing profiler (lifecycle='${n}').`),r||I&&h.log("[Profiling] Session not sampled. Skipping lifecycle profiler initialization."),this._profilerId=le(),this._client=t,this._sessionSampled=r,this._lifecycleMode=n,n==="trace"&&this._setupTraceLifecycleListeners(t)}start(){if(this._lifecycleMode==="trace"){I&&h.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.start()` are ignored in trace mode.');return}if(this._isRunning){I&&h.warn("[Profiling] Profile session is already running, `uiProfiler.start()` is a no-op.");return}if(!this._sessionSampled){I&&h.warn("[Profiling] Session is not sampled, `uiProfiler.start()` is a no-op.");return}this._beginProfiling()}stop(){if(this._lifecycleMode==="trace"){I&&h.warn('[Profiling] `profileLifecycle` is set to "trace". Calls to `uiProfiler.stop()` are ignored in trace mode.');return}if(!this._isRunning){I&&h.warn("[Profiling] Profiler is not running, `uiProfiler.stop()` is a no-op.");return}this._endProfiling()}notifyRootSpanActive(t){if(this._lifecycleMode!=="trace"||!this._sessionSampled)return;let n=t.spanContext().spanId;if(!n||this._activeRootSpanIds.has(n))return;this._registerTraceRootSpan(n);let r=this._activeRootSpanIds.size;r===1&&(I&&h.log("[Profiling] Detected already active root span during setup. Active root spans now:",r),this._beginProfiling())}_beginProfiling(){if(!this._isRunning){if(this._isRunning=!0,I&&h.log("[Profiling] Started profiling with profiler ID:",this._profilerId),ct().setContext("profile",{profiler_id:this._profilerId}),this._startProfilerInstance(),!this._profiler){I&&h.log("[Profiling] Failed to start JS Profiler; stopping."),this._resetProfilerInfo();return}this._startPeriodicChunking()}}_endProfiling(){this._isRunning&&(this._isRunning=!1,this._chunkTimer&&(clearTimeout(this._chunkTimer),this._chunkTimer=void 0),this._clearAllRootSpanTimeouts(),this._collectCurrentChunk().catch(t=>{I&&h.error("[Profiling] Failed to collect current profile chunk on `stop()`:",t)}),this._lifecycleMode==="manual"&&ct().setContext("profile",{}))}_setupTraceLifecycleListeners(t){t.on("spanStart",n=>{if(!this._sessionSampled){I&&h.log("[Profiling] Session not sampled because of negative sampling decision.");return}if(n!==Z(n))return;if(!n.isRecording()){I&&h.log("[Profiling] Discarding profile because root span was not sampled.");return}let r=n.spanContext().spanId;if(!r||this._activeRootSpanIds.has(r))return;this._registerTraceRootSpan(r);let o=this._activeRootSpanIds.size;o===1&&(I&&h.log(`[Profiling] Root span ${r} started. Profiling active while there are active root spans (count=${o}).`),this._beginProfiling())}),t.on("spanEnd",n=>{if(!this._sessionSampled)return;let r=n.spanContext().spanId;if(!r||!this._activeRootSpanIds.has(r))return;this._activeRootSpanIds.delete(r);let o=this._activeRootSpanIds.size;I&&h.log(`[Profiling] Root span with ID ${r} ended. Will continue profiling for as long as there are active root spans (currently: ${o}).`),o===0&&(this._collectCurrentChunk().catch(i=>{I&&h.error("[Profiling] Failed to collect current profile chunk on last `spanEnd`:",i)}),this._endProfiling())})}_resetProfilerInfo(){this._isRunning=!1,ct().setContext("profile",{})}_clearAllRootSpanTimeouts(){this._rootSpanTimeouts.forEach(t=>clearTimeout(t)),this._rootSpanTimeouts.clear()}_registerTraceRootSpan(t){this._activeRootSpanIds.add(t);let n=setTimeout(()=>this._onRootSpanTimeout(t),Nk);this._rootSpanTimeouts.set(t,n)}_startProfilerInstance(){if(this._profiler?.stopped===!1)return;let t=Mc();if(!t){I&&h.log("[Profiling] Failed to start JS Profiler.");return}this._profiler=t}_startPeriodicChunking(){this._isRunning&&(this._chunkTimer=setTimeout(()=>{if(this._collectCurrentChunk().catch(t=>{I&&h.error("[Profiling] Failed to collect current profile chunk during periodic chunking:",t)}),this._isRunning){if(this._startProfilerInstance(),!this._profiler){this._resetProfilerInfo();return}this._startPeriodicChunking()}},vk))}_onRootSpanTimeout(t){this._rootSpanTimeouts.has(t)&&(this._rootSpanTimeouts.delete(t),this._activeRootSpanIds.has(t)&&(I&&h.log(`[Profiling] Reached 5-minute timeout for root span ${t}. You likely started a manual root span that never called \`.end()\`.`),this._activeRootSpanIds.delete(t),this._activeRootSpanIds.size===0&&this._endProfiling()))}async _collectCurrentChunk(){let t=this._profiler;if(this._profiler=void 0,!!t)try{let n=await t.stop(),r=tE(n,this._client,this._profilerId),o=nE(r);if("reason"in o){I&&h.log("[Profiling] Discarding invalid profile chunk (this is probably a bug in the SDK):",o.reason);return}this._sendProfileChunk(r),I&&h.log("[Profiling] Collected browser profile chunk.")}catch(n){I&&h.log("[Profiling] Error while stopping JS Profiler for chunk:",n)}}_sendProfileChunk(t){let n=this._client,r=Gn(n.getSdkMetadata?.()),o=n.getDsn(),i=n.getOptions().tunnel,s=xe({event_id:le(),sent_at:new Date().toISOString(),...r&&{sdk:r},...!!i&&o&&{dsn:Fe(o)}},[[{type:"profile_chunk"},t]]);n.sendEnvelope(s).then(null,a=>{I&&h.error("Error while sending profile chunk envelope:",a)})}};var Ck="BrowserProfiling",wk=(()=>({name:Ck,setup(e){let t=e.getOptions(),n=new Lc;if(!us(t)&&!t.profileLifecycle&&(t.profileLifecycle="manual"),us(t)&&!t.profilesSampleRate){I&&h.log("[Profiling] Profiling disabled, no profiling options found.");return}let r=J(),o=r&&Z(r);if(us(t)&&t.profileSessionSampleRate!==void 0&&I&&h.warn("[Profiling] Both legacy profiling (`profilesSampleRate`) and UI profiling settings are defined. `profileSessionSampleRate` has no effect when legacy profiling is enabled."),us(t))o&&Oc(o)&&Of(o)&&Mf(o),e.on("spanStart",i=>{i===Z(i)&&Of(i)&&Mf(i)}),e.on("beforeEnvelope",i=>{if(!uE())return;let s=oE(i);if(!s.length)return;let a=[];for(let c of s){let u=c?.contexts,d=u?.profile?.profile_id,l=u?.profile?.start_timestamp;if(typeof d!="string"){I&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}if(!d){I&&h.log("[Profiling] cannot find profile for a span without a profile context");continue}u?.profile&&delete u.profile;let f=lE(d);if(!f){I&&h.log(`[Profiling] Could not retrieve profile for span: ${d}`);continue}let p=cE(d,l,f,c);p&&a.push(p)}rE(i,a)});else{let i=t.profileLifecycle;if(e.on("startUIProfiler",()=>n.start()),e.on("stopUIProfiler",()=>n.stop()),i==="manual")n.initialize(e);else if(i==="trace"){if(!we(t)){I&&h.warn("[Profiling] `profileLifecycle` is 'trace' but tracing is disabled. Set a `tracesSampleRate` or `tracesSampler` to enable span tracing.");return}n.initialize(e),o&&n.notifyRootSpanActive(o),w.setTimeout(()=>{let s=J(),a=s&&Z(s);a&&n.notifyRootSpanActive(a)},0)}}},processEvent(e){return fE(e)}})),pE=wk;var mE=()=>({name:"LaunchDarkly",processEvent(e,t,n){return Mt(e)}});function hE(){return{name:"sentry-flag-auditor",type:"flag-used",synchronous:!0,method:(e,t,n)=>{Tt(e,t.value),yt(e,t.value)}}}var _E=()=>({name:"OpenFeature",processEvent(e,t,n){return Mt(e)}}),Pc=class{after(t,n){Tt(n.flagKey,n.value),yt(n.flagKey,n.value)}error(t,n,r){Tt(t.flagKey,t.defaultValue),yt(t.flagKey,t.defaultValue)}};var gE=({featureFlagClientClass:e})=>({name:"Unleash",setupOnce(){let t=e.prototype;ge(t,"isEnabled",kk)},processEvent(t,n,r){return Mt(t)}});function kk(e){return function(...t){let n=t[0],r=e.apply(this,t);return typeof n=="string"&&typeof r=="boolean"?(Tt(n,r),yt(n,r)):I&&h.error(`[Feature Flags] UnleashClient.isEnabled does not match expected signature. arg0: ${n} (${typeof n}), result: ${r} (${typeof r})`),r}}var SE=(({growthbookClass:e})=>sl({growthbookClass:e}));var EE=({featureFlagClient:e})=>({name:"Statsig",setup(t){e.on("gate_evaluation",n=>{Tt(n.gate.name,n.gate.value),yt(n.gate.name,n.gate.value)})},processEvent(t,n,r){return Mt(t)}});async function TE(){let e=T();if(!e)return"no-client-active";if(!e.getDsn())return"no-dsn-configured";try{await ai(()=>fetch("https://o447951.ingest.sentry.io/api/4509632503087104/envelope/?sentry_version=7&sentry_key=c1dfb07d783ad5325c245c1fd3725390&sentry_client=sentry.javascript.browser%2F1.33.7",{body:"{}",method:"POST",mode:"cors",credentials:"omit"}))}catch{return"sentry-unreachable"}}var xk="WebWorker",bE=({worker:e})=>({name:xk,setupOnce:()=>{(Array.isArray(e)?e:[e]).forEach(t=>yE(t))},addWorker:t=>yE(t)});function yE(e){e.addEventListener("message",t=>{Mk(t.data)&&(t.stopImmediatePropagation(),t.data._sentryDebugIds&&(I&&h.log("Sentry debugId web worker message received",t.data),w._sentryDebugIds={...t.data._sentryDebugIds,...w._sentryDebugIds}),t.data._sentryWorkerError&&(I&&h.log("Sentry worker rejection message received",t.data._sentryWorkerError),Ok(t.data._sentryWorkerError)))})}function Ok(e){let t=T();if(!t)return;let n=t.getOptions().stackParser,r=t.getOptions().attachStacktrace,o=e.reason,i=it(o)?Ad(o):_o(n,o,void 0,r,!0);i.level="error",e.filename&&(i.contexts={...i.contexts,worker:{filename:e.filename}}),Qt(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.web_worker.onunhandledrejection"}}),I&&h.log("Captured worker unhandled rejection",o)}function IE({self:e}){e.postMessage({_sentryMessage:!0,_sentryDebugIds:e._sentryDebugIds??void 0}),e.addEventListener("unhandledrejection",t=>{let r={reason:Id(t),filename:e.location?.href};e.postMessage({_sentryMessage:!0,_sentryWorkerError:r}),I&&h.log("[Sentry Worker] Forwarding unhandled rejection to parent",r)}),I&&h.log("[Sentry Worker] Registered worker with unhandled rejection handling")}function Mk(e){if(!We(e)||e._sentryMessage!==!0)return!1;let t="_sentryDebugIds"in e,n="_sentryWorkerError"in e;return!(!t&&!n||t&&!(We(e._sentryDebugIds)||e._sentryDebugIds===void 0)||n&&!We(e._sentryWorkerError))}return CE(Lk);})();
