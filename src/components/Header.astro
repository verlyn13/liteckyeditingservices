---
interface NavLink {
  href: string;
  label: string;
}

export interface Props {
  links?: NavLink[];
  currentPath?: string;
}

const {
  links = [
    { href: '/', label: 'Home' },
    { href: '/services', label: 'Services' },
    { href: '/about', label: 'About' },
    { href: '/testimonials', label: 'Testimonials' },
    { href: '/faq', label: 'FAQ' },
    { href: '/contact', label: 'Contact' },
  ],
  currentPath = '/',
} = Astro.props;
---

<header class="sticky top-0 z-50 border-b border-soft-gray bg-off-white">
  <div class="container flex items-center justify-between py-4">
    <a href="/" class="text-lg font-semibold text-primary-navy">Litecky Editing Services</a>

    <!-- Desktop navigation -->
    <nav class="hidden md:block" aria-label="Main navigation">
      <ul class="flex gap-6">
        {
          links.map((l) => {
            const isActive = currentPath === l.href;
            return (
              <li>
                <a
                  href={l.href}
                  aria-current={isActive ? 'page' : undefined}
                  class:list={{
                    'text-primary-navy transition-colors hover:text-dark-navy': true,
                    'font-semibold underline underline-offset-4': isActive,
                  }}
                >
                  {l.label}
                </a>
              </li>
            );
          })
        }
      </ul>
    </nav>

    <!-- Mobile menu button -->
    <button
      class="relative z-50 flex h-10 w-10 items-center justify-center rounded-md border border-soft-gray md:hidden"
      aria-expanded="false"
      aria-controls="mobile-menu"
      aria-label="Toggle menu"
      data-menu-toggle
    >
      <!-- Hamburger icon (shown when closed) -->
      <svg
        class="hamburger-icon h-6 w-6 transition-opacity duration-200"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        aria-hidden="true"
      >
        <path d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
      <!-- Close icon (shown when open) -->
      <svg
        class="close-icon absolute h-6 w-6 opacity-0 transition-opacity duration-200"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        aria-hidden="true"
      >
        <path d="M6 6l12 12M6 18L18 6"></path>
      </svg>
    </button>
  </div>

  <!-- Mobile navigation dropdown -->
  <nav
    id="mobile-menu"
    class="mobile-menu hidden md:hidden"
    aria-label="Mobile navigation"
    data-menu
  >
    <ul class="container flex flex-col border-t border-soft-gray bg-off-white py-4">
      {
        links.map((l) => {
          const isActive = currentPath === l.href;
          return (
            <li>
              <a
                href={l.href}
                aria-current={isActive ? 'page' : undefined}
                class:list={{
                  'block rounded-md px-2 py-3 text-lg transition-colors': true,
                  'text-primary-navy hover:bg-soft-gray hover:text-dark-navy': !isActive,
                  'bg-soft-gray font-semibold text-primary-navy': isActive,
                }}
              >
                {l.label}
              </a>
            </li>
          );
        })
      }
    </ul>
  </nav>
</header>

<style>
  /* Mobile menu animation */
  .mobile-menu {
    max-height: 0;
    overflow: hidden;
    transition:
      max-height 0.3s ease-out,
      opacity 0.2s ease-out;
    opacity: 0;
  }

  .mobile-menu.open {
    max-height: 400px;
    opacity: 1;
  }

  /* Icon transitions when menu is open */
  [data-menu-toggle][aria-expanded='true'] .hamburger-icon {
    opacity: 0;
  }

  [data-menu-toggle][aria-expanded='true'] .close-icon {
    opacity: 1;
  }
</style>
